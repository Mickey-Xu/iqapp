{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\pages\\\\ProjectInstallationStepsPage\\\\index.js\";\nimport { Box } from \"@material-ui/core\";\nimport ProjectItemList from \"components/ProjectItemList\";\nimport ProjectSearchBar from \"components/ProjectSearchBar\";\nimport SwitchActivityNumber from \"components/SwitchActivityNumber\";\nimport { LocalizeContext } from \"i18n\";\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nconst ProjectInstallationStepsPage = ({\n  data,\n  projectNumber,\n  activityNumberList,\n  activityNumberAndUnitDesignationMapping\n}) => {\n  const i18n = React.useContext(LocalizeContext);\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [selectedActivityNumber, setSelectedActivityNumber] = useState(\"\");\n  data = data.filter(item => {\n    return item.activityNumber === selectedActivityNumber;\n  });\n  data = searchValue ? data.filter(item => {\n    var _item$orderNumber, _item$installationMet;\n\n    return ((_item$orderNumber = item.orderNumber) === null || _item$orderNumber === void 0 ? void 0 : _item$orderNumber.indexOf(searchValue)) > -1 || ((_item$installationMet = item.installationMethod) === null || _item$installationMet === void 0 ? void 0 : _item$installationMet.indexOf(searchValue)) > -1;\n  }) : data;\n\n  const useInitSelectedActivityNumber = () => {\n    useEffect(() => {\n      setSelectedActivityNumber(activityNumberList.length > 0 ? activityNumberList[0] : \"7010\");\n    }, []);\n  };\n\n  useInitSelectedActivityNumber();\n  return /*#__PURE__*/React.createElement(PrimaryLayout, {\n    title: `${i18n.ISNTAPP_PROJECT_PROGRESS}: ${projectNumber}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      padding: \"14px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ProjectSearchBar, {\n    placeholder: i18n.ISNTAPP_SEARCH_ORDER,\n    onChange: value => {\n      setSearchValue(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    style: {\n      margin: \"10px 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SwitchActivityNumber, {\n    projectNumber: projectNumber,\n    isInstallationStep: true,\n    initValue: activityNumberList.length > 0 ? activityNumberList[0] : \"7010\",\n    activityNumberList: activityNumberList,\n    activityNumberAndUnitDesignationMapping: activityNumberAndUnitDesignationMapping,\n    onChange: value => {\n      setSelectedActivityNumber(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(ProjectItemList, {\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst mapStateToProps = ({\n  orderActivities,\n  orders,\n  orderInstallationMethods,\n  productFamilies,\n  activities,\n  wayToInstallList\n}, {\n  match\n}) => {\n  const {\n    projectNumber\n  } = match.params;\n  const activityNumberAndUnitDesignationMapping = {};\n  const data = [];\n  const activityNumberList = [\"7010\", \"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\", \"7600\"];\n  activityNumberList.forEach(number => {\n    var _activities$number;\n\n    activityNumberAndUnitDesignationMapping[number] = (_activities$number = activities[number]) === null || _activities$number === void 0 ? void 0 : _activities$number.descriptionShort;\n  });\n  const ordersOfThisProject = Object.keys(orders).filter(order => {\n    return orders[order].projectNumber === projectNumber;\n  });\n\n  for (let i = 0; i < ordersOfThisProject.length; i++) {\n    var _wayToInstallList$pro, _wayToInstallList$pro2;\n\n    const installationMethodCode = orderInstallationMethods[ordersOfThisProject[i]].installationMethod;\n    const productLine = orders[ordersOfThisProject[i]].productLine;\n    const installationMethodName = (_wayToInstallList$pro = wayToInstallList[productLine]) === null || _wayToInstallList$pro === void 0 ? void 0 : (_wayToInstallList$pro2 = _wayToInstallList$pro.installationMethods) === null || _wayToInstallList$pro2 === void 0 ? void 0 : _wayToInstallList$pro2[installationMethodCode];\n\n    for (let j = 0; j < activityNumberList.length; j++) {\n      const orderActivity = orderActivities[ordersOfThisProject[i] + \"-\" + activityNumberList[j]];\n\n      if (orderActivity) {\n        const confirmedDateFormatter = orderActivity.confirmedDate ? new Date(orderActivity.confirmedDate).toLocaleDateString() : \"-\";\n        const leadingDateFormatter = orderActivity.leadingDate ? new Date(orderActivity.leadingDate).toLocaleDateString() : orderActivity.leadingStartDate && orderActivity.leadingEndDate ? new Date(orderActivity.leadingEndDate).toLocaleDateString() : \"-\";\n        data.push({\n          unitDesignation: orders[ordersOfThisProject[i]].unitDesignation,\n          productFamily: productFamilies[orders[ordersOfThisProject[i]].productFamily].name,\n          installationMethod: installationMethodName,\n          ConfirmDate: confirmedDateFormatter,\n          PlanDate: leadingDateFormatter,\n          orderNumber: ordersOfThisProject[i],\n          activityNumber: activityNumberList[j]\n        });\n      }\n    }\n  }\n\n  return {\n    data,\n    projectNumber,\n    activityNumberList,\n    activityNumberAndUnitDesignationMapping\n  };\n};\n\nexport default connect(mapStateToProps)(ProjectInstallationStepsPage);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/ProjectInstallationStepsPage/index.js"],"names":["Box","ProjectItemList","ProjectSearchBar","SwitchActivityNumber","LocalizeContext","PrimaryLayout","React","useEffect","useState","connect","ProjectInstallationStepsPage","data","projectNumber","activityNumberList","activityNumberAndUnitDesignationMapping","i18n","useContext","searchValue","setSearchValue","selectedActivityNumber","setSelectedActivityNumber","filter","item","activityNumber","orderNumber","indexOf","installationMethod","useInitSelectedActivityNumber","length","ISNTAPP_PROJECT_PROGRESS","padding","ISNTAPP_SEARCH_ORDER","value","margin","mapStateToProps","orderActivities","orders","orderInstallationMethods","productFamilies","activities","wayToInstallList","match","params","forEach","number","descriptionShort","ordersOfThisProject","Object","keys","order","i","installationMethodCode","productLine","installationMethodName","installationMethods","j","orderActivity","confirmedDateFormatter","confirmedDate","Date","toLocaleDateString","leadingDateFormatter","leadingDate","leadingStartDate","leadingEndDate","push","unitDesignation","productFamily","name","ConfirmDate","PlanDate"],"mappings":"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","sourcesContent":["import { Box } from \"@material-ui/core\";\r\nimport ProjectItemList from \"components/ProjectItemList\";\r\nimport ProjectSearchBar from \"components/ProjectSearchBar\";\r\nimport SwitchActivityNumber from \"components/SwitchActivityNumber\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst ProjectInstallationStepsPage = ({\r\n  data,\r\n  projectNumber,\r\n  activityNumberList,\r\n  activityNumberAndUnitDesignationMapping,\r\n}) => {\r\n  const i18n = React.useContext(LocalizeContext);\r\n\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [selectedActivityNumber, setSelectedActivityNumber] = useState(\"\");\r\n\r\n  data = data.filter((item) => {\r\n    return item.activityNumber === selectedActivityNumber;\r\n  });\r\n\r\n  data = searchValue\r\n    ? data.filter((item) => {\r\n        return (\r\n          item.orderNumber?.indexOf(searchValue) > -1 ||\r\n          item.installationMethod?.indexOf(searchValue) > -1\r\n        );\r\n      })\r\n    : data;\r\n\r\n  const useInitSelectedActivityNumber = () => {\r\n    useEffect(() => {\r\n      setSelectedActivityNumber(\r\n        activityNumberList.length > 0 ? activityNumberList[0] : \"7010\"\r\n      );\r\n    }, []);\r\n  };\r\n\r\n  useInitSelectedActivityNumber();\r\n\r\n  return (\r\n    <PrimaryLayout title={`${i18n.ISNTAPP_PROJECT_PROGRESS}: ${projectNumber}`}>\r\n      <Box style={{ padding: \"14px\" }}>\r\n        <ProjectSearchBar\r\n          placeholder={i18n.ISNTAPP_SEARCH_ORDER}\r\n          onChange={(value) => {\r\n            setSearchValue(value);\r\n          }}\r\n        />\r\n        <Box style={{ margin: \"10px 0\" }}>\r\n          <SwitchActivityNumber\r\n            projectNumber={projectNumber}\r\n            isInstallationStep={true}\r\n            initValue={\r\n              activityNumberList.length > 0 ? activityNumberList[0] : \"7010\"\r\n            }\r\n            activityNumberList={activityNumberList}\r\n            activityNumberAndUnitDesignationMapping={\r\n              activityNumberAndUnitDesignationMapping\r\n            }\r\n            onChange={(value) => {\r\n              setSelectedActivityNumber(value);\r\n            }}\r\n          />\r\n        </Box>\r\n        <ProjectItemList data={data} />\r\n      </Box>\r\n    </PrimaryLayout>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (\r\n  {\r\n    orderActivities,\r\n    orders,\r\n    orderInstallationMethods,\r\n    productFamilies,\r\n    activities,\r\n    wayToInstallList,\r\n  },\r\n  { match }\r\n) => {\r\n  const { projectNumber } = match.params;\r\n  const activityNumberAndUnitDesignationMapping = {};\r\n\r\n  const data = [];\r\n\r\n  const activityNumberList = [\r\n    \"7010\",\r\n    \"7020\",\r\n    \"7030\",\r\n    \"7040\",\r\n    \"7050\",\r\n    \"7060\",\r\n    \"7070\",\r\n    \"7080\",\r\n    \"7090\",\r\n    \"70A0\",\r\n    \"70B0\",\r\n    \"70C0\",\r\n    \"70D0\",\r\n    \"7600\",\r\n  ];\r\n\r\n  activityNumberList.forEach((number) => {\r\n    activityNumberAndUnitDesignationMapping[number] =\r\n      activities[number]?.descriptionShort;\r\n  });\r\n\r\n  const ordersOfThisProject = Object.keys(orders).filter((order) => {\r\n    return orders[order].projectNumber === projectNumber;\r\n  });\r\n\r\n  for (let i = 0; i < ordersOfThisProject.length; i++) {\r\n    const installationMethodCode =\r\n      orderInstallationMethods[ordersOfThisProject[i]].installationMethod;\r\n    const productLine = orders[ordersOfThisProject[i]].productLine;\r\n    const installationMethodName =\r\n      wayToInstallList[productLine]?.installationMethods?.[\r\n        installationMethodCode\r\n      ];\r\n\r\n    for (let j = 0; j < activityNumberList.length; j++) {\r\n      const orderActivity =\r\n        orderActivities[ordersOfThisProject[i] + \"-\" + activityNumberList[j]];\r\n\r\n      if (orderActivity) {\r\n        const confirmedDateFormatter = orderActivity.confirmedDate\r\n          ? new Date(orderActivity.confirmedDate).toLocaleDateString()\r\n          : \"-\";\r\n        const leadingDateFormatter = orderActivity.leadingDate\r\n          ? new Date(orderActivity.leadingDate).toLocaleDateString()\r\n          : orderActivity.leadingStartDate && orderActivity.leadingEndDate\r\n          ? new Date(orderActivity.leadingEndDate).toLocaleDateString()\r\n          : \"-\";\r\n\r\n        data.push({\r\n          unitDesignation: orders[ordersOfThisProject[i]].unitDesignation,\r\n          productFamily:\r\n            productFamilies[orders[ordersOfThisProject[i]].productFamily].name,\r\n          installationMethod: installationMethodName,\r\n          ConfirmDate: confirmedDateFormatter,\r\n          PlanDate: leadingDateFormatter,\r\n          orderNumber: ordersOfThisProject[i],\r\n          activityNumber: activityNumberList[j],\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    data,\r\n    projectNumber,\r\n    activityNumberList,\r\n    activityNumberAndUnitDesignationMapping,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProjectInstallationStepsPage);\r\n"]},"metadata":{},"sourceType":"module"}