{"ast":null,"code":"import _slicedToArray from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Box,Button,Grid,makeStyles,Typography}from\"@material-ui/core\";import Divider from\"@material-ui/core/Divider\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemAvatar from\"@material-ui/core/ListItemAvatar\";import ListItemText from\"@material-ui/core/ListItemText\";import ArrowForwardIosIcon from\"@material-ui/icons/ArrowForwardIos\";import*as action from\"actions\";import fitter from\"assets/svg/fitter.svg\";import SwitchLanguage from\"components/SwitchLanguage\";import{LocalizeContext}from\"i18n\";import{calculationOfInstallationSteps}from\"js/util\";import PrimaryLayout from\"layouts/PrimaryLayout\";import React from\"react\";import{connect}from\"react-redux\";import{useHistory}from\"react-router-dom\";import projectIcon from\"../../img/projectIcon.png\";import userManualIcon from\"../../img/userManual.png\";import about from\"../././../assets/svg/about.svg\";import downLoad from\"../././../assets/svg/downLoad.svg\";import Elevator from\"../././../assets/svg/Elevator.svg\";import key from\"../././../assets/svg/key.svg\";import language from\"../././../assets/svg/language.svg\";var useStyles=makeStyles(function(_ref){var spacing=_ref.spacing;return{root:{width:\"100%\"},instructions:{marginTop:spacing(1),marginBottom:spacing(1)},header:{display:\"flex\"},headerContainer:{width:\"100%\",margin:spacing(2,0,1,0),padding:spacing(2,2,1,2),backgroundColor:\"#FFF\"},units:{display:\"flex\",alignItems:\"center\"},listItem:{backgroundColor:\"#fff\",margin:spacing(0,0,2,0)},listItemText:{margin:spacing(0,0,0,2)},name:{marginLeft:spacing(2),whiteSpace:\"nowrap\"},userName:{marginLeft:spacing(7)},btn:{display:\"block\",textTransform:\"capitalize\",margin:spacing(3,\"auto\"),fontSize:spacing(2),color:\"red\"},asdf:{display:\"flex\",margin:\"8px\",width:\" 100%\"}};});var MePage=function MePage(_ref2){var company=_ref2.company,userName=_ref2.userName,roles=_ref2.roles,ProjectQuantity=_ref2.ProjectQuantity,progress=_ref2.progress,logout=_ref2.logout;var classes=useStyles();var i18n=React.useContext(LocalizeContext);var _React$useState=React.useState(JSON.parse(window.localStorage.getItem(\"peInfo\"))),_React$useState2=_slicedToArray(_React$useState,1),peInfo=_React$useState2[0];var list=[{name:i18n.ISNTAPP_LANGUAGE,imgSrc:language,type:\"Language\"},{name:i18n.ISNTAPP_SYNCHRONIZE,imgSrc:downLoad,link:\"synchronize\"},{name:i18n.ISNTAPP_CHANGE_PASSWORD,imgSrc:key,link:\"ChangePassword\"},{name:i18n.ISNTAPP_ABOUT,id:18,imgSrc:about,link:\"about\"},{name:i18n.INSTALLATION_USER_MANUAL,imgSrc:userManualIcon,link:\"userManual\"}];var menuItemData=[{label:i18n.ISNTAPP_LANGUAGE_ZH_CN,value:\"zh-cn\"},{label:i18n.ISNTAPP_LANGUAGE_EN,value:\"en\"}];var history=useHistory();return/*#__PURE__*/React.createElement(PrimaryLayout,{name:\"me\",title:i18n.ISNTAPP_ME},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,className:classes.headerContainer},/*#__PURE__*/React.createElement(Grid,{style:{display:\"flex\",margin:\"8px\",width:\" 100%\"}},/*#__PURE__*/React.createElement(\"img\",{src:fitter,style:{width:\"22px\",height:\"24px\"},alt:\"\"}),/*#__PURE__*/React.createElement(Typography,{align:\"center\",className:classes.name},userName)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:5},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",align:\"left\",style:{marginLeft:\"42px\"}},roles===\"Subcon TL\"?i18n.JOBLIST_SUBCON_TL:roles)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:5},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",align:\"center\"},company)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(Divider,null)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3},/*#__PURE__*/React.createElement(Box,{className:classes.units},/*#__PURE__*/React.createElement(\"img\",{src:Elevator,width:\"24\",alt:\"\"}),/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",align:\"center\",className:classes.name},i18n.ISNTAPP_UNITS))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3,align:\"center\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\"},progress.theOverallProgress)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6,align:\"center\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\"},roles===\"SL\"&&(peInfo===null||peInfo===void 0?void 0:peInfo.pNumber)&&\"PE\\u5DE5\\u53F7\\uFF1A\".concat(peInfo===null||peInfo===void 0?void 0:peInfo.pNumber))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3},/*#__PURE__*/React.createElement(Box,{className:classes.units},/*#__PURE__*/React.createElement(\"img\",{src:projectIcon,width:\"24\",style:{marginLeft:\"2px\",transform:\" scaleX(-1)\"},alt:\"\"}),/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\",align:\"center\",className:classes.name},i18n.ISNTAPP_PROJECTS))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3,align:\"center\"},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle1\"},ProjectQuantity))),/*#__PURE__*/React.createElement(List,{className:classes.root},list.map(function(item,index){return/*#__PURE__*/React.createElement(ListItem,{key:index,className:classes.listItem,onClick:function onClick(){history.push(item.link);}},/*#__PURE__*/React.createElement(\"img\",{src:item.imgSrc,width:\"24\",alt:\"\"}),/*#__PURE__*/React.createElement(ListItemText,{primary:item.name,className:classes.listItemText}),/*#__PURE__*/React.createElement(ListItemAvatar,{align:\"right\"},item.type?/*#__PURE__*/React.createElement(SwitchLanguage,{menuItemData:menuItemData}):/*#__PURE__*/React.createElement(ArrowForwardIosIcon,{fontSize:\"inherit\"})));})),/*#__PURE__*/React.createElement(Box,null,/*#__PURE__*/React.createElement(Button,{color:\"secondary\",className:classes.btn,onClick:function onClick(){return logout();}},i18n.ISNTAPP_SIGN_OUT)));};export default connect(function(_ref3){var _ref3$auth=_ref3.auth,userName=_ref3$auth.userName,roles=_ref3$auth.roles,name=_ref3$auth.company.name,orderActivities=_ref3.orderActivities,projects=_ref3.projects,orders=_ref3.orders;var ProjectQuantity=Object.keys(projects).length;var progress=calculationOfInstallationSteps(orderActivities,orders);return{userName:userName,roles:roles[0],orderActivities:orderActivities,ProjectQuantity:ProjectQuantity,progress:progress,company:name};},function(dispatch){return{logout:function logout(){dispatch(action.logout());}};})(MePage);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/MePage/index.js"],"names":["Box","Button","Grid","makeStyles","Typography","Divider","List","ListItem","ListItemAvatar","ListItemText","ArrowForwardIosIcon","action","SwitchLanguage","LocalizeContext","calculationOfInstallationSteps","PrimaryLayout","React","connect","useHistory","projectIcon","userManualIcon","useStyles","spacing","root","width","instructions","marginTop","marginBottom","header","display","headerContainer","margin","padding","backgroundColor","units","alignItems","listItem","listItemText","name","marginLeft","whiteSpace","userName","btn","textTransform","fontSize","color","asdf","MePage","company","roles","ProjectQuantity","progress","logout","classes","i18n","useContext","useState","JSON","parse","window","localStorage","getItem","peInfo","list","ISNTAPP_LANGUAGE","imgSrc","language","type","ISNTAPP_SYNCHRONIZE","downLoad","link","ISNTAPP_CHANGE_PASSWORD","key","ISNTAPP_ABOUT","id","about","INSTALLATION_USER_MANUAL","menuItemData","label","ISNTAPP_LANGUAGE_ZH_CN","value","ISNTAPP_LANGUAGE_EN","history","ISNTAPP_ME","fitter","height","JOBLIST_SUBCON_TL","Elevator","ISNTAPP_UNITS","theOverallProgress","pNumber","transform","ISNTAPP_PROJECTS","map","item","index","push","ISNTAPP_SIGN_OUT","auth","orderActivities","projects","orders","Object","keys","length","dispatch"],"mappings":"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","sourcesContent":["import { Box, Button, Grid, makeStyles, Typography } from \"@material-ui/core\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\r\nimport * as action from \"actions\";\r\nimport fitter from \"assets/svg/fitter.svg\";\r\nimport SwitchLanguage from \"components/SwitchLanguage\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport { calculationOfInstallationSteps } from \"js/util\";\r\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport projectIcon from \"../../img/projectIcon.png\";\r\nimport userManualIcon from \"../../img/userManual.png\";\r\nimport about from \"../././../assets/svg/about.svg\";\r\nimport downLoad from \"../././../assets/svg/downLoad.svg\";\r\nimport Elevator from \"../././../assets/svg/Elevator.svg\";\r\nimport key from \"../././../assets/svg/key.svg\";\r\nimport language from \"../././../assets/svg/language.svg\";\r\n\r\nconst useStyles = makeStyles(({ spacing }) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n\r\n  instructions: {\r\n    marginTop: spacing(1),\r\n    marginBottom: spacing(1),\r\n  },\r\n  header: {\r\n    display: \"flex\",\r\n  },\r\n  headerContainer: {\r\n    width: \"100%\",\r\n    margin: spacing(2, 0, 1, 0),\r\n    padding: spacing(2, 2, 1, 2),\r\n    backgroundColor: \"#FFF\",\r\n  },\r\n  units: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  listItem: {\r\n    backgroundColor: \"#fff\",\r\n    margin: spacing(0, 0, 2, 0),\r\n  },\r\n  listItemText: {\r\n    margin: spacing(0, 0, 0, 2),\r\n  },\r\n  name: {\r\n    marginLeft: spacing(2),\r\n    whiteSpace: \"nowrap\",\r\n  },\r\n  userName: {\r\n    marginLeft: spacing(7),\r\n  },\r\n  btn: {\r\n    display: \"block\",\r\n    textTransform: \"capitalize\",\r\n    margin: spacing(3, \"auto\"),\r\n    fontSize: spacing(2),\r\n    color: \"red\",\r\n  },\r\n  asdf: {\r\n    display: \"flex\",\r\n    margin: \"8px\",\r\n    width: \" 100%\",\r\n  },\r\n}));\r\n\r\nconst MePage = ({\r\n  company,\r\n  userName,\r\n  roles,\r\n  ProjectQuantity,\r\n  progress,\r\n  logout,\r\n}) => {\r\n  const classes = useStyles();\r\n  const i18n = React.useContext(LocalizeContext);\r\n  const [peInfo] = React.useState(JSON.parse(window.localStorage.getItem(\"peInfo\")));\r\n\r\n  const list = [\r\n    {\r\n      name: i18n.ISNTAPP_LANGUAGE,\r\n      imgSrc: language,\r\n      type: \"Language\",\r\n    },\r\n    {\r\n      name: i18n.ISNTAPP_SYNCHRONIZE,\r\n      imgSrc: downLoad,\r\n      link: \"synchronize\",\r\n    },\r\n    {\r\n      name: i18n.ISNTAPP_CHANGE_PASSWORD,\r\n      imgSrc: key,\r\n      link: \"ChangePassword\",\r\n    },\r\n    {\r\n      name: i18n.ISNTAPP_ABOUT,\r\n      id: 18,\r\n      imgSrc: about,\r\n      link: \"about\",\r\n    },\r\n    {\r\n      name: i18n.INSTALLATION_USER_MANUAL,\r\n      imgSrc: userManualIcon,\r\n      link: \"userManual\",\r\n    },\r\n  ];\r\n\r\n  const menuItemData = [\r\n    { label: i18n.ISNTAPP_LANGUAGE_ZH_CN, value: \"zh-cn\" },\r\n    { label: i18n.ISNTAPP_LANGUAGE_EN, value: \"en\" },\r\n  ];\r\n\r\n  const history = useHistory();\r\n  return (\r\n    <PrimaryLayout name=\"me\" title={i18n.ISNTAPP_ME}>\r\n      <Grid container spacing={1} className={classes.headerContainer}>\r\n        <Grid style={{ display: \"flex\", margin: \"8px\", width: \" 100%\" }}>\r\n          <img src={fitter} style={{ width: \"22px\", height: \"24px\" }} alt=\"\" />\r\n          <Typography align=\"center\" className={classes.name}>\r\n            {userName}\r\n          </Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={5}>\r\n          <Typography\r\n            variant=\"subtitle1\"\r\n            align=\"left\"\r\n            style={{ marginLeft: \"42px\" }}\r\n          >\r\n            {roles === \"Subcon TL\" ? i18n.JOBLIST_SUBCON_TL : roles}\r\n          </Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={5}>\r\n          <Typography variant=\"subtitle1\" align=\"center\">\r\n            {company}\r\n          </Typography>\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <Divider />\r\n        </Grid>\r\n\r\n        <Grid item xs={3}>\r\n          <Box className={classes.units}>\r\n            <img src={Elevator} width=\"24\" alt=\"\"></img>\r\n            <Typography\r\n              variant=\"subtitle1\"\r\n              align=\"center\"\r\n              className={classes.name}\r\n            >\r\n              {i18n.ISNTAPP_UNITS}\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={3} align=\"center\">\r\n          <Typography variant=\"subtitle1\">\r\n            {progress.theOverallProgress}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={6} align=\"center\">\r\n          <Typography variant=\"subtitle1\">\r\n            {roles===\"SL\"&&peInfo?.pNumber&&`PE工号：${peInfo?.pNumber}`} \r\n          </Typography>\r\n        </Grid>\r\n        <Grid item xs={3}></Grid>\r\n        <Grid item xs={12}></Grid>\r\n        <Grid item xs={3}>\r\n          <Box className={classes.units}>\r\n            <img\r\n              src={projectIcon}\r\n              width=\"24\"\r\n              style={{ marginLeft: \"2px\", transform: \" scaleX(-1)\" }}\r\n              alt=\"\"\r\n            ></img>\r\n            <Typography\r\n              variant=\"subtitle1\"\r\n              align=\"center\"\r\n              className={classes.name}\r\n            >\r\n              {i18n.ISNTAPP_PROJECTS}\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={3} align=\"center\">\r\n          <Typography variant=\"subtitle1\">{ProjectQuantity}</Typography>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <List className={classes.root}>\r\n        {list.map((item, index) => {\r\n          return (\r\n            <ListItem\r\n              key={index}\r\n              className={classes.listItem}\r\n              onClick={() => {\r\n                history.push(item.link);\r\n              }}\r\n            >\r\n              <img src={item.imgSrc} width=\"24\" alt=\"\" />\r\n              <ListItemText\r\n                primary={item.name}\r\n                className={classes.listItemText}\r\n              />\r\n              <ListItemAvatar align=\"right\">\r\n                {item.type ? (\r\n                  <SwitchLanguage menuItemData={menuItemData} />\r\n                ) : (\r\n                  <ArrowForwardIosIcon fontSize=\"inherit\" />\r\n                )}\r\n              </ListItemAvatar>\r\n            </ListItem>\r\n          );\r\n        })}\r\n      </List>\r\n      <Box>\r\n        <Button\r\n          color=\"secondary\"\r\n          className={classes.btn}\r\n          onClick={() => logout()}\r\n        >\r\n          {i18n.ISNTAPP_SIGN_OUT}\r\n        </Button>\r\n      </Box>\r\n    </PrimaryLayout>\r\n  );\r\n};\r\n\r\nexport default connect(\r\n  ({\r\n    auth: {\r\n      userName,\r\n      roles,\r\n      company: { name },\r\n    },\r\n    orderActivities,\r\n    projects,\r\n    orders,\r\n  }) => {\r\n    const ProjectQuantity = Object.keys(projects).length;\r\n    const progress = calculationOfInstallationSteps(orderActivities, orders);\r\n    return {\r\n      userName,\r\n      roles: roles[0],\r\n      orderActivities,\r\n      ProjectQuantity,\r\n      progress,\r\n      company: name,\r\n    };\r\n  },\r\n  (dispatch) => {\r\n    return {\r\n      logout: () => {\r\n        dispatch(action.logout());\r\n      },\r\n    };\r\n  }\r\n)(MePage);\r\n"]},"metadata":{},"sourceType":"module"}