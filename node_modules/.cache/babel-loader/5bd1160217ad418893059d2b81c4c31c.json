{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\pages\\\\LoginPage\\\\index.js\";\nimport React, { useState, useRef } from 'react';\n\nconst ImageUpload = () => {\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef(null);\n\n  const handleFileChange = event => {\n    const selectedFile = event.target.files[0]; // 检查文件是否存在\n\n    if (selectedFile) {\n      const validImageTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp']; // 检查文件类型\n\n      if (validImageTypes.includes(selectedFile.type)) {\n        setFile(selectedFile);\n        setError('');\n      } else {\n        setError('请上传有效的图片文件（JPEG、PNG、GIF、WEBP）。');\n        setFile(null); // 清空文件\n      }\n    }\n  };\n\n  const handleButtonClick = () => {\n    fileInputRef.current.click(); // 模拟点击隐藏的文件输入\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault(); // 这里可以添加上传文件的逻辑\n\n    if (file) {\n      console.log('上传的文件:', file);\n      alert('文件已准备好上传！'); // 在这里执行文件上传\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"\\u8BF7\\u4E0A\\u4F20\\u4E00\\u5F20\\u56FE\\u7247\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\" // 允许所有图片格式\n    ,\n    ref: fileInputRef,\n    capture: \"user\" // 仅允许选择用户设备中的文件\n    ,\n    style: {\n      display: 'none'\n    } // 隐藏文件输入\n    ,\n    onChange: handleFileChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleButtonClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, \"\\u9009\\u62E9\\u6587\\u4EF6\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, \"\\u4E0A\\u4F201\")), error && /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, error));\n};\n\nexport default ImageUpload;","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/LoginPage/index.js"],"names":["React","useState","useRef","ImageUpload","file","setFile","error","setError","fileInputRef","handleFileChange","event","selectedFile","target","files","validImageTypes","includes","type","handleButtonClick","current","click","handleSubmit","preventDefault","console","log","alert","display","color"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,QAAwC,OAAxC;;AAEA,MAAMC,WAAW,GAAG,MAAM;AACxB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBJ,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMO,YAAY,GAAGN,MAAM,CAAC,IAAD,CAA3B;;AAEA,QAAMO,gBAAgB,GAAIC,KAAD,IAAW;AAClC,UAAMC,YAAY,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAArB,CADkC,CAGlC;;AACA,QAAIF,YAAJ,EAAkB;AAChB,YAAMG,eAAe,GAAG,CAAC,YAAD,EAAe,WAAf,EAA4B,WAA5B,EAAyC,YAAzC,CAAxB,CADgB,CAGhB;;AACA,UAAIA,eAAe,CAACC,QAAhB,CAAyBJ,YAAY,CAACK,IAAtC,CAAJ,EAAiD;AAC/CX,QAAAA,OAAO,CAACM,YAAD,CAAP;AACAJ,QAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,OAHD,MAGO;AACLA,QAAAA,QAAQ,CAAC,gCAAD,CAAR;AACAF,QAAAA,OAAO,CAAC,IAAD,CAAP,CAFK,CAEU;AAChB;AACF;AACF,GAhBD;;AAkBA,QAAMY,iBAAiB,GAAG,MAAM;AAC9BT,IAAAA,YAAY,CAACU,OAAb,CAAqBC,KAArB,GAD8B,CACA;AAC/B,GAFD;;AAIA,QAAMC,YAAY,GAAIV,KAAD,IAAW;AAC9BA,IAAAA,KAAK,CAACW,cAAN,GAD8B,CAG9B;;AACA,QAAIjB,IAAJ,EAAU;AACRkB,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBnB,IAAtB;AACAoB,MAAAA,KAAK,CAAC,WAAD,CAAL,CAFQ,CAGR;AACD;AACF,GATD;;AAWA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDADF,eAEE;AAAM,IAAA,QAAQ,EAAEJ,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,MAAM,EAAC,SAFT,CAEmB;AAFnB;AAGE,IAAA,GAAG,EAAEZ,YAHP;AAIE,IAAA,OAAO,EAAC,MAJV,CAIiB;AAJjB;AAKE,IAAA,KAAK,EAAE;AAAEiB,MAAAA,OAAO,EAAE;AAAX,KALT,CAK8B;AAL9B;AAME,IAAA,QAAQ,EAAEhB,gBANZ;AAOE,IAAA,QAAQ,MAPV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAUE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAEQ,iBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAVF,eAaE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAbF,CAFF,EAiBGX,KAAK,iBAAI;AAAG,IAAA,KAAK,EAAE;AAAEoB,MAAAA,KAAK,EAAE;AAAT,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BpB,KAA7B,CAjBZ,CADF;AAqBD,CA3DD;;AA6DA,eAAeH,WAAf","sourcesContent":["import React, { useState, useRef } from 'react';\r\n\r\nconst ImageUpload = () => {\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const fileInputRef = useRef(null);\r\n\r\n  const handleFileChange = (event) => {\r\n    const selectedFile = event.target.files[0];\r\n\r\n    // 检查文件是否存在\r\n    if (selectedFile) {\r\n      const validImageTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\n\r\n      // 检查文件类型\r\n      if (validImageTypes.includes(selectedFile.type)) {\r\n        setFile(selectedFile);\r\n        setError('');\r\n      } else {\r\n        setError('请上传有效的图片文件（JPEG、PNG、GIF、WEBP）。');\r\n        setFile(null); // 清空文件\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleButtonClick = () => {\r\n    fileInputRef.current.click(); // 模拟点击隐藏的文件输入\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    // 这里可以添加上传文件的逻辑\r\n    if (file) {\r\n      console.log('上传的文件:', file);\r\n      alert('文件已准备好上传！');\r\n      // 在这里执行文件上传\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>请上传一张图片</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/*\" // 允许所有图片格式\r\n          ref={fileInputRef}\r\n          capture=\"user\" // 仅允许选择用户设备中的文件\r\n          style={{ display: 'none' }} // 隐藏文件输入\r\n          onChange={handleFileChange}\r\n          required\r\n        />\r\n        <button type=\"button\" onClick={handleButtonClick}>\r\n          选择文件\r\n        </button>\r\n        <button type=\"submit\">上传1</button>\r\n      </form>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;\r\n"]},"metadata":{},"sourceType":"module"}