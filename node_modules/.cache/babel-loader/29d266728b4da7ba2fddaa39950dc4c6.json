{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\pages\\\\OrderDetailPage\\\\index.js\";\nimport { Box, Button } from \"@material-ui/core\";\nimport * as action from \"actions\";\nimport FFTab from \"components/FFTab\";\nimport OrderActivityList from \"components/OrderActivityList\";\nimport OrderActivityListCard from \"components/OrderActivityListCard\";\nimport OrderActivityListMiniCard from \"components/OrderActivityListMiniCard\";\nimport OrderInfo from \"components/OrderInfo\";\nimport ProjectSiteAddress from \"components/ProjectSiteAddress\";\nimport { LocalizeContext } from \"i18n\";\nimport gpsIcon from \"img/gps.png\";\nimport installationIcon from \"img/installation.png\";\nimport nameIcon from \"img/name.png\";\nimport numberIcon from \"img/number.png\";\nimport orderIcon from \"img/order.png\";\nimport productlineIcon from \"img/productline.png\";\nimport progressIcon from \"img/progress.png\";\nimport subcontlIcon from \"img/subcontl.png\";\nimport teamLeader from \"img/teamLeader.png\";\nimport unitIcon from \"img/unit.png\";\nimport * as util from \"js/util\";\nimport { scrollToPosition } from \"js/util\";\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\nimport moment from \"moment\";\nimport React, { useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport * as publicFn from \"../../js/publicFn/index\";\nimport { useHistory } from \"react-router-dom\";\nimport listIcon from \"img/checkList.svg\";\nimport { getChecklistActivityNo } from \"js/util\";\n\nconst OrderDetailPage = ({\n  orderNumber,\n  data,\n  projectNumber,\n  showInstallations,\n  submit,\n  orderActivities,\n  orders,\n  whetherToShutDown,\n  defaultTab,\n  documentList\n}) => {\n  const i18n = React.useContext(LocalizeContext);\n  const history = useHistory();\n  const fields = [{\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: numberIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.PROJECTLIST_PROJECT_NO,\n    name: \"projectNumber\",\n    title: i18n.PROJECTLIST_PROJECT\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: nameIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.PROJECTLIST_PROJECT_DESCRIPTION,\n    name: \"projectName\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: gpsIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.PROJECTLIST_SITE_ADDRESS,\n    name: \"projectSite\",\n    component: () => /*#__PURE__*/React.createElement(ProjectSiteAddress, {\n      projectNumber: data.projectNumber,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    })\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: teamLeader,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.INSTAPP_PROJECTLIST_PROJECT_LEADER,\n    name: \"PM\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: subcontlIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.JOBLIST_SUBCON_TL,\n    name: \"teamLeader\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: progressIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.ISNTAPP_DESIGNATION,\n    name: \"unitDesignation\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: unitIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.INSTAPP_PROJECTLIST_UnitCount,\n    name: \"orderQuantity\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: orderIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.JOBLIST_ORDER_NUMBER,\n    name: \"orderNumber\",\n    title: i18n.JOBLIST_ORDER\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: productlineIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.ORDERDETAILS_PRODUCT_FAMILY,\n    name: \"productFamilyName\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: installationIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.INSTAPP_JOBLIST_INSTMETHOD,\n    name: \"installMethod\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: progressIcon,\n      width: \"20\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.INSTAPP_JOBLIST_UNIT_PROGRESS,\n    name: \"elevatorProgress\"\n  }, {\n    icon: () => /*#__PURE__*/React.createElement(\"img\", {\n      src: listIcon,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }),\n    label: i18n.VIEW_INSTALLATION_CHECKLIST,\n    name: \"installationChecklist\",\n    component: () => /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      style: {\n        padding: 0,\n        minWidth: \" fit-content\"\n      },\n      onClick: () => {\n        history.push(`/documents/${getChecklistActivityNo(data)}/${data.orderNumber}/${data.productFamily}/${`installationChecklist`}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, \">>\")\n  }];\n  const [tab, setTab] = React.useState(defaultTab ? defaultTab : \"basic\");\n  const tabs = [{\n    title: i18n.ISNTAPP_BASIC,\n    value: \"basic\"\n  }, {\n    title: i18n.ISNTAPP_PENDING,\n    value: \"pending\"\n  }, {\n    title: i18n.ISNTAPP_ALL,\n    value: \"all\"\n  }];\n  const title = {\n    backgroundColor: \"red\",\n    padding: \"4px 0\",\n    textAlign: \"center\",\n    fontSize: \"16px\",\n    color: \"white\"\n  };\n  const scrollRef = useRef(null);\n  const location = useLocation();\n  useEffect(() => {\n    setTimeout(() => {\n      scrollToPosition(scrollRef, location.pathname);\n    }, 1000);\n  }, [location.pathname]);\n  !getChecklistActivityNo(data) && fields.splice(fields.length - 1, 1);\n  return /*#__PURE__*/React.createElement(PrimaryLayout, {\n    title: i18n.INSTAPP_JOBLIST_UNIT_DETAIL + \": \" + data[\"orderNumber\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      position: \"fixed\",\n      top: \"52px\",\n      width: \"100%\",\n      zIndex: \"10000\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }, whetherToShutDown && /*#__PURE__*/React.createElement(\"div\", {\n    style: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, whetherToShutDown)), /*#__PURE__*/React.createElement(FFTab, {\n    tabs: tabs,\n    selectedTabValue: tab,\n    onTabChange: value => {\n      setTab(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"100%\",\n      padding: \"16px\",\n      position: \"absolute\",\n      top: whetherToShutDown ? \"60px\" : \"32px\",\n      height: window.screen.height - 187 + \"px\",\n      overflow: \"hidden auto\"\n    },\n    ref: scrollRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, tab === \"basic\" && /*#__PURE__*/React.createElement(OrderInfo, {\n    fields: fields,\n    data: data,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 29\n    }\n  }), tab === \"pending\" && /*#__PURE__*/React.createElement(OrderActivityList, {\n    data: data.filteredOrderActivities,\n    oneThousandPlannedDate: moment(orderActivities[`${orderNumber}-1000`].leadingDate, \"YYYY/MM/DD\").format(\"YYYY-MM-DD\"),\n    nineThousandPlannedDate: moment(orderActivities[`${orderNumber}-9000`].leadingDate, \"YYYY/MM/DD\").format(\"YYYY-MM-DD\"),\n    component: OrderActivityListCard,\n    tabType: \"activity\",\n    submit: (activityNumber, date, type) => {\n      submit(activityNumber, orderNumber, projectNumber, date, type, orderActivities, orders);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }), tab === \"all\" && /*#__PURE__*/React.createElement(OrderActivityList, {\n    data: data.allOrderActivities,\n    component: OrderActivityListMiniCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  })));\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  var _orders$orderNumber, _partners$, _partners$2, _orders$orderNumber2, _orders$orderNumber3, _orderInstallationMet, _methodsList$filter$, _orders$orderNumber4;\n\n  const {\n    orders,\n    projects,\n    orderInstallationMethods,\n    productFamilies,\n    partners,\n    orderActivities,\n    activities,\n    // installations,\n    auth,\n    documentList,\n    templates,\n    wayToInstallList,\n    settings: {\n      defaultTab\n    }\n  } = state;\n  const {\n    match\n  } = ownProps;\n  const {\n    params\n  } = match;\n  const {\n    number: orderNumber\n  } = params;\n  const projectNumber = (_orders$orderNumber = orders[orderNumber]) === null || _orders$orderNumber === void 0 ? void 0 : _orders$orderNumber.projectNumber;\n  const {\n    description: projectName\n  } = projects[projectNumber] ? projects[projectNumber] : \"\";\n  const {\n    productFamily\n  } = orders[orderNumber] || {};\n  const {\n    name: productFamilyName\n  } = productFamilies[productFamily] ? productFamilies[productFamily] : \"\";\n  const teamLeader = (_partners$ = partners[`${orderNumber}-VW`]) === null || _partners$ === void 0 ? void 0 : _partners$.name1;\n  const PM = (_partners$2 = partners[`${orderNumber}-YI`]) === null || _partners$2 === void 0 ? void 0 : _partners$2.name1;\n\n  const getHint = isExecutable => {\n    const finishedDateEditable = isExecutable.finishedDateEditablePermission;\n    const finishedDateCancelable = isExecutable.finishedDateCancelablePermission;\n\n    if (!finishedDateEditable && !finishedDateCancelable) {\n      return \"(无确认权限)\";\n    } else {\n      return \"\";\n    }\n  };\n\n  const filteredOrderActivitiesData = [];\n  publicFn.orderDetailSteps(orderActivities, orderNumber, auth.activityAuth, auth.roles[0]).forEach(activityNo => {\n    if (orderActivities[orderNumber + \"-\" + activityNo]) {\n      let {\n        confirmedDate,\n        leadingDate,\n        leadingEndDate,\n        leadingStartDate,\n        info,\n        originalStep,\n        activityNumber,\n        editable,\n        confPreStart,\n        confPast,\n        sort\n      } = orderActivities[orderNumber + \"-\" + activityNo];\n      const {\n        descriptionShort,\n        descriptionShort14\n      } = activities[activityNo] || {};\n      const description = orderActivities[orderNumber + \"-7030\"] ? descriptionShort14 ? descriptionShort14 : descriptionShort : descriptionShort;\n      let authOrderActivities = {\n        auth,\n        orderActivities,\n        documentList,\n        templates\n      };\n      let ownprops = {\n        activityNumber,\n        orderNumber,\n        projectNumber\n      };\n      const isExecutable = publicFn.DatePermissionControl(authOrderActivities, ownprops);\n\n      if (orderActivities[orderNumber + \"-\" + activityNo].editable !== undefined && orderActivities[orderNumber + \"-\" + activityNo].editable === false) {\n        confirmedDate ? info = \"节点已确认\" : info = \"节点可确认\";\n      }\n\n      filteredOrderActivitiesData.push({\n        activityNumber: activityNo,\n        confirmedDate: confirmedDate ? new Date(confirmedDate).toLocaleDateString() : \"-\",\n        description: description,\n        leadingDate: leadingDate ? new Date(leadingDate).toLocaleDateString() : leadingStartDate && leadingEndDate ? new Date(leadingEndDate).toLocaleDateString() : \"-\",\n        info: info || \"-\",\n        orderNumber: orderNumber,\n        productFamily,\n        originalStep,\n        editable,\n        isExecutable,\n        hint: getHint(isExecutable),\n        confPreStart,\n        confPast,\n        sort\n      });\n    }\n  });\n  const allOrderActivitiesData = [];\n  publicFn.allOrderDetailSteps(orderActivities, orderNumber, auth.activityAuth, auth.roles[0]).forEach(activityNo => {\n    if (orderActivities[orderNumber + \"-\" + activityNo]) {\n      let {\n        confirmedDate,\n        leadingDate,\n        leadingEndDate,\n        leadingStartDate,\n        activityNumber,\n        info,\n        sort\n      } = orderActivities[orderNumber + \"-\" + activityNo] || {};\n      const {\n        descriptionShort,\n        descriptionShort14\n      } = activities[activityNo] || {};\n      const description = orderActivities[orderNumber + \"-7030\"] ? descriptionShort14 ? descriptionShort14 : descriptionShort : descriptionShort;\n      let authOrderActivities = {\n        auth,\n        orderActivities,\n        documentList,\n        templates\n      };\n      let ownprops = {\n        activityNumber,\n        orderNumber,\n        projectNumber\n      };\n      const isExecutable = publicFn.DatePermissionControl(authOrderActivities, ownprops);\n\n      if (orderActivities[orderNumber + \"-\" + activityNo].editable !== undefined && orderActivities[orderNumber + \"-\" + activityNo].editable === false) {\n        confirmedDate ? info = \"节点已确认\" : info = \"节点可确认\";\n      }\n\n      allOrderActivitiesData.push({\n        activityNumber: activityNo,\n        confirmedDate: confirmedDate ? new Date(confirmedDate).toLocaleDateString() : \"-\",\n        description: description,\n        leadingDate: leadingDate ? new Date(leadingDate).toLocaleDateString() : leadingStartDate && leadingEndDate ? new Date(leadingEndDate).toLocaleDateString() : \"-\",\n        info: info || \"-\",\n        orderNumber: orderNumber,\n        productFamily,\n        isExecutable,\n        sort\n      });\n    }\n  });\n  const progress = util.orderProgress(orderActivities, orderNumber);\n  const whetherToShutDown = util.whetherToShutDown(orderActivities, orderNumber);\n  const methods = wayToInstallList[(orders === null || orders === void 0 ? void 0 : (_orders$orderNumber2 = orders[orderNumber]) === null || _orders$orderNumber2 === void 0 ? void 0 : _orders$orderNumber2.productLine) + \"-\" + (orders === null || orders === void 0 ? void 0 : (_orders$orderNumber3 = orders[orderNumber]) === null || _orders$orderNumber3 === void 0 ? void 0 : _orders$orderNumber3.productFamily)];\n  const methodsList = methods && Object.keys(methods.installationMethods).map(item => {\n    return {\n      label: methods.installationMethods[item],\n      value: item\n    };\n  });\n  const defaultselectValue = orderInstallationMethods === null || orderInstallationMethods === void 0 ? void 0 : (_orderInstallationMet = orderInstallationMethods[orderNumber]) === null || _orderInstallationMet === void 0 ? void 0 : _orderInstallationMet.installationMethod;\n  const defaultSelectInstalltion = methodsList === null || methodsList === void 0 ? void 0 : (_methodsList$filter$ = methodsList.filter(item => {\n    return item.value === defaultselectValue.toString();\n  })[0]) === null || _methodsList$filter$ === void 0 ? void 0 : _methodsList$filter$.label;\n  const unitDesignation = (_orders$orderNumber4 = orders[orderNumber]) === null || _orders$orderNumber4 === void 0 ? void 0 : _orders$orderNumber4.unitDesignation;\n  return {\n    showInstallations: true,\n    orderNumber,\n    data: {\n      projectNumber,\n      fitterQuantity: 5,\n      orderQuantity: Object.keys(orders).filter(key => {\n        return orders[key].projectNumber === projectNumber;\n      }).length,\n      projectName,\n      teamLeader,\n      PM,\n      orderNumber,\n      productFamily,\n      productFamilyName,\n      installMethod: defaultSelectInstalltion,\n      installMethods: methodsList,\n      defaultselectValue,\n      elevatorProgress: progress + \"%\",\n      filteredOrderActivities: filteredOrderActivitiesData,\n      allOrderActivities: allOrderActivitiesData,\n      unitDesignation\n    },\n    projectNumber,\n    orderActivities,\n    confPreStart: orderActivities,\n    confPast: orderActivities,\n    orders,\n    whetherToShutDown,\n    defaultTab,\n    documentList\n  };\n};\n\nconst mapDispatchToState = dispatch => {\n  return {\n    submit: (activityNumber, orderNumber, projectNumber, date, type, orderActivities, orders) => {\n      if (util.isInstallationStepEditable(orderNumber, activityNumber, orderActivities)) {\n        const data = util.setActivityStatusParams(projectNumber, orderNumber, activityNumber, date, type, orderActivities, orders);\n        dispatch(action.updateOrderActivityStatus(data));\n      } else {\n        const data = {\n          projectNo: projectNumber,\n          orderNo: orderNumber,\n          stepNo: activityNumber,\n          confirmedDate: date\n        };\n        dispatch(action.updateLocalInstallationStepConfirmDate(data));\n      }\n\n      ;\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToState)(OrderDetailPage);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/OrderDetailPage/index.js"],"names":["Box","Button","action","FFTab","OrderActivityList","OrderActivityListCard","OrderActivityListMiniCard","OrderInfo","ProjectSiteAddress","LocalizeContext","gpsIcon","installationIcon","nameIcon","numberIcon","orderIcon","productlineIcon","progressIcon","subcontlIcon","teamLeader","unitIcon","util","scrollToPosition","PrimaryLayout","moment","React","useEffect","useRef","connect","useLocation","publicFn","useHistory","getChecklistActivityNo","OrderDetailPage","orderNumber","data","projectNumber","showInstallations","submit","orderActivities","orders","whetherToShutDown","defaultTab","documentList","i18n","useContext","history","fields","icon","label","PROJECTLIST_PROJECT_NO","name","title","PROJECTLIST_PROJECT","PROJECTLIST_PROJECT_DESCRIPTION","PROJECTLIST_SITE_ADDRESS","component","INSTAPP_PROJECTLIST_PROJECT_LEADER","JOBLIST_SUBCON_TL","ISNTAPP_DESIGNATION","INSTAPP_PROJECTLIST_UnitCount","JOBLIST_ORDER_NUMBER","JOBLIST_ORDER","ORDERDETAILS_PRODUCT_FAMILY","INSTAPP_JOBLIST_INSTMETHOD","INSTAPP_JOBLIST_UNIT_PROGRESS","listIcon","VIEW_INSTALLATION_CHECKLIST","padding","minWidth","push","productFamily","tab","setTab","useState","tabs","ISNTAPP_BASIC","value","ISNTAPP_PENDING","ISNTAPP_ALL","backgroundColor","textAlign","fontSize","color","scrollRef","location","setTimeout","pathname","splice","length","INSTAPP_JOBLIST_UNIT_DETAIL","position","top","width","zIndex","height","window","screen","overflow","filteredOrderActivities","leadingDate","format","activityNumber","date","type","allOrderActivities","mapStateToProps","state","ownProps","projects","orderInstallationMethods","productFamilies","partners","activities","auth","templates","wayToInstallList","settings","match","params","number","description","projectName","productFamilyName","name1","PM","getHint","isExecutable","finishedDateEditable","finishedDateEditablePermission","finishedDateCancelable","finishedDateCancelablePermission","filteredOrderActivitiesData","orderDetailSteps","activityAuth","roles","forEach","activityNo","confirmedDate","leadingEndDate","leadingStartDate","info","originalStep","editable","confPreStart","confPast","sort","descriptionShort","descriptionShort14","authOrderActivities","ownprops","DatePermissionControl","undefined","Date","toLocaleDateString","hint","allOrderActivitiesData","allOrderDetailSteps","progress","orderProgress","methods","productLine","methodsList","Object","keys","installationMethods","map","item","defaultselectValue","installationMethod","defaultSelectInstalltion","filter","toString","unitDesignation","fitterQuantity","orderQuantity","key","installMethod","installMethods","elevatorProgress","mapDispatchToState","dispatch","isInstallationStepEditable","setActivityStatusParams","updateOrderActivityStatus","projectNo","orderNo","stepNo","updateLocalInstallationStepConfirmDate"],"mappings":"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","sourcesContent":["import { Box, Button } from \"@material-ui/core\";\r\nimport * as action from \"actions\";\r\nimport FFTab from \"components/FFTab\";\r\nimport OrderActivityList from \"components/OrderActivityList\";\r\nimport OrderActivityListCard from \"components/OrderActivityListCard\";\r\nimport OrderActivityListMiniCard from \"components/OrderActivityListMiniCard\";\r\nimport OrderInfo from \"components/OrderInfo\";\r\nimport ProjectSiteAddress from \"components/ProjectSiteAddress\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport gpsIcon from \"img/gps.png\";\r\nimport installationIcon from \"img/installation.png\";\r\nimport nameIcon from \"img/name.png\";\r\nimport numberIcon from \"img/number.png\";\r\nimport orderIcon from \"img/order.png\";\r\nimport productlineIcon from \"img/productline.png\";\r\nimport progressIcon from \"img/progress.png\";\r\nimport subcontlIcon from \"img/subcontl.png\";\r\nimport teamLeader from \"img/teamLeader.png\";\r\nimport unitIcon from \"img/unit.png\";\r\nimport * as util from \"js/util\";\r\nimport { scrollToPosition } from \"js/util\";\r\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\r\nimport moment from \"moment\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport * as publicFn from \"../../js/publicFn/index\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport listIcon from \"img/checkList.svg\";\r\nimport { getChecklistActivityNo } from \"js/util\";\r\n\r\n\r\nconst OrderDetailPage = ({\r\n  orderNumber,\r\n  data,\r\n  projectNumber,\r\n  showInstallations,\r\n  submit,\r\n  orderActivities,\r\n  orders,\r\n  whetherToShutDown,\r\n  defaultTab,\r\n  documentList,\r\n}) => {\r\n  const i18n = React.useContext(LocalizeContext);\r\n  const history = useHistory();\r\n\r\n  const fields = [\r\n    {\r\n      icon: () => <img src={numberIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.PROJECTLIST_PROJECT_NO,\r\n      name: \"projectNumber\",\r\n      title: i18n.PROJECTLIST_PROJECT,\r\n    },\r\n    {\r\n      icon: () => <img src={nameIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.PROJECTLIST_PROJECT_DESCRIPTION,\r\n      name: \"projectName\",\r\n    },\r\n    {\r\n      icon: () => <img src={gpsIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.PROJECTLIST_SITE_ADDRESS,\r\n      name: \"projectSite\",\r\n      component: () => (\r\n        <ProjectSiteAddress projectNumber={data.projectNumber} />\r\n      ),\r\n    },\r\n    {\r\n      icon: () => <img src={teamLeader} width=\"20\" alt=\"\" />,\r\n      label: i18n.INSTAPP_PROJECTLIST_PROJECT_LEADER,\r\n      name: \"PM\",\r\n    },\r\n    {\r\n      icon: () => <img src={subcontlIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.JOBLIST_SUBCON_TL,\r\n      name: \"teamLeader\",\r\n    },\r\n    {\r\n      icon: () => <img src={progressIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.ISNTAPP_DESIGNATION,\r\n      name: \"unitDesignation\",\r\n    },\r\n    {\r\n      icon: () => <img src={unitIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.INSTAPP_PROJECTLIST_UnitCount,\r\n      name: \"orderQuantity\",\r\n    },\r\n    {\r\n      icon: () => <img src={orderIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.JOBLIST_ORDER_NUMBER,\r\n      name: \"orderNumber\",\r\n      title: i18n.JOBLIST_ORDER,\r\n    },\r\n    {\r\n      icon: () => <img src={productlineIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.ORDERDETAILS_PRODUCT_FAMILY,\r\n      name: \"productFamilyName\",\r\n    },\r\n    {\r\n      icon: () => <img src={installationIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.INSTAPP_JOBLIST_INSTMETHOD,\r\n      name: \"installMethod\",\r\n    },\r\n    {\r\n      icon: () => <img src={progressIcon} width=\"20\" alt=\"\" />,\r\n      label: i18n.INSTAPP_JOBLIST_UNIT_PROGRESS,\r\n      name: \"elevatorProgress\",\r\n    },\r\n    {\r\n      icon: () => <img src={listIcon} alt=\"\" />,\r\n      label: i18n.VIEW_INSTALLATION_CHECKLIST,\r\n      name: \"installationChecklist\",\r\n      component: () => (\r\n        <Button\r\n          color=\"primary\"\r\n          style={{ padding: 0, minWidth: \" fit-content\" }}\r\n          onClick={() => {\r\n            history.push(\r\n              `/documents/${getChecklistActivityNo(data)}/${data.orderNumber}/${data.productFamily\r\n              }/${`installationChecklist`}`\r\n            );\r\n          }}\r\n        >\r\n          >>\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const [tab, setTab] = React.useState(defaultTab ? defaultTab : \"basic\");\r\n\r\n  const tabs = [\r\n    { title: i18n.ISNTAPP_BASIC, value: \"basic\" },\r\n    { title: i18n.ISNTAPP_PENDING, value: \"pending\" },\r\n    { title: i18n.ISNTAPP_ALL, value: \"all\" },\r\n  ];\r\n\r\n  const title = {\r\n    backgroundColor: \"red\",\r\n    padding: \"4px 0\",\r\n    textAlign: \"center\",\r\n    fontSize: \"16px\",\r\n    color: \"white\",\r\n  };\r\n\r\n  const scrollRef = useRef(null);\r\n\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      scrollToPosition(scrollRef, location.pathname);\r\n    }, 1000);\r\n  }, [location.pathname]);\r\n\r\n  !getChecklistActivityNo(data) && fields.splice(fields.length - 1, 1);\r\n\r\n  return (\r\n    <PrimaryLayout\r\n      title={i18n.INSTAPP_JOBLIST_UNIT_DETAIL + \": \" + data[\"orderNumber\"]}\r\n    >\r\n      <Box\r\n        style={{\r\n          position: \"fixed\",\r\n          top: \"52px\",\r\n          width: \"100%\",\r\n          zIndex: \"10000\",\r\n        }}\r\n      >\r\n        {whetherToShutDown && (\r\n          <div style={title}>\r\n            <span>{whetherToShutDown}</span>\r\n          </div>\r\n        )}\r\n        <FFTab\r\n          tabs={tabs}\r\n          selectedTabValue={tab}\r\n          onTabChange={(value) => {\r\n            setTab(value);\r\n          }}\r\n        />\r\n      </Box>\r\n      <div\r\n        style={{\r\n          width: \"100%\",\r\n          padding: \"16px\",\r\n          position: \"absolute\",\r\n          top: whetherToShutDown ? \"60px\" : \"32px\",\r\n          height: window.screen.height - 187 + \"px\",\r\n          overflow: \"hidden auto\",\r\n        }}\r\n        ref={scrollRef}\r\n      >\r\n        {tab === \"basic\" && <OrderInfo fields={fields} data={data} />}\r\n        {tab === \"pending\" && (\r\n          <OrderActivityList\r\n            data={data.filteredOrderActivities}\r\n            oneThousandPlannedDate={moment(\r\n              orderActivities[`${orderNumber}-1000`].leadingDate,\r\n              \"YYYY/MM/DD\"\r\n            ).format(\"YYYY-MM-DD\")}\r\n            nineThousandPlannedDate={moment(\r\n              orderActivities[`${orderNumber}-9000`].leadingDate,\r\n              \"YYYY/MM/DD\"\r\n            ).format(\"YYYY-MM-DD\")}\r\n            component={OrderActivityListCard}\r\n            tabType=\"activity\"\r\n            submit={(activityNumber, date, type) => {\r\n              submit(\r\n                activityNumber,\r\n                orderNumber,\r\n                projectNumber,\r\n                date,\r\n                type,\r\n                orderActivities,\r\n                orders\r\n              );\r\n            }}\r\n          ></OrderActivityList>\r\n        )}\r\n        {tab === \"all\" && (\r\n          <OrderActivityList\r\n            data={data.allOrderActivities}\r\n            component={OrderActivityListMiniCard}\r\n          ></OrderActivityList>\r\n        )}\r\n      </div>\r\n    </PrimaryLayout>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const {\r\n    orders,\r\n    projects,\r\n    orderInstallationMethods,\r\n    productFamilies,\r\n    partners,\r\n    orderActivities,\r\n    activities,\r\n    // installations,\r\n    auth,\r\n    documentList,\r\n    templates,\r\n    wayToInstallList,\r\n    settings: { defaultTab },\r\n  } = state;\r\n  const { match } = ownProps;\r\n  const { params } = match;\r\n  const { number: orderNumber } = params;\r\n  const projectNumber = orders[orderNumber]?.projectNumber;\r\n  const { description: projectName } = projects[projectNumber]\r\n    ? projects[projectNumber]\r\n    : \"\";\r\n  const { productFamily } = orders[orderNumber] || {};\r\n  const { name: productFamilyName } = productFamilies[productFamily]\r\n    ? productFamilies[productFamily]\r\n    : \"\";\r\n  const teamLeader = partners[`${orderNumber}-VW`]?.name1;\r\n  const PM = partners[`${orderNumber}-YI`]?.name1;\r\n  const getHint = (isExecutable) => {\r\n    const finishedDateEditable = isExecutable.finishedDateEditablePermission;\r\n    const finishedDateCancelable =\r\n      isExecutable.finishedDateCancelablePermission;\r\n\r\n    if (!finishedDateEditable && !finishedDateCancelable) {\r\n      return \"(无确认权限)\";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  };\r\n\r\n  const filteredOrderActivitiesData = [];\r\n\r\n  publicFn\r\n    .orderDetailSteps(\r\n      orderActivities,\r\n      orderNumber,\r\n      auth.activityAuth,\r\n      auth.roles[0]\r\n    )\r\n    .forEach((activityNo) => {\r\n      if (orderActivities[orderNumber + \"-\" + activityNo]) {\r\n        let {\r\n          confirmedDate,\r\n          leadingDate,\r\n          leadingEndDate,\r\n          leadingStartDate,\r\n          info,\r\n          originalStep,\r\n          activityNumber,\r\n          editable,\r\n          confPreStart,\r\n          confPast,\r\n          sort,\r\n        } = orderActivities[orderNumber + \"-\" + activityNo];\r\n\r\n        const { descriptionShort, descriptionShort14 } =\r\n          activities[activityNo] || {};\r\n\r\n        const description = orderActivities[orderNumber + \"-7030\"]\r\n          ? descriptionShort14\r\n            ? descriptionShort14\r\n            : descriptionShort\r\n          : descriptionShort;\r\n\r\n        let authOrderActivities = {\r\n          auth,\r\n          orderActivities,\r\n          documentList,\r\n          templates,\r\n        };\r\n\r\n        let ownprops = {\r\n          activityNumber,\r\n          orderNumber,\r\n          projectNumber,\r\n        };\r\n\r\n        const isExecutable = publicFn.DatePermissionControl(\r\n          authOrderActivities,\r\n          ownprops\r\n        );\r\n\r\n        if (\r\n          orderActivities[orderNumber + \"-\" + activityNo].editable !==\r\n          undefined &&\r\n          orderActivities[orderNumber + \"-\" + activityNo].editable === false\r\n        ) {\r\n          confirmedDate ? (info = \"节点已确认\") : (info = \"节点可确认\");\r\n        }\r\n\r\n        filteredOrderActivitiesData.push({\r\n          activityNumber: activityNo,\r\n          confirmedDate: confirmedDate\r\n            ? new Date(confirmedDate).toLocaleDateString()\r\n            : \"-\",\r\n          description: description,\r\n          leadingDate: leadingDate\r\n            ? new Date(leadingDate).toLocaleDateString()\r\n            : leadingStartDate && leadingEndDate\r\n              ? new Date(leadingEndDate).toLocaleDateString()\r\n              : \"-\",\r\n          info: info || \"-\",\r\n          orderNumber: orderNumber,\r\n          productFamily,\r\n          originalStep,\r\n          editable,\r\n          isExecutable,\r\n          hint: getHint(isExecutable),\r\n          confPreStart,\r\n          confPast,\r\n          sort,\r\n        });\r\n      }\r\n    });\r\n\r\n  const allOrderActivitiesData = [];\r\n\r\n  publicFn\r\n    .allOrderDetailSteps(\r\n      orderActivities,\r\n      orderNumber,\r\n      auth.activityAuth,\r\n      auth.roles[0]\r\n    )\r\n    .forEach((activityNo) => {\r\n      if (orderActivities[orderNumber + \"-\" + activityNo]) {\r\n        let {\r\n          confirmedDate,\r\n          leadingDate,\r\n          leadingEndDate,\r\n          leadingStartDate,\r\n          activityNumber,\r\n          info,\r\n          sort,\r\n        } = orderActivities[orderNumber + \"-\" + activityNo] || {};\r\n\r\n        const { descriptionShort, descriptionShort14 } =\r\n          activities[activityNo] || {};\r\n\r\n        const description = orderActivities[orderNumber + \"-7030\"]\r\n          ? descriptionShort14\r\n            ? descriptionShort14\r\n            : descriptionShort\r\n          : descriptionShort;\r\n\r\n        let authOrderActivities = {\r\n          auth,\r\n          orderActivities,\r\n          documentList,\r\n          templates,\r\n        };\r\n\r\n        let ownprops = {\r\n          activityNumber,\r\n          orderNumber,\r\n          projectNumber,\r\n        };\r\n\r\n        const isExecutable = publicFn.DatePermissionControl(\r\n          authOrderActivities,\r\n          ownprops\r\n        );\r\n\r\n        if (\r\n          orderActivities[orderNumber + \"-\" + activityNo].editable !==\r\n          undefined &&\r\n          orderActivities[orderNumber + \"-\" + activityNo].editable === false\r\n        ) {\r\n          confirmedDate ? (info = \"节点已确认\") : (info = \"节点可确认\");\r\n        }\r\n\r\n        allOrderActivitiesData.push({\r\n          activityNumber: activityNo,\r\n          confirmedDate: confirmedDate\r\n            ? new Date(confirmedDate).toLocaleDateString()\r\n            : \"-\",\r\n          description: description,\r\n          leadingDate: leadingDate\r\n            ? new Date(leadingDate).toLocaleDateString()\r\n            : leadingStartDate && leadingEndDate\r\n              ? new Date(leadingEndDate).toLocaleDateString()\r\n              : \"-\",\r\n          info: info || \"-\",\r\n          orderNumber: orderNumber,\r\n          productFamily,\r\n          isExecutable,\r\n          sort,\r\n        });\r\n      }\r\n    });\r\n\r\n  const progress = util.orderProgress(orderActivities, orderNumber);\r\n  const whetherToShutDown = util.whetherToShutDown(\r\n    orderActivities,\r\n    orderNumber\r\n  );\r\n\r\n  const methods =\r\n    wayToInstallList[\r\n    orders?.[orderNumber]?.productLine +\r\n    \"-\" +\r\n    orders?.[orderNumber]?.productFamily\r\n    ];\r\n\r\n  const methodsList =\r\n    methods &&\r\n    Object.keys(methods.installationMethods).map((item) => {\r\n      return { label: methods.installationMethods[item], value: item };\r\n    });\r\n\r\n  const defaultselectValue =\r\n    orderInstallationMethods?.[orderNumber]?.installationMethod;\r\n  const defaultSelectInstalltion = methodsList?.filter((item) => {\r\n    return item.value === defaultselectValue.toString();\r\n  })[0]?.label;\r\n\r\n  const unitDesignation = orders[orderNumber]?.unitDesignation;\r\n\r\n  return {\r\n    showInstallations: true,\r\n    orderNumber,\r\n    data: {\r\n      projectNumber,\r\n      fitterQuantity: 5,\r\n      orderQuantity: Object.keys(orders).filter((key) => {\r\n        return orders[key].projectNumber === projectNumber;\r\n      }).length,\r\n      projectName,\r\n      teamLeader,\r\n      PM,\r\n      orderNumber,\r\n      productFamily,\r\n      productFamilyName,\r\n      installMethod: defaultSelectInstalltion,\r\n      installMethods: methodsList,\r\n      defaultselectValue,\r\n      elevatorProgress: progress + \"%\",\r\n      filteredOrderActivities: filteredOrderActivitiesData,\r\n      allOrderActivities: allOrderActivitiesData,\r\n      unitDesignation,\r\n    },\r\n    projectNumber,\r\n    orderActivities,\r\n    confPreStart: orderActivities,\r\n    confPast: orderActivities,\r\n    orders,\r\n    whetherToShutDown,\r\n    defaultTab,\r\n    documentList,\r\n  };\r\n};\r\n\r\nconst mapDispatchToState = (dispatch) => {\r\n  return {\r\n    submit: (\r\n      activityNumber,\r\n      orderNumber,\r\n      projectNumber,\r\n      date,\r\n      type,\r\n      orderActivities,\r\n      orders\r\n    ) => {\r\n      if (\r\n        util.isInstallationStepEditable(\r\n          orderNumber,\r\n          activityNumber,\r\n          orderActivities\r\n        )\r\n      ) {\r\n        const data = util.setActivityStatusParams(\r\n          projectNumber,\r\n          orderNumber,\r\n          activityNumber,\r\n          date,\r\n          type,\r\n          orderActivities,\r\n          orders\r\n        );\r\n        dispatch(action.updateOrderActivityStatus(data));\r\n      } else {\r\n        const data = {\r\n          projectNo: projectNumber,\r\n          orderNo: orderNumber,\r\n          stepNo: activityNumber,\r\n          confirmedDate: date,\r\n        };\r\n        dispatch(action.updateLocalInstallationStepConfirmDate(data));\r\n      };\r\n\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToState)(OrderDetailPage);\r\n"]},"metadata":{},"sourceType":"module"}