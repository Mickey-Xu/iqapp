{"ast":null,"code":"import{Box,Grid}from\"@material-ui/core\";import{withStyles}from\"@material-ui/core/styles\";import React from\"react\";import{connect}from\"react-redux\";import{LocalizeContext}from\"i18n\";var FitterOverview=withStyles(function(_ref){var spacing=_ref.spacing,palette=_ref.palette;return{root:{borderBottomColor:palette.grey[\"300\"],borderBottomStyle:\"solid\",borderBottomWidth:1,padding:spacing(1,0)}};})(function(_ref2){var assignedTotal=_ref2.assignedTotal,classes=_ref2.classes,data=_ref2.data,projectNumber=_ref2.projectNumber;var i18n=React.useContext(LocalizeContext);return/*#__PURE__*/React.createElement(Box,null,/*#__PURE__*/React.createElement(Box,{fontSize:\"h6.fontSize\",fontWeight:\"fontWeightMedium\",my:2},i18n.ISNTAPP_PROJECTLIST_FITTER_ASSIGNED_TOTAL,\": \",assignedTotal),data.map(function(item,key){return/*#__PURE__*/React.createElement(Box,{className:classes.root,key:key},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},item.name),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},i18n.INSTAPP_PROJECTLIST_UnitCount,\": \",item.units),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4})),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},i18n.ISNTAPP_PROJECTLIST_FITTER_NEED,\": \",item.need),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},i18n.ISNTAPP_PROJECTLIST_FITTER_Qualified,\": \",item.qualified),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},i18n.ISNTAPP_PROJECTLIST_FITTER_Assigned,\": \",item.assigned)));}));});var mapStateToProps=function mapStateToProps(_ref3,_ref4){var fittersAssignmentTransfer=_ref3.fittersAssignmentTransfer,fittersDemand=_ref3.fittersDemand,fittersCertification=_ref3.fittersCertification,orders=_ref3.orders,productFamilies=_ref3.productFamilies;var projectNumber=_ref4.projectNumber;var productFamilyList=[];Object.keys(orders).forEach(function(item){if(orders[item].projectNumber===projectNumber){productFamilyList.push(orders[item].productFamily);}});var productFamilyCountList=productFamilyList.reduce(function(prev,next){prev[next]=prev[next]+1||1;return prev;},{});var currentFamilyAssigned=function currentFamilyAssigned(productFamily){var assignedCount=0;Object.keys(fittersCertification).forEach(function(key){Object.keys(fittersAssignmentTransfer[projectNumber]?fittersAssignmentTransfer[projectNumber]:{}).forEach(function(item){if(fittersAssignmentTransfer[projectNumber][item].sqmNr===key&&fittersCertification[key].productFamily.includes(productFamily)){assignedCount+=1;}});});return assignedCount;};return{data:Object.keys(productFamilyCountList).map(function(item){var name=productFamilies[item].name;var units=productFamilyCountList[item];return{name:name,units:units,need:units*(fittersDemand[item]?fittersDemand[item].fittersNeed:1),qualified:Object.keys(fittersCertification).filter(function(key){return fittersCertification[key].productFamily.indexOf(item)!==-1;}).length,assigned:currentFamilyAssigned(item)};}),assignedTotal:fittersAssignmentTransfer[projectNumber]?fittersAssignmentTransfer[projectNumber].length:0};};export default connect(mapStateToProps)(FitterOverview);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/components/FitterOverview/index.js"],"names":["Box","Grid","withStyles","React","connect","LocalizeContext","FitterOverview","spacing","palette","root","borderBottomColor","grey","borderBottomStyle","borderBottomWidth","padding","assignedTotal","classes","data","projectNumber","i18n","useContext","ISNTAPP_PROJECTLIST_FITTER_ASSIGNED_TOTAL","map","item","key","name","INSTAPP_PROJECTLIST_UnitCount","units","ISNTAPP_PROJECTLIST_FITTER_NEED","need","ISNTAPP_PROJECTLIST_FITTER_Qualified","qualified","ISNTAPP_PROJECTLIST_FITTER_Assigned","assigned","mapStateToProps","fittersAssignmentTransfer","fittersDemand","fittersCertification","orders","productFamilies","productFamilyList","Object","keys","forEach","push","productFamily","productFamilyCountList","reduce","prev","next","currentFamilyAssigned","assignedCount","sqmNr","includes","fittersNeed","filter","indexOf","length"],"mappings":"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","sourcesContent":["import { Box, Grid } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { LocalizeContext } from \"i18n\";\r\n\r\nconst FitterOverview = withStyles(({ spacing, palette }) => {\r\n  return {\r\n    root: {\r\n      borderBottomColor: palette.grey[\"300\"],\r\n      borderBottomStyle: \"solid\",\r\n      borderBottomWidth: 1,\r\n      padding: spacing(1, 0),\r\n    },\r\n  };\r\n})(({ assignedTotal, classes, data, projectNumber }) => {\r\n  const i18n = React.useContext(LocalizeContext);\r\n\r\n  return (\r\n    <Box>\r\n      <Box fontSize=\"h6.fontSize\" fontWeight=\"fontWeightMedium\" my={2}>\r\n        {i18n.ISNTAPP_PROJECTLIST_FITTER_ASSIGNED_TOTAL}: {assignedTotal}\r\n      </Box>\r\n      {data.map((item, key) => {\r\n        return (\r\n          <Box className={classes.root} key={key}>\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={4}>\r\n                {item.name}\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                {i18n.INSTAPP_PROJECTLIST_UnitCount}: {item.units}\r\n              </Grid>\r\n              <Grid item xs={4}></Grid>\r\n            </Grid>\r\n            <Grid container spacing={1}>\r\n              <Grid item xs={4}>\r\n                {i18n.ISNTAPP_PROJECTLIST_FITTER_NEED}: {item.need}\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                {i18n.ISNTAPP_PROJECTLIST_FITTER_Qualified}: {item.qualified}\r\n              </Grid>\r\n              <Grid item xs={4}>\r\n                {i18n.ISNTAPP_PROJECTLIST_FITTER_Assigned}: {item.assigned}\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        );\r\n      })}\r\n    </Box>\r\n  );\r\n});\r\n\r\nconst mapStateToProps = (\r\n  {\r\n    fittersAssignmentTransfer,\r\n    fittersDemand,\r\n    fittersCertification,\r\n    orders,\r\n    productFamilies,\r\n  },\r\n  { projectNumber }\r\n) => {\r\n  let productFamilyList = [];\r\n\r\n  Object.keys(orders).forEach((item) => {\r\n    if (orders[item].projectNumber === projectNumber) {\r\n      productFamilyList.push(orders[item].productFamily);\r\n    }\r\n  });\r\n\r\n  const productFamilyCountList = productFamilyList.reduce(function (\r\n    prev,\r\n    next\r\n  ) {\r\n    prev[next] = prev[next] + 1 || 1;\r\n    return prev;\r\n  },\r\n  {});\r\n\r\n  const currentFamilyAssigned = (productFamily) => {\r\n    let assignedCount = 0;\r\n    Object.keys(fittersCertification).forEach((key) => {\r\n      Object.keys(\r\n        fittersAssignmentTransfer[projectNumber]\r\n          ? fittersAssignmentTransfer[projectNumber]\r\n          : {}\r\n      ).forEach((item) => {\r\n        if (\r\n          fittersAssignmentTransfer[projectNumber][item].sqmNr === key &&\r\n          fittersCertification[key].productFamily.includes(productFamily)\r\n        ) {\r\n          assignedCount += 1;\r\n        }\r\n      });\r\n    });\r\n    return assignedCount;\r\n  };\r\n\r\n  return {\r\n    data: Object.keys(productFamilyCountList).map((item) => {\r\n      const name = productFamilies[item].name;\r\n      const units = productFamilyCountList[item];\r\n      return {\r\n        name: name,\r\n        units: units,\r\n        need:\r\n          units * (fittersDemand[item] ? fittersDemand[item].fittersNeed : 1),\r\n        qualified: Object.keys(fittersCertification).filter((key) => {\r\n          return fittersCertification[key].productFamily.indexOf(item) !== -1;\r\n        }).length,\r\n        assigned: currentFamilyAssigned(item),\r\n      };\r\n    }),\r\n    assignedTotal: fittersAssignmentTransfer[projectNumber]\r\n      ? fittersAssignmentTransfer[projectNumber].length\r\n      : 0,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(FitterOverview);\r\n"]},"metadata":{},"sourceType":"module"}