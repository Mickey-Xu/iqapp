{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\js\\\\templateFormUtil\\\\index.js\";\nimport * as action from \"actions\";\nimport { Checkboxes, DateTime, Dropdown, NaYesNo, NumberText, PageBreak, Paragraph, Photo, SectionBreak, Signature, SingleChoice, SingleLine, Slider, StaticText, YesNo } from \"components/TemplateForm\";\nimport store from \"js/store\";\nimport Moment from \"moment\";\nimport React from \"react\";\nimport { getListOfInstallationBranches } from \"js/publicFn\";\nconst defaultNaYesNoValues = {\n  na: \"N/A\",\n  fixed: \"Fixed\",\n  yes: \"Yes\",\n  no: \"No\"\n};\nconst customizeNaYesNoValues = {\n  yes: \"YES\",\n  no: \"NO\",\n  na: \"N/A\",\n  notok: \"Not OK\",\n  ok: \"OK\",\n  square: \"□\",\n  triangle: \"▽\",\n  fixed: \"Fixed\"\n};\n\nconst verifyNumber = (value, props) => {\n  // if (value > props.max) {\n  //   return props.max;\n  // } else {\n  //   if (value === \"\") {\n  //     return \"\";\n  //   }\n  //   console.log(value)\n  return value; // }\n};\n\nexport const initFormState = (state, routeParams) => {\n  state.fields.forEach(field => {\n    switch (field.type) {\n      case \"singleLine\":\n        if (!field.settings.value) {\n          field.settings.value = field.settings.prefilledAnswer;\n        }\n\n        if (field.settings.value.indexOf(\"%%!\") > -1) {\n          var _partners$, _partners$2, _partners$3, _partners$4, _partners$5, _partners$6;\n\n          const {\n            orders,\n            projects,\n            partners,\n            auth\n          } = store.getState();\n          const orderData = orders[routeParams.orderNo];\n          const textFieldText = field.settings.value.slice(3, -3);\n          const {\n            description: projectName\n          } = projects[orderData.projectNumber];\n          const PM = (_partners$ = partners[`${orderData[\"number\"]}-YI`]) === null || _partners$ === void 0 ? void 0 : _partners$.name1;\n          const PE = (_partners$2 = partners[`${orderData[\"number\"]}-Z(`]) === null || _partners$2 === void 0 ? void 0 : _partners$2.name1;\n          const InstallationClientName = (_partners$3 = partners[`${orderData[\"number\"]}-Z&`]) === null || _partners$3 === void 0 ? void 0 : _partners$3.name1;\n          const installationTeamLeader = ((_partners$4 = partners[`${orderData[\"number\"]}-SC`]) === null || _partners$4 === void 0 ? void 0 : _partners$4.name1) ? (_partners$5 = partners[`${orderData[\"number\"]}-SC`]) === null || _partners$5 === void 0 ? void 0 : _partners$5.name1 : (_partners$6 = partners[`${orderData[\"number\"]}-VW`]) === null || _partners$6 === void 0 ? void 0 : _partners$6.name1;\n          const branchName = getListOfInstallationBranches(orderData[\"prctr\"]);\n          field.settings.value = textFieldText === \"orderno\" ? orderData[\"number\"] : textFieldText === \"liftno\" ? orderData[\"unitDesignation\"] : textFieldText === \"projectname\" ? projectName : textFieldText === \"instbranch\" ? branchName : textFieldText === \"pl\" ? PM : textFieldText === \"instcustname\" ? InstallationClientName : textFieldText === \"pe\" ? PE : textFieldText === \"tl\" ? installationTeamLeader : textFieldText === \"CurrentDate\" ? auth === null || auth === void 0 ? void 0 : auth.CurrentDate : textFieldText === \"LoginUserName\" ? auth === null || auth === void 0 ? void 0 : auth.name : \"\";\n        }\n\n        break;\n\n      case \"yesNo\":\n        if (!field.settings.value) {\n          field.settings.value = field.settings.initialValue;\n        }\n\n        break;\n\n      case \"slider\":\n        if (!field.settings.value) {\n          field.settings.value = field.settings.initialValue;\n        }\n\n        break;\n\n      case \"paragraph\":\n        if (!field.settings.value) {\n          field.settings.value = field.settings.prefilledAnswer;\n        }\n\n        break;\n\n      case \"naYesNo\":\n        if (!field.settings.itemTexts && !field.settings.itemValues || field.settings.itemTexts.length === 0 && field.settings.itemValues.length === 0) {\n          field.settings.itemTexts = [];\n          field.settings.itemValues = [];\n          field.settings.itemTexts.push(\"-\");\n          field.settings.itemValues.push(\"-\");\n\n          if (field.settings.notApplicableOption) {\n            field.settings.itemValues.push(\"na\");\n            field.settings.itemTexts.push(defaultNaYesNoValues[\"na\"]);\n          }\n\n          if (field.settings.fixedOption) {\n            field.settings.itemValues.push(\"fixed\");\n            field.settings.itemTexts.push(defaultNaYesNoValues[\"fixed\"]);\n          }\n\n          field.settings.itemValues.push(\"yes\");\n          field.settings.itemTexts.push(defaultNaYesNoValues[\"yes\"]);\n          field.settings.itemValues.push(\"no\");\n          field.settings.itemTexts.push(defaultNaYesNoValues[\"no\"]);\n          field.settings.buttonDescriptions.forEach(desc => {\n            for (let i = 0; i < field.settings.itemValues.length; i++) {\n              if (desc.selectedButtonId === field.settings.itemValues[i]) {\n                // field.settings.itemValues[i] = desc.selectedDescriptionId;\n                field.settings.itemTexts[i] = customizeNaYesNoValues[desc.selectedDescriptionId];\n                break;\n              }\n            }\n          });\n        }\n\n        if (!field.settings.value) {\n          field.settings.value = \"-\";\n        }\n\n        break;\n\n      case \"photo\":\n        if (!field.settings.value) {\n          field.settings.value = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n        }\n\n        break;\n\n      case \"date\":\n        if (!field.settings.value) {\n          field.settings.value = Moment();\n\n          if (field.settings.includeTime) {\n            field.settings.value = Moment().format(\"YYYY-MM-DDTHH:mm\");\n          } else {\n            field.settings.value = Moment().format(\"YYYY-MM-DD\");\n          }\n        }\n\n        break;\n\n      case \"number\":\n        // if (!field.settings.value) {\n        //   field.settings.value = Number(\n        //     field.settings.prefilledAnswer\n        //       ? field.settings.prefilledAnswer\n        //       : 0 || field.settings.prefilledAnswer === \"\"\n        //       ? 0\n        //       : field.settings.prefilledAnswer\n        //   );\n        // }\n        if (!field.settings.value) {\n          if (!field.settings.prefilledAnswer) {\n            if (field.settings.prefilledAnswer === 0 || field.settings.prefilledAnswer === \"0\" || field.settings.prefilledAnswer) {\n              field.settings.value = field.settings.prefilledAnswer;\n            } else {\n              field.settings.value = \"\";\n            }\n          } else {\n            const {\n              auth\n            } = store.getState();\n\n            if (field.settings.prefilledAnswer === \"%%!LoginUserNo!%%\") {\n              field.settings.value = auth === null || auth === void 0 ? void 0 : auth.personalNumber;\n            } else {\n              field.settings.value = field.settings.prefilledAnswer;\n            }\n          }\n        }\n\n        break;\n\n      case \"multipleChoice\":\n        if (!field.settings.value) {\n          // field.settings.value = field.settings.value\n          //   ? field.settings.value\n          //   : \"\";\n          field.settings.value = \"\";\n        }\n\n        break;\n\n      case \"checkboxes\":\n        if (!field.settings.value) {\n          field.settings.value = field.settings.value ? field.settings.value : [];\n        }\n\n        break;\n\n      case \"signature\":\n        if (!field.settings.value) {\n          field.settings.value = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n        }\n\n        break;\n\n      case \"dropdown\":\n        if (!field.settings.value) {\n          field.settings.value = field.settings.value ? field.settings.value : \"\";\n        }\n\n        break;\n\n      default:\n    }\n  });\n  return state;\n};\nexport const initProps = (field, language) => {\n  var _field$settings;\n\n  const lang = tmplLangMapper[language];\n  const props = Object();\n  props.id = field.id;\n  props.key = field.id;\n\n  switch (field.type) {\n    case \"checkboxes\":\n      props.value = field.settings.value;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.descriptionI18n = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.options = field.settings.options;\n      props.required = field.settings.required;\n\n      props.onChange = value => {\n        props.value.indexOf(value) > -1 ? props.value.splice(props.value.indexOf(value), 1) : props.value.push(value);\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: props.value\n        }));\n      };\n\n      return props;\n\n    case \"date\":\n      props.value = field.settings.value;\n      props.required = field.settings.required;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.descriptionI18n = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.includeTime = field.settings.includeTime;\n\n      props.onChange = e => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: e.target.value\n        }));\n      };\n\n      return props;\n\n    case \"dropdown\":\n      props.value = field.settings.value;\n      props.required = field.settings.required;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.helperText = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.options = field.settings.options;\n\n      props.onChange = e => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: e\n        }));\n      };\n\n      return props;\n\n    case \"number\":\n      props.prefilledAnswer = field.settings.prefilledAnswer;\n      props.value = field.settings.value;\n      props.required = field.settings.required;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.helperText = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.unit = field.settings.unit;\n      props.type = field.type;\n      props.unitFront = field.settings.unitFront;\n      props.min = field.settings.min;\n      props.max = field.settings.max;\n\n      props.onChange = (e, props) => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: props.max || props.min ? verifyNumber(e.target.value, props).toString() : e.target.value\n        }));\n      };\n\n      return props;\n\n    case \"multipleChoice\":\n      props.value = field.settings.value;\n      props.required = field.settings.required;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.helperText = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.options = field.settings.options;\n\n      props.onChange = e => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: e.target.value\n        }));\n      };\n\n      return props;\n\n    case \"singleLine\":\n      props.identifier = field.settings.identifier;\n      props.value = field.settings.value;\n      props.required = field.settings.required;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.helperText = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n\n      props.onChange = e => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: e.target.value\n        }));\n      };\n\n      return props;\n\n    case \"yesNo\":\n      props.value = field.settings.value;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n\n      props.onChange = e => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: e.target.checked\n        }));\n      };\n\n      return props;\n\n    case \"staticText\":\n      props.value = field.settings.textI18n[lang] ? field.settings.textI18n[lang] : field.settings.textI18n.English;\n      props.images = field.settings.images;\n      props.required = field.settings.required;\n      return props;\n\n    case \"pageBreak\":\n      return props;\n\n    case \"sectionBreak\":\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.description = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      return props;\n\n    case \"photo\":\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.description = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.value = field.settings.value;\n      props.required = field.settings.required;\n      props.identifier = field === null || field === void 0 ? void 0 : (_field$settings = field.settings) === null || _field$settings === void 0 ? void 0 : _field$settings.identifier;\n\n      props.onChange = photoURL => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: photoURL === \"#\" ? \"#\" : photoURL\n        }));\n      };\n\n      return props;\n\n    case \"slider\":\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.description = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.min = field.settings.min;\n      props.max = field.settings.max;\n      props.step = field.settings.step;\n      props.value = field.settings.value;\n\n      props.onChange = (e, value) => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: value\n        }));\n      };\n\n      return props;\n\n    case \"paragraph\":\n      props.value = field.settings.value;\n      props.required = field.settings.required;\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.helperText = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n\n      props.onChange = e => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: e.target.value\n        }));\n      };\n\n      return props;\n\n    case \"naYesNo\":\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.description = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.images = field.settings.images;\n      props.value = field.settings.value;\n      props.itemTexts = field.settings.itemTexts;\n      props.itemValues = field.settings.itemValues;\n      props.required = field.settings.required;\n\n      props.onClick = e => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: e.currentTarget.value\n        }));\n      };\n\n      return props;\n\n    case \"signature\":\n      props.label = field.settings.labelI18n[lang] ? field.settings.labelI18n[lang] : field.settings.labelI18n.English;\n      props.description = field.settings.descriptionI18n[lang] ? field.settings.descriptionI18n[lang] : field.settings.descriptionI18n.English;\n      props.value = field.settings.value;\n\n      props.onChange = value => {\n        store.dispatch(action.handleOnChange({\n          id: field.id,\n          type: field.type,\n          value: value\n        }));\n      };\n\n      return props;\n\n    default:\n  }\n\n  return props;\n};\nconst componentMapper = {\n  checkboxes: Checkboxes,\n  date: DateTime,\n  dropdown: Dropdown,\n  number: NumberText,\n  multipleChoice: SingleChoice,\n  singleLine: SingleLine,\n  yesNo: YesNo,\n  staticText: StaticText,\n  pageBreak: PageBreak,\n  sectionBreak: SectionBreak,\n  photo: Photo,\n  slider: Slider,\n  paragraph: Paragraph,\n  naYesNo: NaYesNo,\n  signature: Signature\n};\nexport const componentGenerator = (field, props) => {\n  if (typeof componentMapper[field.type] !== \"undefined\") {\n    return React.createElement(componentMapper[field.type], props);\n  }\n\n  return React.createElement(() => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 11\n    }\n  }, \"The component \", field.type, \" has not been created yet.\"), props);\n};\nexport const changeValue = (state, data) => {\n  const param = state.currentTemplateParams; // documentNo +\n  //   \"-\" +\n  //   documentPart +\n  //   \"-\" +\n  //   activityNo +\n  //   \"-\" +\n  //   productFamily +\n  //   \"-\" +\n  //   productLine +\n  //   \"-\" +\n  //   language;\n\n  const fields = state[param.documentNo + \"-\" + param.documentPart + \"-\" + param.activityNo + \"-\" + param.productFamily + \"-\" + param.productLine + \"-\" + param.language].fields;\n\n  for (let i = 0; i < fields.length; i++) {\n    if (data.id === fields[i].id) {\n      switch (fields[i].type) {\n        case \"singleLine\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"yesNo\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"photo\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"slider\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"paragraph\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"naYesNo\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"date\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"number\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"signature\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"multipleChoice\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"checkboxes\":\n          fields[i].settings.value = data.value;\n          break;\n\n        case \"dropdown\":\n          fields[i].settings.value = data.value;\n          break;\n\n        default:\n      }\n\n      return state;\n    }\n  }\n};\nconst ops = {\n  isString: \"==\",\n  isNotString: \"!=\",\n  isNumber: \"==\",\n  isNotNumber: \"!=\",\n  isOption: \"==\",\n  isNotOption: \"!=\",\n  isBool: \"==\",\n  isExtBool: \"==\",\n  isNotExtBool: \"!=\",\n  isDate: \"==\",\n  isNotDate: \"!=\",\n  before: \"==\",\n  // TODO: below need handle\n  after: \"==\",\n  startsWith: \"==\",\n  endsWith: \"==\",\n  greaterThan: \"==\",\n  lessThan: \"==\",\n  containsString: \"!=\",\n  containsOption: \"==\",\n  doesNotContainString: \"!=\",\n  doesNotContainOption: \"==\",\n  and: \"&&\",\n  or: \"||\"\n};\nexport const isVisible = field => {\n  var _store$getState$templ;\n\n  let res = true;\n  const param = (_store$getState$templ = store.getState().templateForm) === null || _store$getState$templ === void 0 ? void 0 : _store$getState$templ.currentTemplateParams;\n  if (!param) return res;\n  const templateForm = store.getState().templateForm[param.documentNo + \"-\" + param.documentPart + \"-\" + param.activityNo + \"-\" + param.productFamily + \"-\" + param.productLine + \"-\" + param.language];\n  const fields = templateForm === null || templateForm === void 0 ? void 0 : templateForm.fields;\n\n  for (let rulesIndex = 0; rulesIndex < field.settings.visRules.length; rulesIndex++) {\n    for (let fieldIndex = 0; fieldIndex < fields.length; fieldIndex++) {\n      if (fields[fieldIndex].id === field.settings.visRules[rulesIndex].fieldId) {\n        /*eslint no-eval: 0*/\n        let result;\n\n        if (fields[fieldIndex].type === \"photo\") {\n          console.log(field);\n        }\n\n        if (fields[fieldIndex].type === \"naYesNo\") {\n          let value;\n\n          if (fields[fieldIndex].settings.value === \"yes\") {\n            value = \"true\";\n          } else if (fields[fieldIndex].settings.value === \"no\") {\n            value = \"false\";\n          } else {\n            value = fields[fieldIndex].settings.value;\n          }\n\n          result = JSON.stringify(value);\n        } else {\n          result = JSON.stringify(fields[fieldIndex].settings.value);\n        }\n\n        const cond = eval(result + ops[field.settings.visRules[rulesIndex].operatorId] + JSON.stringify(field.settings.visRules[rulesIndex].argument));\n        /*eslint no-eval: 0*/\n\n        res = eval(JSON.stringify(res) + ops[field.settings.visRules[rulesIndex].conjunctionOperator] + JSON.stringify(cond));\n        break;\n      }\n    }\n  }\n\n  return res;\n};\nexport const tmplLangMapper = {\n  EN: \"English\",\n  ZH: \"Chinese\"\n};","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/js/templateFormUtil/index.js"],"names":["action","Checkboxes","DateTime","Dropdown","NaYesNo","NumberText","PageBreak","Paragraph","Photo","SectionBreak","Signature","SingleChoice","SingleLine","Slider","StaticText","YesNo","store","Moment","React","getListOfInstallationBranches","defaultNaYesNoValues","na","fixed","yes","no","customizeNaYesNoValues","notok","ok","square","triangle","verifyNumber","value","props","initFormState","state","routeParams","fields","forEach","field","type","settings","prefilledAnswer","indexOf","orders","projects","partners","auth","getState","orderData","orderNo","textFieldText","slice","description","projectName","projectNumber","PM","name1","PE","InstallationClientName","installationTeamLeader","branchName","CurrentDate","name","initialValue","itemTexts","itemValues","length","push","notApplicableOption","fixedOption","buttonDescriptions","desc","i","selectedButtonId","selectedDescriptionId","includeTime","format","personalNumber","initProps","language","lang","tmplLangMapper","Object","id","key","label","labelI18n","English","descriptionI18n","options","required","onChange","splice","dispatch","handleOnChange","e","target","helperText","unit","unitFront","min","max","toString","identifier","checked","textI18n","images","photoURL","step","onClick","currentTarget","componentMapper","checkboxes","date","dropdown","number","multipleChoice","singleLine","yesNo","staticText","pageBreak","sectionBreak","photo","slider","paragraph","naYesNo","signature","componentGenerator","createElement","changeValue","data","param","currentTemplateParams","documentNo","documentPart","activityNo","productFamily","productLine","ops","isString","isNotString","isNumber","isNotNumber","isOption","isNotOption","isBool","isExtBool","isNotExtBool","isDate","isNotDate","before","after","startsWith","endsWith","greaterThan","lessThan","containsString","containsOption","doesNotContainString","doesNotContainOption","and","or","isVisible","res","templateForm","rulesIndex","visRules","fieldIndex","fieldId","result","console","log","JSON","stringify","cond","eval","operatorId","argument","conjunctionOperator","EN","ZH"],"mappings":"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","sourcesContent":["import * as action from \"actions\";\r\nimport {\r\n  Checkboxes,\r\n  DateTime,\r\n  Dropdown,\r\n  NaYesNo,\r\n  NumberText,\r\n  PageBreak,\r\n  Paragraph,\r\n  Photo,\r\n  SectionBreak,\r\n  Signature,\r\n  SingleChoice,\r\n  SingleLine,\r\n  Slider,\r\n  StaticText,\r\n  YesNo,\r\n} from \"components/TemplateForm\";\r\nimport store from \"js/store\";\r\nimport Moment from \"moment\";\r\nimport React from \"react\";\r\nimport { getListOfInstallationBranches } from \"js/publicFn\";\r\n\r\nconst defaultNaYesNoValues = {\r\n  na: \"N/A\",\r\n  fixed: \"Fixed\",\r\n  yes: \"Yes\",\r\n  no: \"No\",\r\n};\r\n\r\nconst customizeNaYesNoValues = {\r\n  yes: \"YES\",\r\n  no: \"NO\",\r\n  na: \"N/A\",\r\n  notok: \"Not OK\",\r\n  ok: \"OK\",\r\n  square: \"□\",\r\n  triangle: \"▽\",\r\n  fixed: \"Fixed\",\r\n};\r\n\r\nconst verifyNumber = (value, props) => {\r\n  // if (value > props.max) {\r\n  //   return props.max;\r\n  // } else {\r\n  //   if (value === \"\") {\r\n  //     return \"\";\r\n  //   }\r\n  //   console.log(value)\r\n    return value;\r\n  // }\r\n};\r\n\r\nexport const initFormState = (state, routeParams) => {\r\n  state.fields.forEach((field) => {\r\n    switch (field.type) {\r\n      case \"singleLine\":\r\n        if (!field.settings.value) {\r\n          field.settings.value = field.settings.prefilledAnswer;\r\n        }\r\n        if (field.settings.value.indexOf(\"%%!\") > -1) {\r\n          const { orders, projects, partners, auth } = store.getState();\r\n          const orderData = orders[routeParams.orderNo];\r\n          const textFieldText = field.settings.value.slice(3, -3);\r\n          const { description: projectName } =\r\n            projects[orderData.projectNumber];\r\n          const PM = partners[`${orderData[\"number\"]}-YI`]?.name1;\r\n          const PE = partners[`${orderData[\"number\"]}-Z(`]?.name1;\r\n          const InstallationClientName =\r\n            partners[`${orderData[\"number\"]}-Z&`]?.name1;\r\n          const installationTeamLeader = partners[`${orderData[\"number\"]}-SC`]\r\n            ?.name1\r\n            ? partners[`${orderData[\"number\"]}-SC`]?.name1\r\n            : partners[`${orderData[\"number\"]}-VW`]?.name1;\r\n\r\n          const branchName = getListOfInstallationBranches(orderData[\"prctr\"]);\r\n          field.settings.value =\r\n            textFieldText === \"orderno\"\r\n              ? orderData[\"number\"]\r\n              : textFieldText === \"liftno\"\r\n              ? orderData[\"unitDesignation\"]\r\n              : textFieldText === \"projectname\"\r\n              ? projectName\r\n              : textFieldText === \"instbranch\"\r\n              ? branchName\r\n              : textFieldText === \"pl\"\r\n              ? PM\r\n              : textFieldText === \"instcustname\"\r\n              ? InstallationClientName\r\n              : textFieldText === \"pe\"\r\n              ? PE\r\n              : textFieldText === \"tl\"\r\n              ? installationTeamLeader\r\n              : textFieldText === \"CurrentDate\"\r\n              ? auth?.CurrentDate\r\n              : textFieldText === \"LoginUserName\"\r\n              ? auth?.name\r\n              : \"\";\r\n        }\r\n        break;\r\n      case \"yesNo\":\r\n        if (!field.settings.value) {\r\n          field.settings.value = field.settings.initialValue;\r\n        }\r\n        break;\r\n      case \"slider\":\r\n        if (!field.settings.value) {\r\n          field.settings.value = field.settings.initialValue;\r\n        }\r\n        break;\r\n      case \"paragraph\":\r\n        if (!field.settings.value) {\r\n          field.settings.value = field.settings.prefilledAnswer;\r\n        }\r\n        break;\r\n      case \"naYesNo\":\r\n        if (\r\n          (!field.settings.itemTexts && !field.settings.itemValues) ||\r\n          (field.settings.itemTexts.length === 0 &&\r\n            field.settings.itemValues.length === 0)\r\n        ) {\r\n          field.settings.itemTexts = [];\r\n          field.settings.itemValues = [];\r\n\r\n          field.settings.itemTexts.push(\"-\");\r\n          field.settings.itemValues.push(\"-\");\r\n\r\n          if (field.settings.notApplicableOption) {\r\n            field.settings.itemValues.push(\"na\");\r\n            field.settings.itemTexts.push(defaultNaYesNoValues[\"na\"]);\r\n          }\r\n\r\n          if (field.settings.fixedOption) {\r\n            field.settings.itemValues.push(\"fixed\");\r\n            field.settings.itemTexts.push(defaultNaYesNoValues[\"fixed\"]);\r\n          }\r\n\r\n          field.settings.itemValues.push(\"yes\");\r\n          field.settings.itemTexts.push(defaultNaYesNoValues[\"yes\"]);\r\n\r\n          field.settings.itemValues.push(\"no\");\r\n          field.settings.itemTexts.push(defaultNaYesNoValues[\"no\"]);\r\n\r\n          field.settings.buttonDescriptions.forEach((desc) => {\r\n            for (let i = 0; i < field.settings.itemValues.length; i++) {\r\n              if (desc.selectedButtonId === field.settings.itemValues[i]) {\r\n                // field.settings.itemValues[i] = desc.selectedDescriptionId;\r\n                field.settings.itemTexts[i] =\r\n                  customizeNaYesNoValues[desc.selectedDescriptionId];\r\n                break;\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        if (!field.settings.value) {\r\n          field.settings.value = \"-\";\r\n        }\r\n        break;\r\n      case \"photo\":\r\n        if (!field.settings.value) {\r\n          field.settings.value =\r\n            \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\r\n        }\r\n        break;\r\n      case \"date\":\r\n        if (!field.settings.value) {\r\n          field.settings.value = Moment();\r\n          if (field.settings.includeTime) {\r\n            field.settings.value = Moment().format(\"YYYY-MM-DDTHH:mm\");\r\n          } else {\r\n            field.settings.value = Moment().format(\"YYYY-MM-DD\");\r\n          }\r\n        }\r\n        break;\r\n      case \"number\":\r\n        // if (!field.settings.value) {\r\n        //   field.settings.value = Number(\r\n        //     field.settings.prefilledAnswer\r\n        //       ? field.settings.prefilledAnswer\r\n        //       : 0 || field.settings.prefilledAnswer === \"\"\r\n        //       ? 0\r\n        //       : field.settings.prefilledAnswer\r\n        //   );\r\n        // }\r\n        if (!field.settings.value) {\r\n          if (!field.settings.prefilledAnswer) {\r\n            if (\r\n              field.settings.prefilledAnswer === 0 ||\r\n              field.settings.prefilledAnswer === \"0\" ||\r\n              field.settings.prefilledAnswer\r\n            ) {\r\n              field.settings.value = field.settings.prefilledAnswer;\r\n            } else {\r\n              field.settings.value = \"\";\r\n            }\r\n          } else {\r\n            const { auth } = store.getState();\r\n            if (field.settings.prefilledAnswer === \"%%!LoginUserNo!%%\") {\r\n              field.settings.value =auth?.personalNumber\r\n            } else {\r\n              field.settings.value = field.settings.prefilledAnswer;\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case \"multipleChoice\":\r\n        if (!field.settings.value) {\r\n          // field.settings.value = field.settings.value\r\n          //   ? field.settings.value\r\n          //   : \"\";\r\n          field.settings.value = \"\";\r\n        }\r\n\r\n        break;\r\n      case \"checkboxes\":\r\n        if (!field.settings.value) {\r\n          field.settings.value = field.settings.value\r\n            ? field.settings.value\r\n            : [];\r\n        }\r\n        break;\r\n      case \"signature\":\r\n        if (!field.settings.value) {\r\n          field.settings.value =\r\n            \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\r\n        }\r\n        break;\r\n      case \"dropdown\":\r\n        if (!field.settings.value) {\r\n          field.settings.value = field.settings.value\r\n            ? field.settings.value\r\n            : \"\";\r\n        }\r\n        break;\r\n      default:\r\n    }\r\n  });\r\n\r\n  return state;\r\n};\r\n\r\nexport const initProps = (field, language) => {\r\n  const lang = tmplLangMapper[language];\r\n\r\n  const props = Object();\r\n  props.id = field.id;\r\n  props.key = field.id;\r\n  switch (field.type) {\r\n    case \"checkboxes\":\r\n      props.value = field.settings.value;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.descriptionI18n = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.options = field.settings.options;\r\n      props.required = field.settings.required;\r\n      props.onChange = (value) => {\r\n        props.value.indexOf(value) > -1\r\n          ? props.value.splice(props.value.indexOf(value), 1)\r\n          : props.value.push(value);\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: props.value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"date\":\r\n      props.value = field.settings.value;\r\n      props.required = field.settings.required;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.descriptionI18n = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.includeTime = field.settings.includeTime;\r\n      props.onChange = (e) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: e.target.value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"dropdown\":\r\n      props.value = field.settings.value;\r\n      props.required = field.settings.required;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.helperText = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.options = field.settings.options;\r\n      props.onChange = (e) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: e,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"number\":\r\n      props.prefilledAnswer = field.settings.prefilledAnswer;\r\n      props.value = field.settings.value;\r\n      props.required = field.settings.required;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.helperText = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.unit = field.settings.unit;\r\n      props.type = field.type;\r\n      props.unitFront = field.settings.unitFront;\r\n      props.min = field.settings.min;\r\n      props.max = field.settings.max;\r\n      props.onChange = (e, props) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value:\r\n              props.max || props.min\r\n                ? verifyNumber(e.target.value, props).toString()\r\n                : e.target.value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"multipleChoice\":\r\n      props.value = field.settings.value;\r\n      props.required = field.settings.required;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.helperText = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.options = field.settings.options;\r\n      props.onChange = (e) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: e.target.value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"singleLine\":\r\n      props.identifier = field.settings.identifier;\r\n      props.value = field.settings.value;\r\n      props.required = field.settings.required;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.helperText = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.onChange = (e) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: e.target.value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"yesNo\":\r\n      props.value = field.settings.value;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.onChange = (e) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: e.target.checked,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"staticText\":\r\n      props.value = field.settings.textI18n[lang]\r\n        ? field.settings.textI18n[lang]\r\n        : field.settings.textI18n.English;\r\n      props.images = field.settings.images;\r\n      props.required = field.settings.required;\r\n      return props;\r\n    case \"pageBreak\":\r\n      return props;\r\n    case \"sectionBreak\":\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.description = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      return props;\r\n    case \"photo\":\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.description = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.value = field.settings.value;\r\n      props.required = field.settings.required;\r\n      props.identifier = field?.settings?.identifier\r\n      props.onChange = (photoURL) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: photoURL === \"#\" ? \"#\" : photoURL,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"slider\":\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.description = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.min = field.settings.min;\r\n      props.max = field.settings.max;\r\n      props.step = field.settings.step;\r\n      props.value = field.settings.value;\r\n      props.onChange = (e, value) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"paragraph\":\r\n      props.value = field.settings.value;\r\n      props.required = field.settings.required;\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.helperText = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.onChange = (e) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: e.target.value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"naYesNo\":\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.description = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.images = field.settings.images;\r\n      props.value = field.settings.value;\r\n      props.itemTexts = field.settings.itemTexts;\r\n      props.itemValues = field.settings.itemValues;\r\n      props.required = field.settings.required;\r\n      props.onClick = (e) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: e.currentTarget.value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    case \"signature\":\r\n      props.label = field.settings.labelI18n[lang]\r\n        ? field.settings.labelI18n[lang]\r\n        : field.settings.labelI18n.English;\r\n      props.description = field.settings.descriptionI18n[lang]\r\n        ? field.settings.descriptionI18n[lang]\r\n        : field.settings.descriptionI18n.English;\r\n      props.value = field.settings.value;\r\n      props.onChange = (value) => {\r\n        store.dispatch(\r\n          action.handleOnChange({\r\n            id: field.id,\r\n            type: field.type,\r\n            value: value,\r\n          })\r\n        );\r\n      };\r\n      return props;\r\n    default:\r\n  }\r\n  return props;\r\n};\r\n\r\nconst componentMapper = {\r\n  checkboxes: Checkboxes,\r\n  date: DateTime,\r\n  dropdown: Dropdown,\r\n  number: NumberText,\r\n  multipleChoice: SingleChoice,\r\n  singleLine: SingleLine,\r\n  yesNo: YesNo,\r\n  staticText: StaticText,\r\n  pageBreak: PageBreak,\r\n  sectionBreak: SectionBreak,\r\n  photo: Photo,\r\n  slider: Slider,\r\n  paragraph: Paragraph,\r\n  naYesNo: NaYesNo,\r\n  signature: Signature,\r\n};\r\n\r\nexport const componentGenerator = (field, props) => {\r\n  if (typeof componentMapper[field.type] !== \"undefined\") {\r\n    return React.createElement(componentMapper[field.type], props);\r\n  }\r\n\r\n  return React.createElement(\r\n    () => <div>The component {field.type} has not been created yet.</div>,\r\n    props\r\n  );\r\n};\r\n\r\nexport const changeValue = (state, data) => {\r\n  const param = state.currentTemplateParams;\r\n\r\n  // documentNo +\r\n  //   \"-\" +\r\n  //   documentPart +\r\n  //   \"-\" +\r\n  //   activityNo +\r\n  //   \"-\" +\r\n  //   productFamily +\r\n  //   \"-\" +\r\n  //   productLine +\r\n  //   \"-\" +\r\n  //   language;\r\n\r\n  const fields =\r\n    state[\r\n      param.documentNo +\r\n        \"-\" +\r\n        param.documentPart +\r\n        \"-\" +\r\n        param.activityNo +\r\n        \"-\" +\r\n        param.productFamily +\r\n        \"-\" +\r\n        param.productLine +\r\n        \"-\" +\r\n        param.language\r\n    ].fields;\r\n\r\n  for (let i = 0; i < fields.length; i++) {\r\n    if (data.id === fields[i].id) {\r\n      switch (fields[i].type) {\r\n        case \"singleLine\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"yesNo\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"photo\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"slider\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"paragraph\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"naYesNo\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"date\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"number\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"signature\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"multipleChoice\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"checkboxes\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        case \"dropdown\":\r\n          fields[i].settings.value = data.value;\r\n          break;\r\n        default:\r\n      }\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nconst ops = {\r\n  isString: \"==\",\r\n  isNotString: \"!=\",\r\n  isNumber: \"==\",\r\n  isNotNumber: \"!=\",\r\n  isOption: \"==\",\r\n  isNotOption: \"!=\",\r\n  isBool: \"==\",\r\n  isExtBool: \"==\",\r\n  isNotExtBool: \"!=\",\r\n  isDate: \"==\",\r\n  isNotDate: \"!=\",\r\n  before: \"==\", // TODO: below need handle\r\n  after: \"==\",\r\n  startsWith: \"==\",\r\n  endsWith: \"==\",\r\n  greaterThan: \"==\",\r\n  lessThan: \"==\",\r\n  containsString: \"!=\",\r\n  containsOption: \"==\",\r\n  doesNotContainString: \"!=\",\r\n  doesNotContainOption: \"==\",\r\n  and: \"&&\",\r\n  or: \"||\",\r\n};\r\n\r\nexport const isVisible = (field) => {\r\n  let res = true;\r\n\r\n  const param = store.getState().templateForm?.currentTemplateParams;\r\n  if (!param) return res;\r\n  const templateForm =\r\n    store.getState().templateForm[\r\n      param.documentNo +\r\n        \"-\" +\r\n        param.documentPart +\r\n        \"-\" +\r\n        param.activityNo +\r\n        \"-\" +\r\n        param.productFamily +\r\n        \"-\" +\r\n        param.productLine +\r\n        \"-\" +\r\n        param.language\r\n    ];\r\n\r\n  const fields = templateForm?.fields;\r\n\r\n  for (\r\n    let rulesIndex = 0;\r\n    rulesIndex < field.settings.visRules.length;\r\n    rulesIndex++\r\n  ) {\r\n    for (let fieldIndex = 0; fieldIndex < fields.length; fieldIndex++) {\r\n      if (\r\n        fields[fieldIndex].id === field.settings.visRules[rulesIndex].fieldId\r\n      ) {\r\n        /*eslint no-eval: 0*/\r\n        let result;\r\n        if (fields[fieldIndex].type === \"photo\") {\r\n          console.log(field)\r\n        }\r\n        if (fields[fieldIndex].type === \"naYesNo\") {\r\n          let value;\r\n          if (fields[fieldIndex].settings.value === \"yes\") {\r\n            value = \"true\";\r\n          } else if (fields[fieldIndex].settings.value === \"no\") {\r\n            value = \"false\";\r\n          } else {\r\n            value = fields[fieldIndex].settings.value;\r\n          }\r\n          result = JSON.stringify(value);\r\n        } else {\r\n         \r\n          result = JSON.stringify(fields[fieldIndex].settings.value);\r\n        }\r\n\r\n        const cond = eval(\r\n          result +\r\n            ops[field.settings.visRules[rulesIndex].operatorId] +\r\n            JSON.stringify(field.settings.visRules[rulesIndex].argument)\r\n        );\r\n\r\n        /*eslint no-eval: 0*/\r\n        res = eval(\r\n          JSON.stringify(res) +\r\n            ops[field.settings.visRules[rulesIndex].conjunctionOperator] +\r\n            JSON.stringify(cond)\r\n        );\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nexport const tmplLangMapper = {\r\n  EN: \"English\",\r\n  ZH: \"Chinese\",\r\n};\r\n"]},"metadata":{},"sourceType":"module"}