{"ast":null,"code":"export const stepDescription = {\n  7010: \"开箱检查及仓储\",\n  7020: \"安装起吊设备\",\n  7030: \"安装前的检查工作\",\n  7040: \"安装底坑部件\",\n  7050: \"安装轿厢部件\",\n  7060: \"安装导轨、支架\",\n  7070: \"安装顶部部件及曳引机检查\",\n  7080: \"安装曳引媒介\",\n  7090: \"安装轿门地坎和厅门\",\n  \"70A0\": \"井道和地坑接线\",\n  \"70B0\": \"轿厢竣工检查\",\n  \"70C0\": \"调试前最终任务检查\",\n  \"70D0\": \"调试\",\n  7600: \"配合SAIS检查\"\n};\nexport const nineStepsToFourteen = data => {\n  if (Object.keys(data).length === 0) {\n    return data;\n  }\n\n  const orders = new Set(Object.values(data.installations).map(v => {\n    return v.orderNumber;\n  }));\n  orders.forEach(order => {\n    // check 9 step\n    if (data.installations[order + \"-7080\"] && !data.installations[order + \"-7090\"]) {\n      // 7600 -> 7600\n      data.installations[order + \"-7600\"] = {\n        orderNumber: order,\n        stepNumber: \"7600\",\n        description: stepDescription[\"7600\"]\n      }; // 7080 -> 70C0 & 70D0\n\n      data.installations[order + \"-70C0\"] = {\n        orderNumber: order,\n        stepNumber: \"70C0\",\n        description: stepDescription[\"70C0\"]\n      };\n      data.installations[order + \"-70D0\"] = {\n        orderNumber: order,\n        stepNumber: \"70D0\",\n        description: stepDescription[\"70D0\"]\n      }; // 7070 -> 70B0\n\n      data.installations[order + \"-70B0\"] = {\n        orderNumber: order,\n        stepNumber: \"70B0\",\n        description: stepDescription[\"70B0\"]\n      }; // 7060 -> 70A0\n\n      data.installations[order + \"-70A0\"] = {\n        orderNumber: order,\n        stepNumber: \"70A0\",\n        description: stepDescription[\"70A0\"]\n      }; // 7050 -> 7080 & 7090\n\n      data.installations[order + \"-7080\"] = {\n        orderNumber: order,\n        stepNumber: \"7080\",\n        description: stepDescription[\"7080\"]\n      };\n      data.installations[order + \"-7090\"] = {\n        orderNumber: order,\n        stepNumber: \"7090\",\n        description: stepDescription[\"7090\"]\n      };\n      data.installations[order + \"-7070\"] = {\n        orderNumber: order,\n        stepNumber: \"7070\",\n        description: stepDescription[\"7070\"]\n      }; // 7030 -> 7040 & 7050 & 7060\n\n      data.installations[order + \"-7040\"] = {\n        orderNumber: order,\n        stepNumber: \"7040\",\n        description: stepDescription[\"7040\"]\n      };\n      data.installations[order + \"-7050\"] = {\n        orderNumber: order,\n        stepNumber: \"7050\",\n        description: stepDescription[\"7050\"]\n      };\n      data.installations[order + \"-7060\"] = {\n        orderNumber: order,\n        stepNumber: \"7060\",\n        description: stepDescription[\"7060\"]\n      }; // 7020 -> 7030\n\n      data.installations[order + \"-7030\"] = {\n        orderNumber: order,\n        stepNumber: \"7030\",\n        description: stepDescription[\"7030\"]\n      }; // 7010 -> 7010 & 7020\n\n      data.installations[order + \"-7010\"] = {\n        orderNumber: order,\n        stepNumber: \"7010\",\n        description: stepDescription[\"7010\"]\n      };\n      data.installations[order + \"-7020\"] = {\n        orderNumber: order,\n        stepNumber: \"7020\",\n        description: stepDescription[\"7020\"]\n      };\n      updateActivitiesData(data, order);\n    }\n  });\n  return data;\n};\nexport const activityStatusSetNineStepsToFourteen = data => {\n  if (Object.keys(data).length === 0) {\n    return data;\n  }\n\n  const orders = new Set(Object.values(data.orderActivities).map(v => {\n    return v.orderNumber;\n  }));\n  orders.forEach(order => {\n    if (data.orderActivities[order + \"-7080\"] && !data.orderActivities[order + \"-7090\"]) {\n      updateActivitiesData(data, order);\n    }\n  });\n  return data;\n};\n\nconst updateActivitiesData = (data, order) => {\n  // 7600 -> 7600\n  data.orderActivities[order + \"-7600\"].originalStep = \"7600\";\n  data.orderActivities[order + \"-7600\"].editable = true; // 7080 -> 70D0\n\n  const activity7080 = data.orderActivities[order + \"-7080\"];\n  data.orderActivities[order + \"-70D0\"] = { ...activity7080\n  };\n  data.orderActivities[order + \"-70D0\"].activityNumber = \"70D0\";\n  data.orderActivities[order + \"-70D0\"].originalStep = \"7080\";\n  data.orderActivities[order + \"-70D0\"].editable = true;\n  data.orderActivities[order + \"-70D0\"].sort = 253; // 7070 -> 70C0\n\n  const activity7070 = data.orderActivities[order + \"-7070\"];\n  data.orderActivities[order + \"-70C0\"] = { ...activity7070\n  };\n  data.orderActivities[order + \"-70C0\"].activityNumber = \"70C0\";\n  data.orderActivities[order + \"-70C0\"].originalStep = \"7070\";\n  data.orderActivities[order + \"-70C0\"].editable = true;\n  data.orderActivities[order + \"-70C0\"].sort = 252; // 7060 -> 70A0 & 70B0\n\n  const activity7060 = data.orderActivities[order + \"-7060\"];\n  data.orderActivities[order + \"-70A0\"] = { ...activity7060\n  };\n  data.orderActivities[order + \"-70A0\"].activityNumber = \"70A0\";\n  data.orderActivities[order + \"-70A0\"].confirmedDate = null;\n  data.orderActivities[order + \"-70A0\"].sort = 250;\n  data.orderActivities[order + \"-70B0\"] = { ...activity7060\n  };\n  data.orderActivities[order + \"-70B0\"].activityNumber = \"70B0\";\n  data.orderActivities[order + \"-70B0\"].originalStep = \"7060\";\n  data.orderActivities[order + \"-70B0\"].editable = true;\n  data.orderActivities[order + \"-70B0\"].sort = 251; // 7050 -> 7080 & 7090\n\n  const activity7050 = data.orderActivities[order + \"-7050\"];\n  data.orderActivities[order + \"-7080\"] = { ...activity7050\n  };\n  data.orderActivities[order + \"-7080\"].activityNumber = \"7080\";\n  data.orderActivities[order + \"-7080\"].confirmedDate = null;\n  data.orderActivities[order + \"-7080\"].sort = 248;\n  data.orderActivities[order + \"-7090\"] = { ...activity7050\n  };\n  data.orderActivities[order + \"-7090\"].activityNumber = \"7090\";\n  data.orderActivities[order + \"-7090\"].originalStep = \"7050\";\n  data.orderActivities[order + \"-7090\"].editable = true;\n  data.orderActivities[order + \"-7090\"].sort = 249; // 7040 -> 7070\n\n  const activity7040 = data.orderActivities[order + \"-7040\"];\n  data.orderActivities[order + \"-7070\"] = { ...activity7040\n  };\n  data.orderActivities[order + \"-7070\"].activityNumber = \"7070\";\n  data.orderActivities[order + \"-7070\"].originalStep = \"7040\";\n  data.orderActivities[order + \"-7070\"].editable = true;\n  data.orderActivities[order + \"-7070\"].sort = 247; // 7030 -> 7040 & 7050 & 7060\n\n  const activity7030 = data.orderActivities[order + \"-7030\"];\n  data.orderActivities[order + \"-7040\"] = { ...activity7030\n  };\n  data.orderActivities[order + \"-7040\"].activityNumber = \"7040\";\n  data.orderActivities[order + \"-7040\"].confirmedDate = null;\n  data.orderActivities[order + \"-7040\"].sort = 244;\n  data.orderActivities[order + \"-7050\"] = { ...activity7030\n  };\n  data.orderActivities[order + \"-7050\"].activityNumber = \"7050\";\n  data.orderActivities[order + \"-7050\"].confirmedDate = null;\n  data.orderActivities[order + \"-7050\"].sort = 245;\n  data.orderActivities[order + \"-7060\"] = { ...activity7030\n  };\n  data.orderActivities[order + \"-7060\"].activityNumber = \"7060\";\n  data.orderActivities[order + \"-7060\"].originalStep = \"7030\";\n  data.orderActivities[order + \"-7060\"].editable = true;\n  data.orderActivities[order + \"-7060\"].sort = 246; // 7020 -> 7030\n\n  const activity7020 = data.orderActivities[order + \"-7020\"];\n  data.orderActivities[order + \"-7030\"] = { ...activity7020\n  };\n  data.orderActivities[order + \"-7030\"].activityNumber = \"7030\";\n  data.orderActivities[order + \"-7030\"].originalStep = \"7020\";\n  data.orderActivities[order + \"-7030\"].editable = true;\n  data.orderActivities[order + \"-7030\"].sort = 243; // 7010 -> 7010 & 7020\n\n  const activity7010 = data.orderActivities[order + \"-7010\"];\n  data.orderActivities[order + \"-7010\"] = { ...activity7010\n  };\n  data.orderActivities[order + \"-7010\"].activityNumber = \"7010\";\n  data.orderActivities[order + \"-7010\"].confirmedDate = null;\n  data.orderActivities[order + \"-7010\"].sort = 241;\n  data.orderActivities[order + \"-7020\"] = { ...activity7010\n  };\n  data.orderActivities[order + \"-7020\"].activityNumber = \"7020\";\n  data.orderActivities[order + \"-7020\"].originalStep = \"7010\";\n  data.orderActivities[order + \"-7020\"].editable = true;\n  data.orderActivities[order + \"-7020\"].sort = 242;\n};\n\nexport const addActivityStepEditable = data => {\n  if (Object.keys(data).length === 0) {\n    return data;\n  }\n\n  const orders = new Set(Object.values(data.orderActivities).map(v => {\n    return v.orderNumber;\n  }));\n  orders.forEach(order => {\n    if (data.orderActivities[order + \"-7080\"] && !data.orderActivities[order + \"-7090\"]) {\n      // 9 steps\n      const steps9 = [\"7010\", \"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7600\"];\n      steps9.forEach(r => {\n        if (Object.keys(data.orderActivities).indexOf(order + '-' + r) < 0) {\n          alert(\"订单\" + order + \"缺少步骤\" + r + \"的配置信息。\");\n        }\n      });\n      steps9.forEach(step => {\n        data.orderActivities[order + \"-\" + step].editable = false;\n      });\n    } else if (data.orderActivities[order + \"-7020\"] && !data.orderActivities[order + \"-7030\"]) {\n      // 3 steps\n      const steps3 = [\"7010\", \"7020\", \"7600\"];\n      steps3.forEach(r => {\n        if (Object.keys(data.orderActivities).indexOf(order + '-' + r) < 0) {\n          alert(\"订单\" + order + \"缺少步骤\" + r + \"的配置信息。\");\n        }\n      });\n      steps3.forEach(step => {\n        data.orderActivities[order + \"-\" + step].editable = true;\n      });\n    } else if (data.orderActivities[order + \"-7010\"] && data.orderActivities[order + \"-7020\"] && data.orderActivities[order + \"-7030\"] && data.orderActivities[order + \"-7040\"] && data.orderActivities[order + \"-7050\"] && data.orderActivities[order + \"-7060\"] && data.orderActivities[order + \"-7070\"] && data.orderActivities[order + \"-7080\"] && data.orderActivities[order + \"-7090\"] && data.orderActivities[order + \"-70A0\"] && data.orderActivities[order + \"-70B0\"] && data.orderActivities[order + \"-70C0\"] && data.orderActivities[order + \"-70D0\"] && data.orderActivities[order + \"-7600\"]) {\n      // 14 steps\n      const steps14 = [\"7010\", \"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\", \"7600\"];\n      steps14.forEach(r => {\n        if (Object.keys(data.orderActivities).indexOf(order + '-' + r) < 0) {\n          alert(\"订单\" + order + \"缺少步骤\" + r + \"的配置信息。\");\n        }\n      });\n      steps14.forEach(step => {\n        data.orderActivities[order + \"-\" + step].editable = true;\n      });\n    }\n  });\n  return data;\n};\nexport const updateInstallationStepDesc = data => {\n  data.activities[\"7010\"].descriptionShort3 = data.activities[\"7010\"].descriptionShort;\n  data.activities[\"7010\"].descriptionShort14 = stepDescription[\"7010\"];\n  data.activities[\"7020\"].descriptionShort3 = data.activities[\"7020\"].descriptionShort;\n  data.activities[\"7020\"].descriptionShort14 = stepDescription[\"7020\"];\n  const steps = [\"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\", \"7600\"];\n  steps.forEach(step => {\n    if (!data.activities[step]) {\n      data.activities[step] = {\n        number: step\n      };\n    }\n  });\n  data.activities[\"7030\"].descriptionShort = stepDescription[\"7030\"];\n  data.activities[\"7030\"].sort = 243;\n  data.activities[\"7040\"].descriptionShort = stepDescription[\"7040\"];\n  data.activities[\"7040\"].sort = 244;\n  data.activities[\"7050\"].descriptionShort = stepDescription[\"7050\"];\n  data.activities[\"7050\"].sort = 245;\n  data.activities[\"7060\"].descriptionShort = stepDescription[\"7060\"];\n  data.activities[\"7060\"].sort = 246;\n  data.activities[\"7070\"].descriptionShort = stepDescription[\"7070\"];\n  data.activities[\"7070\"].sort = 247;\n  data.activities[\"7080\"].descriptionShort = stepDescription[\"7080\"];\n  data.activities[\"7080\"].sort = 248;\n  data.activities[\"7090\"].descriptionShort = stepDescription[\"7090\"];\n  data.activities[\"7090\"].sort = 249;\n  data.activities[\"70A0\"].descriptionShort = stepDescription[\"70A0\"];\n  data.activities[\"70A0\"].sort = 250;\n  data.activities[\"70B0\"].descriptionShort = stepDescription[\"70B0\"];\n  data.activities[\"70B0\"].sort = 251;\n  data.activities[\"70C0\"].descriptionShort = stepDescription[\"70C0\"];\n  data.activities[\"70C0\"].sort = 252;\n  data.activities[\"70D0\"].descriptionShort = stepDescription[\"70D0\"];\n  data.activities[\"70D0\"].sort = 253;\n  data.activities[\"7600\"].descriptionShort = stepDescription[\"7600\"];\n  data.activities[\"7600\"].sort = 278;\n  return data;\n};\nexport const isInstallationStep = activityNo => {\n  const steps = [\"7010\", \"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\", \"7600\"];\n  return steps.includes(activityNo);\n};","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/js/installationStep.js"],"names":["stepDescription","nineStepsToFourteen","data","Object","keys","length","orders","Set","values","installations","map","v","orderNumber","forEach","order","stepNumber","description","updateActivitiesData","activityStatusSetNineStepsToFourteen","orderActivities","originalStep","editable","activity7080","activityNumber","sort","activity7070","activity7060","confirmedDate","activity7050","activity7040","activity7030","activity7020","activity7010","addActivityStepEditable","steps9","r","indexOf","alert","step","steps3","steps14","updateInstallationStepDesc","activities","descriptionShort3","descriptionShort","descriptionShort14","steps","number","isInstallationStep","activityNo","includes"],"mappings":"AAAA,OAAO,MAAMA,eAAe,GAAG;AAC7B,QAAM,SADuB;AAE7B,QAAM,QAFuB;AAG7B,QAAM,UAHuB;AAI7B,QAAM,QAJuB;AAK7B,QAAM,QALuB;AAM7B,QAAM,SANuB;AAO7B,QAAM,cAPuB;AAQ7B,QAAM,QARuB;AAS7B,QAAM,WATuB;AAU7B,UAAQ,SAVqB;AAW7B,UAAQ,QAXqB;AAY7B,UAAQ,WAZqB;AAa7B,UAAQ,IAbqB;AAc7B,QAAM;AAduB,CAAxB;AAiBP,OAAO,MAAMC,mBAAmB,GAAIC,IAAD,IAAU;AAC3C,MAAIC,MAAM,CAACC,IAAP,CAAYF,IAAZ,EAAkBG,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,WAAOH,IAAP;AACD;;AACD,QAAMI,MAAM,GAAG,IAAIC,GAAJ,CACbJ,MAAM,CAACK,MAAP,CAAcN,IAAI,CAACO,aAAnB,EAAkCC,GAAlC,CAAuCC,CAAD,IAAO;AAC3C,WAAOA,CAAC,CAACC,WAAT;AACD,GAFD,CADa,CAAf;AAKAN,EAAAA,MAAM,CAACO,OAAP,CAAgBC,KAAD,IAAW;AACxB;AACA,QACEZ,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,KACA,CAACZ,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,CAFH,EAGE;AACA;AACAZ,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC,CAFA,CAQA;;AACAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC;AAKAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC,CAdA,CAoBA;;AACAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC,CArBA,CA2BA;;AACAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC,CA5BA,CAkCA;;AACAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC;AAKAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC;AAMAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC,CA9CA,CAoDA;;AACAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC;AAKAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC;AAKAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC,CA/DA,CAqEA;;AACAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC,CAtEA,CA4EA;;AACAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC;AAKAE,MAAAA,IAAI,CAACO,aAAL,CAAmBK,KAAK,GAAG,OAA3B,IAAsC;AACpCF,QAAAA,WAAW,EAAEE,KADuB;AAEpCC,QAAAA,UAAU,EAAE,MAFwB;AAGpCC,QAAAA,WAAW,EAAEhB,eAAe,CAAC,MAAD;AAHQ,OAAtC;AAMAiB,MAAAA,oBAAoB,CAACf,IAAD,EAAOY,KAAP,CAApB;AACD;AACF,GA/FD;AAiGA,SAAOZ,IAAP;AACD,CA3GM;AA6GP,OAAO,MAAMgB,oCAAoC,GAAIhB,IAAD,IAAU;AAC5D,MAAIC,MAAM,CAACC,IAAP,CAAYF,IAAZ,EAAkBG,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,WAAOH,IAAP;AACD;;AACD,QAAMI,MAAM,GAAG,IAAIC,GAAJ,CACbJ,MAAM,CAACK,MAAP,CAAcN,IAAI,CAACiB,eAAnB,EAAoCT,GAApC,CAAyCC,CAAD,IAAO;AAC7C,WAAOA,CAAC,CAACC,WAAT;AACD,GAFD,CADa,CAAf;AAMAN,EAAAA,MAAM,CAACO,OAAP,CAAgBC,KAAD,IAAW;AACxB,QACEZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,KACA,CAACZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAFH,EAGE;AACAG,MAAAA,oBAAoB,CAACf,IAAD,EAAOY,KAAP,CAApB;AACD;AACF,GAPD;AASA,SAAOZ,IAAP;AACD,CApBM;;AAsBP,MAAMe,oBAAoB,GAAG,CAACf,IAAD,EAAOY,KAAP,KAAiB;AAC5C;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD,CAH4C,CAK5C;;AACA,QAAMC,YAAY,GAAGpB,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGQ;AAAL,GAAxC;AACApB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C,CAX4C,CAa5C;;AACA,QAAMC,YAAY,GAAGvB,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGW;AAAL,GAAxC;AACAvB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C,CAnB4C,CAqB5C;;AACA,QAAME,YAAY,GAAGxB,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGY;AAAL,GAAxC;AACAxB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCa,aAAtC,GAAsD,IAAtD;AACAzB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C;AACAtB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGY;AAAL,GAAxC;AACAxB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C,CA/B4C,CAiC5C;;AACA,QAAMI,YAAY,GAAG1B,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGc;AAAL,GAAxC;AACA1B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCa,aAAtC,GAAsD,IAAtD;AACAzB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C;AACAtB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGc;AAAL,GAAxC;AACA1B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C,CA3C4C,CA6C5C;;AACA,QAAMK,YAAY,GAAG3B,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGe;AAAL,GAAxC;AACA3B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C,CAnD4C,CAqD5C;;AACA,QAAMM,YAAY,GAAG5B,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGgB;AAAL,GAAxC;AACA5B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCa,aAAtC,GAAsD,IAAtD;AACAzB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C;AACAtB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGgB;AAAL,GAAxC;AACA5B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCa,aAAtC,GAAsD,IAAtD;AACAzB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C;AACAtB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGgB;AAAL,GAAxC;AACA5B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C,CAnE4C,CAqE5C;;AACA,QAAMO,YAAY,GAAG7B,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGiB;AAAL,GAAxC;AACA7B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C,CA3E4C,CA6E5C;;AACA,QAAMQ,YAAY,GAAG9B,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAArB;AACAZ,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGkB;AAAL,GAAxC;AACA9B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCa,aAAtC,GAAsD,IAAtD;AACAzB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C;AACAtB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,IAAwC,EAAE,GAAGkB;AAAL,GAAxC;AACA9B,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCS,cAAtC,GAAuD,MAAvD;AACArB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCM,YAAtC,GAAqD,MAArD;AACAlB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCO,QAAtC,GAAiD,IAAjD;AACAnB,EAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,EAAsCU,IAAtC,GAA6C,GAA7C;AACD,CAxFD;;AA0FA,OAAO,MAAMS,uBAAuB,GAAI/B,IAAD,IAAU;AAC/C,MAAIC,MAAM,CAACC,IAAP,CAAYF,IAAZ,EAAkBG,MAAlB,KAA6B,CAAjC,EAAoC;AAClC,WAAOH,IAAP;AACD;;AACD,QAAMI,MAAM,GAAG,IAAIC,GAAJ,CACbJ,MAAM,CAACK,MAAP,CAAcN,IAAI,CAACiB,eAAnB,EAAoCT,GAApC,CAAyCC,CAAD,IAAO;AAC7C,WAAOA,CAAC,CAACC,WAAT;AACD,GAFD,CADa,CAAf;AAMAN,EAAAA,MAAM,CAACO,OAAP,CAAgBC,KAAD,IAAW;AACxB,QACEZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,KACA,CAACZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAFH,EAGE;AACA;AACA,YAAMoB,MAAM,GAAG,CACb,MADa,EAEb,MAFa,EAGb,MAHa,EAIb,MAJa,EAKb,MALa,EAMb,MANa,EAOb,MAPa,EAQb,MARa,EASb,MATa,CAAf;AAWAA,MAAAA,MAAM,CAACrB,OAAP,CAAesB,CAAC,IAAE;AAChB,YAAGhC,MAAM,CAACC,IAAP,CAAYF,IAAI,CAACiB,eAAjB,EAAkCiB,OAAlC,CAA0CtB,KAAK,GAAC,GAAN,GAAUqB,CAApD,IAAuD,CAA1D,EAA4D;AAC1DE,UAAAA,KAAK,CAAC,OAAKvB,KAAL,GAAW,MAAX,GAAkBqB,CAAlB,GAAoB,QAArB,CAAL;AACD;AACF,OAJD;AAKAD,MAAAA,MAAM,CAACrB,OAAP,CAAgByB,IAAD,IAAU;AACvBpC,QAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,GAAR,GAAcwB,IAAnC,EAAyCjB,QAAzC,GAAoD,KAApD;AACD,OAFD;AAGD,KAxBD,MAwBO,IACLnB,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,KACA,CAACZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAFI,EAGL;AACA;AACA,YAAMyB,MAAM,GAAG,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,CAAf;AACAA,MAAAA,MAAM,CAAC1B,OAAP,CAAesB,CAAC,IAAE;AAChB,YAAGhC,MAAM,CAACC,IAAP,CAAYF,IAAI,CAACiB,eAAjB,EAAkCiB,OAAlC,CAA0CtB,KAAK,GAAC,GAAN,GAAUqB,CAApD,IAAuD,CAA1D,EAA4D;AAC1DE,UAAAA,KAAK,CAAC,OAAKvB,KAAL,GAAW,MAAX,GAAkBqB,CAAlB,GAAoB,QAArB,CAAL;AACD;AACF,OAJD;AAKAI,MAAAA,MAAM,CAAC1B,OAAP,CAAgByB,IAAD,IAAU;AACvBpC,QAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,GAAR,GAAcwB,IAAnC,EAAyCjB,QAAzC,GAAoD,IAApD;AACD,OAFD;AAGD,KAdM,MAcA,IACLnB,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,KACAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CADA,IAEAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAFA,IAGAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAHA,IAIAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAJA,IAKAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CALA,IAMAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CANA,IAOAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAPA,IAQAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CARA,IASAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CATA,IAUAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAVA,IAWAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAXA,IAYAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAZA,IAaAZ,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,OAA7B,CAdK,EAeL;AACA;AACA,YAAM0B,OAAO,GAAG,CACd,MADc,EAEd,MAFc,EAGd,MAHc,EAId,MAJc,EAKd,MALc,EAMd,MANc,EAOd,MAPc,EAQd,MARc,EASd,MATc,EAUd,MAVc,EAWd,MAXc,EAYd,MAZc,EAad,MAbc,EAcd,MAdc,CAAhB;AAgBAA,MAAAA,OAAO,CAAC3B,OAAR,CAAgBsB,CAAC,IAAE;AACjB,YAAGhC,MAAM,CAACC,IAAP,CAAYF,IAAI,CAACiB,eAAjB,EAAkCiB,OAAlC,CAA0CtB,KAAK,GAAC,GAAN,GAAUqB,CAApD,IAAuD,CAA1D,EAA4D;AAC1DE,UAAAA,KAAK,CAAC,OAAKvB,KAAL,GAAW,MAAX,GAAkBqB,CAAlB,GAAoB,QAArB,CAAL;AACD;AACF,OAJD;AAKAK,MAAAA,OAAO,CAAC3B,OAAR,CAAiByB,IAAD,IAAU;AACxBpC,QAAAA,IAAI,CAACiB,eAAL,CAAqBL,KAAK,GAAG,GAAR,GAAcwB,IAAnC,EAAyCjB,QAAzC,GAAoD,IAApD;AACD,OAFD;AAGD;AACF,GAjFD;AAmFA,SAAOnB,IAAP;AACD,CA9FM;AAgGP,OAAO,MAAMuC,0BAA0B,GAAIvC,IAAD,IAAU;AAClDA,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBC,iBAAxB,GACEzC,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAD1B;AAEA1C,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBG,kBAAxB,GAA6C7C,eAAe,CAAC,MAAD,CAA5D;AAEAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBC,iBAAxB,GACEzC,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAD1B;AAEA1C,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBG,kBAAxB,GAA6C7C,eAAe,CAAC,MAAD,CAA5D;AAEA,QAAM8C,KAAK,GAAG,CACZ,MADY,EAEZ,MAFY,EAGZ,MAHY,EAIZ,MAJY,EAKZ,MALY,EAMZ,MANY,EAOZ,MAPY,EAQZ,MARY,EASZ,MATY,EAUZ,MAVY,EAWZ,MAXY,EAYZ,MAZY,CAAd;AAeAA,EAAAA,KAAK,CAACjC,OAAN,CAAeyB,IAAD,IAAU;AACtB,QAAI,CAACpC,IAAI,CAACwC,UAAL,CAAgBJ,IAAhB,CAAL,EAA4B;AAC1BpC,MAAAA,IAAI,CAACwC,UAAL,CAAgBJ,IAAhB,IAAwB;AAAES,QAAAA,MAAM,EAAET;AAAV,OAAxB;AACD;AACF,GAJD;AAMApC,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AACAtB,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBE,gBAAxB,GAA2C5C,eAAe,CAAC,MAAD,CAA1D;AACAE,EAAAA,IAAI,CAACwC,UAAL,CAAgB,MAAhB,EAAwBlB,IAAxB,GAA+B,GAA/B;AAEA,SAAOtB,IAAP;AACD,CAxDM;AA0DP,OAAO,MAAM8C,kBAAkB,GAAIC,UAAD,IAAgB;AAChD,QAAMH,KAAK,GAAG,CACZ,MADY,EAEZ,MAFY,EAGZ,MAHY,EAIZ,MAJY,EAKZ,MALY,EAMZ,MANY,EAOZ,MAPY,EAQZ,MARY,EASZ,MATY,EAUZ,MAVY,EAWZ,MAXY,EAYZ,MAZY,EAaZ,MAbY,EAcZ,MAdY,CAAd;AAiBA,SAAOA,KAAK,CAACI,QAAN,CAAeD,UAAf,CAAP;AACD,CAnBM","sourcesContent":["export const stepDescription = {\r\n  7010: \"开箱检查及仓储\",\r\n  7020: \"安装起吊设备\",\r\n  7030: \"安装前的检查工作\",\r\n  7040: \"安装底坑部件\",\r\n  7050: \"安装轿厢部件\",\r\n  7060: \"安装导轨、支架\",\r\n  7070: \"安装顶部部件及曳引机检查\",\r\n  7080: \"安装曳引媒介\",\r\n  7090: \"安装轿门地坎和厅门\",\r\n  \"70A0\": \"井道和地坑接线\",\r\n  \"70B0\": \"轿厢竣工检查\",\r\n  \"70C0\": \"调试前最终任务检查\",\r\n  \"70D0\": \"调试\",\r\n  7600: \"配合SAIS检查\",\r\n};\r\n\r\nexport const nineStepsToFourteen = (data) => {\r\n  if (Object.keys(data).length === 0) {\r\n    return data;\r\n  }\r\n  const orders = new Set(\r\n    Object.values(data.installations).map((v) => {\r\n      return v.orderNumber;\r\n    })\r\n  );\r\n  orders.forEach((order) => {\r\n    // check 9 step\r\n    if (\r\n      data.installations[order + \"-7080\"] &&\r\n      !data.installations[order + \"-7090\"]\r\n    ) {\r\n      // 7600 -> 7600\r\n      data.installations[order + \"-7600\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7600\",\r\n        description: stepDescription[\"7600\"],\r\n      };\r\n\r\n      // 7080 -> 70C0 & 70D0\r\n      data.installations[order + \"-70C0\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"70C0\",\r\n        description: stepDescription[\"70C0\"],\r\n      };\r\n      data.installations[order + \"-70D0\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"70D0\",\r\n        description: stepDescription[\"70D0\"],\r\n      };\r\n\r\n      // 7070 -> 70B0\r\n      data.installations[order + \"-70B0\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"70B0\",\r\n        description: stepDescription[\"70B0\"],\r\n      };\r\n\r\n      // 7060 -> 70A0\r\n      data.installations[order + \"-70A0\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"70A0\",\r\n        description: stepDescription[\"70A0\"],\r\n      };\r\n\r\n      // 7050 -> 7080 & 7090\r\n      data.installations[order + \"-7080\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7080\",\r\n        description: stepDescription[\"7080\"],\r\n      };\r\n      data.installations[order + \"-7090\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7090\",\r\n        description: stepDescription[\"7090\"],\r\n      };\r\n\r\n      data.installations[order + \"-7070\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7070\",\r\n        description: stepDescription[\"7070\"],\r\n      };\r\n\r\n      // 7030 -> 7040 & 7050 & 7060\r\n      data.installations[order + \"-7040\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7040\",\r\n        description: stepDescription[\"7040\"],\r\n      };\r\n      data.installations[order + \"-7050\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7050\",\r\n        description: stepDescription[\"7050\"],\r\n      };\r\n      data.installations[order + \"-7060\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7060\",\r\n        description: stepDescription[\"7060\"],\r\n      };\r\n\r\n      // 7020 -> 7030\r\n      data.installations[order + \"-7030\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7030\",\r\n        description: stepDescription[\"7030\"],\r\n      };\r\n\r\n      // 7010 -> 7010 & 7020\r\n      data.installations[order + \"-7010\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7010\",\r\n        description: stepDescription[\"7010\"],\r\n      };\r\n      data.installations[order + \"-7020\"] = {\r\n        orderNumber: order,\r\n        stepNumber: \"7020\",\r\n        description: stepDescription[\"7020\"],\r\n      };\r\n\r\n      updateActivitiesData(data, order);\r\n    }\r\n  });\r\n\r\n  return data;\r\n};\r\n\r\nexport const activityStatusSetNineStepsToFourteen = (data) => {\r\n  if (Object.keys(data).length === 0) {\r\n    return data;\r\n  }\r\n  const orders = new Set(\r\n    Object.values(data.orderActivities).map((v) => {\r\n      return v.orderNumber;\r\n    })\r\n  );\r\n\r\n  orders.forEach((order) => {\r\n    if (\r\n      data.orderActivities[order + \"-7080\"] &&\r\n      !data.orderActivities[order + \"-7090\"]\r\n    ) {\r\n      updateActivitiesData(data, order);\r\n    }\r\n  });\r\n\r\n  return data;\r\n};\r\n\r\nconst updateActivitiesData = (data, order) => {\r\n  // 7600 -> 7600\r\n  data.orderActivities[order + \"-7600\"].originalStep = \"7600\";\r\n  data.orderActivities[order + \"-7600\"].editable = true;\r\n\r\n  // 7080 -> 70D0\r\n  const activity7080 = data.orderActivities[order + \"-7080\"];\r\n  data.orderActivities[order + \"-70D0\"] = { ...activity7080 };\r\n  data.orderActivities[order + \"-70D0\"].activityNumber = \"70D0\";\r\n  data.orderActivities[order + \"-70D0\"].originalStep = \"7080\";\r\n  data.orderActivities[order + \"-70D0\"].editable = true;\r\n  data.orderActivities[order + \"-70D0\"].sort = 253;\r\n\r\n  // 7070 -> 70C0\r\n  const activity7070 = data.orderActivities[order + \"-7070\"];\r\n  data.orderActivities[order + \"-70C0\"] = { ...activity7070 };\r\n  data.orderActivities[order + \"-70C0\"].activityNumber = \"70C0\";\r\n  data.orderActivities[order + \"-70C0\"].originalStep = \"7070\";\r\n  data.orderActivities[order + \"-70C0\"].editable = true;\r\n  data.orderActivities[order + \"-70C0\"].sort = 252;\r\n\r\n  // 7060 -> 70A0 & 70B0\r\n  const activity7060 = data.orderActivities[order + \"-7060\"];\r\n  data.orderActivities[order + \"-70A0\"] = { ...activity7060 };\r\n  data.orderActivities[order + \"-70A0\"].activityNumber = \"70A0\";\r\n  data.orderActivities[order + \"-70A0\"].confirmedDate = null;\r\n  data.orderActivities[order + \"-70A0\"].sort = 250;\r\n  data.orderActivities[order + \"-70B0\"] = { ...activity7060 };\r\n  data.orderActivities[order + \"-70B0\"].activityNumber = \"70B0\";\r\n  data.orderActivities[order + \"-70B0\"].originalStep = \"7060\";\r\n  data.orderActivities[order + \"-70B0\"].editable = true;\r\n  data.orderActivities[order + \"-70B0\"].sort = 251;\r\n\r\n  // 7050 -> 7080 & 7090\r\n  const activity7050 = data.orderActivities[order + \"-7050\"];\r\n  data.orderActivities[order + \"-7080\"] = { ...activity7050 };\r\n  data.orderActivities[order + \"-7080\"].activityNumber = \"7080\";\r\n  data.orderActivities[order + \"-7080\"].confirmedDate = null;\r\n  data.orderActivities[order + \"-7080\"].sort = 248;\r\n  data.orderActivities[order + \"-7090\"] = { ...activity7050 };\r\n  data.orderActivities[order + \"-7090\"].activityNumber = \"7090\";\r\n  data.orderActivities[order + \"-7090\"].originalStep = \"7050\";\r\n  data.orderActivities[order + \"-7090\"].editable = true;\r\n  data.orderActivities[order + \"-7090\"].sort = 249;\r\n\r\n  // 7040 -> 7070\r\n  const activity7040 = data.orderActivities[order + \"-7040\"];\r\n  data.orderActivities[order + \"-7070\"] = { ...activity7040 };\r\n  data.orderActivities[order + \"-7070\"].activityNumber = \"7070\";\r\n  data.orderActivities[order + \"-7070\"].originalStep = \"7040\";\r\n  data.orderActivities[order + \"-7070\"].editable = true;\r\n  data.orderActivities[order + \"-7070\"].sort = 247;\r\n\r\n  // 7030 -> 7040 & 7050 & 7060\r\n  const activity7030 = data.orderActivities[order + \"-7030\"];\r\n  data.orderActivities[order + \"-7040\"] = { ...activity7030 };\r\n  data.orderActivities[order + \"-7040\"].activityNumber = \"7040\";\r\n  data.orderActivities[order + \"-7040\"].confirmedDate = null;\r\n  data.orderActivities[order + \"-7040\"].sort = 244;\r\n  data.orderActivities[order + \"-7050\"] = { ...activity7030 };\r\n  data.orderActivities[order + \"-7050\"].activityNumber = \"7050\";\r\n  data.orderActivities[order + \"-7050\"].confirmedDate = null;\r\n  data.orderActivities[order + \"-7050\"].sort = 245;\r\n  data.orderActivities[order + \"-7060\"] = { ...activity7030 };\r\n  data.orderActivities[order + \"-7060\"].activityNumber = \"7060\";\r\n  data.orderActivities[order + \"-7060\"].originalStep = \"7030\";\r\n  data.orderActivities[order + \"-7060\"].editable = true;\r\n  data.orderActivities[order + \"-7060\"].sort = 246;\r\n\r\n  // 7020 -> 7030\r\n  const activity7020 = data.orderActivities[order + \"-7020\"];\r\n  data.orderActivities[order + \"-7030\"] = { ...activity7020 };\r\n  data.orderActivities[order + \"-7030\"].activityNumber = \"7030\";\r\n  data.orderActivities[order + \"-7030\"].originalStep = \"7020\";\r\n  data.orderActivities[order + \"-7030\"].editable = true;\r\n  data.orderActivities[order + \"-7030\"].sort = 243;\r\n\r\n  // 7010 -> 7010 & 7020\r\n  const activity7010 = data.orderActivities[order + \"-7010\"];\r\n  data.orderActivities[order + \"-7010\"] = { ...activity7010 };\r\n  data.orderActivities[order + \"-7010\"].activityNumber = \"7010\";\r\n  data.orderActivities[order + \"-7010\"].confirmedDate = null;\r\n  data.orderActivities[order + \"-7010\"].sort = 241;\r\n  data.orderActivities[order + \"-7020\"] = { ...activity7010 };\r\n  data.orderActivities[order + \"-7020\"].activityNumber = \"7020\";\r\n  data.orderActivities[order + \"-7020\"].originalStep = \"7010\";\r\n  data.orderActivities[order + \"-7020\"].editable = true;\r\n  data.orderActivities[order + \"-7020\"].sort = 242;\r\n};\r\n\r\nexport const addActivityStepEditable = (data) => {\r\n  if (Object.keys(data).length === 0) {\r\n    return data;\r\n  }\r\n  const orders = new Set(\r\n    Object.values(data.orderActivities).map((v) => {\r\n      return v.orderNumber;\r\n    })\r\n  );\r\n\r\n  orders.forEach((order) => {\r\n    if (\r\n      data.orderActivities[order + \"-7080\"] &&\r\n      !data.orderActivities[order + \"-7090\"]\r\n    ) {\r\n      // 9 steps\r\n      const steps9 = [\r\n        \"7010\",\r\n        \"7020\",\r\n        \"7030\",\r\n        \"7040\",\r\n        \"7050\",\r\n        \"7060\",\r\n        \"7070\",\r\n        \"7080\",\r\n        \"7600\",\r\n      ];\r\n      steps9.forEach(r=>{\r\n        if(Object.keys(data.orderActivities).indexOf(order+'-'+r)<0){\r\n          alert(\"订单\"+order+\"缺少步骤\"+r+\"的配置信息。\");\r\n        }\r\n      })\r\n      steps9.forEach((step) => {\r\n        data.orderActivities[order + \"-\" + step].editable = false;\r\n      });\r\n    } else if (\r\n      data.orderActivities[order + \"-7020\"] &&\r\n      !data.orderActivities[order + \"-7030\"]\r\n    ) {\r\n      // 3 steps\r\n      const steps3 = [\"7010\", \"7020\", \"7600\"];\r\n      steps3.forEach(r=>{\r\n        if(Object.keys(data.orderActivities).indexOf(order+'-'+r)<0){\r\n          alert(\"订单\"+order+\"缺少步骤\"+r+\"的配置信息。\");\r\n        }\r\n      })\r\n      steps3.forEach((step) => {\r\n        data.orderActivities[order + \"-\" + step].editable = true;\r\n      });\r\n    } else if (\r\n      data.orderActivities[order + \"-7010\"] &&\r\n      data.orderActivities[order + \"-7020\"] &&\r\n      data.orderActivities[order + \"-7030\"] &&\r\n      data.orderActivities[order + \"-7040\"] &&\r\n      data.orderActivities[order + \"-7050\"] &&\r\n      data.orderActivities[order + \"-7060\"] &&\r\n      data.orderActivities[order + \"-7070\"] &&\r\n      data.orderActivities[order + \"-7080\"] &&\r\n      data.orderActivities[order + \"-7090\"] &&\r\n      data.orderActivities[order + \"-70A0\"] &&\r\n      data.orderActivities[order + \"-70B0\"] &&\r\n      data.orderActivities[order + \"-70C0\"] &&\r\n      data.orderActivities[order + \"-70D0\"] &&\r\n      data.orderActivities[order + \"-7600\"]\r\n    ) {\r\n      // 14 steps\r\n      const steps14 = [\r\n        \"7010\",\r\n        \"7020\",\r\n        \"7030\",\r\n        \"7040\",\r\n        \"7050\",\r\n        \"7060\",\r\n        \"7070\",\r\n        \"7080\",\r\n        \"7090\",\r\n        \"70A0\",\r\n        \"70B0\",\r\n        \"70C0\",\r\n        \"70D0\",\r\n        \"7600\",\r\n      ];\r\n      steps14.forEach(r=>{\r\n        if(Object.keys(data.orderActivities).indexOf(order+'-'+r)<0){\r\n          alert(\"订单\"+order+\"缺少步骤\"+r+\"的配置信息。\");\r\n        }\r\n      })\r\n      steps14.forEach((step) => {\r\n        data.orderActivities[order + \"-\" + step].editable = true;\r\n      });\r\n    }\r\n  });\r\n\r\n  return data;\r\n};\r\n\r\nexport const updateInstallationStepDesc = (data) => {\r\n  data.activities[\"7010\"].descriptionShort3 =\r\n    data.activities[\"7010\"].descriptionShort;\r\n  data.activities[\"7010\"].descriptionShort14 = stepDescription[\"7010\"];\r\n\r\n  data.activities[\"7020\"].descriptionShort3 =\r\n    data.activities[\"7020\"].descriptionShort;\r\n  data.activities[\"7020\"].descriptionShort14 = stepDescription[\"7020\"];\r\n\r\n  const steps = [\r\n    \"7030\",\r\n    \"7040\",\r\n    \"7050\",\r\n    \"7060\",\r\n    \"7070\",\r\n    \"7080\",\r\n    \"7090\",\r\n    \"70A0\",\r\n    \"70B0\",\r\n    \"70C0\",\r\n    \"70D0\",\r\n    \"7600\",\r\n  ];\r\n\r\n  steps.forEach((step) => {\r\n    if (!data.activities[step]) {\r\n      data.activities[step] = { number: step };\r\n    }\r\n  });\r\n\r\n  data.activities[\"7030\"].descriptionShort = stepDescription[\"7030\"];\r\n  data.activities[\"7030\"].sort = 243;\r\n  data.activities[\"7040\"].descriptionShort = stepDescription[\"7040\"];\r\n  data.activities[\"7040\"].sort = 244;\r\n  data.activities[\"7050\"].descriptionShort = stepDescription[\"7050\"];\r\n  data.activities[\"7050\"].sort = 245;\r\n  data.activities[\"7060\"].descriptionShort = stepDescription[\"7060\"];\r\n  data.activities[\"7060\"].sort = 246;\r\n  data.activities[\"7070\"].descriptionShort = stepDescription[\"7070\"];\r\n  data.activities[\"7070\"].sort = 247;\r\n  data.activities[\"7080\"].descriptionShort = stepDescription[\"7080\"];\r\n  data.activities[\"7080\"].sort = 248;\r\n  data.activities[\"7090\"].descriptionShort = stepDescription[\"7090\"];\r\n  data.activities[\"7090\"].sort = 249;\r\n  data.activities[\"70A0\"].descriptionShort = stepDescription[\"70A0\"];\r\n  data.activities[\"70A0\"].sort = 250;\r\n  data.activities[\"70B0\"].descriptionShort = stepDescription[\"70B0\"];\r\n  data.activities[\"70B0\"].sort = 251;\r\n  data.activities[\"70C0\"].descriptionShort = stepDescription[\"70C0\"];\r\n  data.activities[\"70C0\"].sort = 252;\r\n  data.activities[\"70D0\"].descriptionShort = stepDescription[\"70D0\"];\r\n  data.activities[\"70D0\"].sort = 253;\r\n  data.activities[\"7600\"].descriptionShort = stepDescription[\"7600\"];\r\n  data.activities[\"7600\"].sort = 278;\r\n\r\n  return data;\r\n};\r\n\r\nexport const isInstallationStep = (activityNo) => {\r\n  const steps = [\r\n    \"7010\",\r\n    \"7020\",\r\n    \"7030\",\r\n    \"7040\",\r\n    \"7050\",\r\n    \"7060\",\r\n    \"7070\",\r\n    \"7080\",\r\n    \"7090\",\r\n    \"70A0\",\r\n    \"70B0\",\r\n    \"70C0\",\r\n    \"70D0\",\r\n    \"7600\",\r\n  ];\r\n\r\n  return steps.includes(activityNo);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}