{"ast":null,"code":"import _defineProperty from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Box,Button,makeStyles,Typography}from\"@material-ui/core\";import FormControl from\"@material-ui/core/FormControl\";import IconButton from\"@material-ui/core/IconButton\";import Input from\"@material-ui/core/Input\";import InputAdornment from\"@material-ui/core/InputAdornment\";import InputLabel from\"@material-ui/core/InputLabel\";import Visibility from\"@material-ui/icons/Visibility\";import VisibilityOff from\"@material-ui/icons/VisibilityOff\";import*as action from\"actions\";import{LocalizeContext}from\"i18n\";import React from\"react\";import{connect}from\"react-redux\";var useStyles=makeStyles(function(_ref){var spacing=_ref.spacing;return{main:{margin:spacing(1,2)},formControl:{marginBottom:spacing(2)},submit:{position:\"fixed\",bottom:spacing(4),width:\"90%\"},reset:{position:\"fixed\",bottom:spacing(4),width:\"90%\"},descript:{marginTop:spacing(1)}};});var NewUserResetPasswordPage=function NewUserResetPasswordPage(_ref2){var submit=_ref2.submit,firstLogin=_ref2.firstLogin,firstLoginPassword=_ref2.firstLoginPassword;var classes=useStyles();var i18n=React.useContext(LocalizeContext);var _React$useState=React.useState({oldPassword:firstLogin===\"true\"?firstLoginPassword:\"\",newPassword:\"\",confrimNewPassword:\"\"}),_React$useState2=_slicedToArray(_React$useState,2),values=_React$useState2[0],setValues=_React$useState2[1];var _React$useState3=React.useState({oldPassword:false,newPassword:false,confrimNewPassword:false}),_React$useState4=_slicedToArray(_React$useState3,2),isShowPassword=_React$useState4[0],setShowPassword=_React$useState4[1];var fields=[{name:\"oldPassword\",label:i18n.ISNTAPP_OLD_PASSWORD,showPassword:firstLoginPassword,firstLogin:firstLogin},{name:\"newPassword\",label:i18n.ISNTAPP_NEW_PASSWORD,showPassword:isShowPassword.newPassword},{name:\"confrimNewPassword\",label:i18n.ISNTAPP_CONFIRME_CHANGE_PASSWORD,showPassword:isShowPassword.confrimNewPassword,descript:\"密码必须是由6-16位的数字、大写字母、小写字母、特殊字符组成。\"}];var handleChange=function handleChange(prop){return function(event){setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},prop,event.target.value.trim())));};};var handleClickShowPassword=function handleClickShowPassword(name){return function(event){setShowPassword(_objectSpread(_objectSpread({},isShowPassword),{},_defineProperty({},name,!isShowPassword[name])));};};var handleMouseDownPassword=function handleMouseDownPassword(event){event.preventDefault();};var verificationSubmit=function verificationSubmit(){if(!values.oldPassword){alert(\"请输入旧密码\");}else if(!values.newPassword){alert(\"请输入新密码\");}else if(checkoutPassword(values.newPassword)){return true;}else if(!values.confrimNewPassword){alert(\"请输入确认新密码\");}else if(values.oldPassword===values.confrimNewPassword){alert(\"新密码与初始密码不能相同\");}else if(checkoutPassword(values.confrimNewPassword)){return true;}else if(values.newPassword!==values.confrimNewPassword){alert(\"两次新密码不一致\");}else{submit({currentPassword:values.oldPassword,newPassword:values.newPassword},firstLogin);}};var checkoutPassword=function checkoutPassword(password){var hasUpperCase=/[A-Z]/.test(password);var hasLowerCase=/[a-z]/.test(password);var hasNumbers=/\\d/.test(password);var hasNonalphas=/\\W/.test(password);if(password.length<6){alert(\"请至少输入6位密码\");return true;}else if(password.length>16){alert(\"密码长度不能大于16位\");return true;}else if(!hasUpperCase){alert(\"请至少输入一个大写字母\");return true;}else if(!hasLowerCase){alert(\"请至少输入一个小写字母\");return true;}else if(!hasNumbers){alert(\"请至少输入一个数字\");return true;}else if(!hasNonalphas){alert(\"请至少输入一个特殊字符\");return true;}else{return false;}};return/*#__PURE__*/React.createElement(Box,{className:classes.main},/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"error\",style:{marginTop:\"16px\"}},\"\\u65B0\\u7528\\u6237\\u9996\\u6B21\\u767B\\u5F55\\u987B\\u91CD\\u7F6E\\u5BC6\\u7801*\"),fields.map(function(item,index){return item.firstLogin!==\"true\"&&/*#__PURE__*/React.createElement(FormControl,{fullWidth:true,required:true,key:index,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,null,item.label),/*#__PURE__*/React.createElement(Input,{maxLength:\"8\",type:item.showPassword?\"text\":\"password\",value:item.password,onChange:handleChange(item.name),endAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"end\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:handleClickShowPassword(item.name),onMouseDown:handleMouseDownPassword},item.showPassword?/*#__PURE__*/React.createElement(Visibility,null):/*#__PURE__*/React.createElement(VisibilityOff,null)))}),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",className:classes.descript},item.descript));}),/*#__PURE__*/React.createElement(Box,{className:classes.submit},/*#__PURE__*/React.createElement(Button,{style:{backgroundColor:\"rgb(220,2,2)\",color:\"white\",textTransform:\"capitalize\"},fullWidth:true,onClick:function onClick(){return verificationSubmit();},size:\"large\",variant:\"contained\"},i18n.ISNTAPP_CHANGE_PASSWORD)));};var mapStateToPops=function mapStateToPops(state,_ref3){var _ref3$match$params=_ref3.match.params,firstLogin=_ref3$match$params.firstLogin,firstLoginPassword=_ref3$match$params.firstLoginPassword;return{firstLogin:firstLogin,firstLoginPassword:firstLoginPassword};};var mapDispatchToState=function mapDispatchToState(dispatch){return{submit:function submit(values){dispatch(action.firstLoginRestPassword(values));}};};export default connect(mapStateToPops,mapDispatchToState)(NewUserResetPasswordPage);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/NewUserResetPasswordPage/index.js"],"names":["Box","Button","makeStyles","Typography","FormControl","IconButton","Input","InputAdornment","InputLabel","Visibility","VisibilityOff","action","LocalizeContext","React","connect","useStyles","spacing","main","margin","formControl","marginBottom","submit","position","bottom","width","reset","descript","marginTop","NewUserResetPasswordPage","firstLogin","firstLoginPassword","classes","i18n","useContext","useState","oldPassword","newPassword","confrimNewPassword","values","setValues","isShowPassword","setShowPassword","fields","name","label","ISNTAPP_OLD_PASSWORD","showPassword","ISNTAPP_NEW_PASSWORD","ISNTAPP_CONFIRME_CHANGE_PASSWORD","handleChange","prop","event","target","value","trim","handleClickShowPassword","handleMouseDownPassword","preventDefault","verificationSubmit","alert","checkoutPassword","currentPassword","password","hasUpperCase","test","hasLowerCase","hasNumbers","hasNonalphas","length","map","item","index","backgroundColor","color","textTransform","ISNTAPP_CHANGE_PASSWORD","mapStateToPops","state","match","params","mapDispatchToState","dispatch","firstLoginRestPassword"],"mappings":"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","sourcesContent":["import { Box, Button, makeStyles, Typography } from \"@material-ui/core\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport * as action from \"actions\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nconst useStyles = makeStyles(({ spacing }) => ({\r\n  main: {\r\n    margin: spacing(1, 2),\r\n  },\r\n  formControl: {\r\n    marginBottom: spacing(2),\r\n  },\r\n  submit: {\r\n    position: \"fixed\",\r\n    bottom: spacing(4),\r\n    width: \"90%\",\r\n  },\r\n  reset: {\r\n    position: \"fixed\",\r\n    bottom: spacing(4),\r\n    width: \"90%\",\r\n  },\r\n  descript: {\r\n    marginTop: spacing(1),\r\n  },\r\n}));\r\n\r\nconst NewUserResetPasswordPage = ({\r\n  submit,\r\n  firstLogin,\r\n  firstLoginPassword,\r\n}) => {\r\n  const classes = useStyles();\r\n  const i18n = React.useContext(LocalizeContext);\r\n\r\n  const [values, setValues] = React.useState({\r\n    oldPassword: firstLogin === \"true\" ? firstLoginPassword : \"\",\r\n    newPassword: \"\",\r\n    confrimNewPassword: \"\",\r\n  });\r\n\r\n  const [isShowPassword, setShowPassword] = React.useState({\r\n    oldPassword: false,\r\n    newPassword: false,\r\n    confrimNewPassword: false,\r\n  });\r\n\r\n  const fields = [\r\n    {\r\n      name: \"oldPassword\",\r\n      label: i18n.ISNTAPP_OLD_PASSWORD,\r\n      showPassword: firstLoginPassword,\r\n      firstLogin: firstLogin,\r\n    },\r\n    {\r\n      name: \"newPassword\",\r\n      label: i18n.ISNTAPP_NEW_PASSWORD,\r\n      showPassword: isShowPassword.newPassword,\r\n    },\r\n    {\r\n      name: \"confrimNewPassword\",\r\n      label: i18n.ISNTAPP_CONFIRME_CHANGE_PASSWORD,\r\n      showPassword: isShowPassword.confrimNewPassword,\r\n      descript: \"密码必须是由6-16位的数字、大写字母、小写字母、特殊字符组成。\",\r\n    },\r\n  ];\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    setValues({ ...values, [prop]: event.target.value.trim() });\r\n  };\r\n\r\n  const handleClickShowPassword = (name) => (event) => {\r\n    setShowPassword({ ...isShowPassword, [name]: !isShowPassword[name] });\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const verificationSubmit = () => {\r\n    if (!values.oldPassword) {\r\n      alert(\"请输入旧密码\");\r\n    } else if (!values.newPassword) {\r\n      alert(\"请输入新密码\");\r\n    } else if (checkoutPassword(values.newPassword)) {\r\n      return true;\r\n    } else if (!values.confrimNewPassword) {\r\n      alert(\"请输入确认新密码\");\r\n    } else if (values.oldPassword === values.confrimNewPassword) {\r\n      alert(\"新密码与初始密码不能相同\");\r\n    } else if (checkoutPassword(values.confrimNewPassword)) {\r\n      return true;\r\n    } else if (values.newPassword !== values.confrimNewPassword) {\r\n      alert(\"两次新密码不一致\");\r\n    } else {\r\n      submit(\r\n        {\r\n          currentPassword: values.oldPassword,\r\n          newPassword: values.newPassword,\r\n        },\r\n        firstLogin\r\n      );\r\n    }\r\n  };\r\n\r\n  const checkoutPassword = (password) => {\r\n    var hasUpperCase = /[A-Z]/.test(password);\r\n    var hasLowerCase = /[a-z]/.test(password);\r\n    var hasNumbers = /\\d/.test(password);\r\n    var hasNonalphas = /\\W/.test(password);\r\n\r\n    if (password.length < 6) {\r\n      alert(\"请至少输入6位密码\");\r\n      return true;\r\n    } else if (password.length > 16) {\r\n      alert(\"密码长度不能大于16位\");\r\n      return true;\r\n    } else if (!hasUpperCase) {\r\n      alert(\"请至少输入一个大写字母\");\r\n      return true;\r\n    } else if (!hasLowerCase) {\r\n      alert(\"请至少输入一个小写字母\");\r\n      return true;\r\n    } else if (!hasNumbers) {\r\n      alert(\"请至少输入一个数字\");\r\n      return true;\r\n    } else if (!hasNonalphas) {\r\n      alert(\"请至少输入一个特殊字符\");\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box className={classes.main}>\r\n      <Typography variant=\"body2\" color=\"error\" style={{ marginTop: \"16px\" }}>\r\n        新用户首次登录须重置密码*\r\n      </Typography>\r\n      {fields.map((item, index) => {\r\n        return (\r\n          item.firstLogin !== \"true\" && (\r\n            <FormControl\r\n              fullWidth\r\n              required\r\n              key={index}\r\n              className={classes.formControl}\r\n            >\r\n              <InputLabel>{item.label}</InputLabel>\r\n              <Input\r\n                maxLength=\"8\"\r\n                type={item.showPassword ? \"text\" : \"password\"}\r\n                value={item.password}\r\n                onChange={handleChange(item.name)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      aria-label=\"toggle password visibility\"\r\n                      onClick={handleClickShowPassword(item.name)}\r\n                      onMouseDown={handleMouseDownPassword}\r\n                    >\r\n                      {item.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n              <Typography\r\n                variant=\"body2\"\r\n                color=\"textSecondary\"\r\n                className={classes.descript}\r\n              >\r\n                {item.descript}\r\n              </Typography>\r\n            </FormControl>\r\n          )\r\n        );\r\n      })}\r\n      <Box className={classes.submit}>\r\n        <Button\r\n          style={{\r\n            backgroundColor: \"rgb(220,2,2)\",\r\n            color: \"white\",\r\n            textTransform: \"capitalize\",\r\n          }}\r\n          fullWidth\r\n          onClick={() => verificationSubmit()}\r\n          size=\"large\"\r\n          variant=\"contained\"\r\n        >\r\n          {i18n.ISNTAPP_CHANGE_PASSWORD}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst mapStateToPops = (\r\n  state,\r\n  {\r\n    match: {\r\n      params: { firstLogin, firstLoginPassword },\r\n    },\r\n  }\r\n) => {\r\n  return { firstLogin, firstLoginPassword };\r\n};\r\n\r\nconst mapDispatchToState = (dispatch) => {\r\n  return {\r\n    submit: (values) => {\r\n      dispatch(action.firstLoginRestPassword(values));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToPops,\r\n  mapDispatchToState\r\n)(NewUserResetPasswordPage);\r\n"]},"metadata":{},"sourceType":"module"}