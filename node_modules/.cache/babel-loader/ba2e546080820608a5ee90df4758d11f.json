{"ast":null,"code":"import _slicedToArray from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Box,Typography}from\"@material-ui/core\";import ConfirmModal from\"components/ConfirmModal\";import{LocalizeContext}from\"i18n\";import moment from\"moment\";import React from\"react\";import{DatePicker}from\"@material-ui/pickers\";var OrderActivityList=function OrderActivityList(_ref){var _confirmedDateMinAndM,_confirmedDateMinAndM2;var data=_ref.data,Component=_ref.component,tabType=_ref.tabType,submit=_ref.submit,oneThousandPlannedDate=_ref.oneThousandPlannedDate,nineThousandPlannedDate=_ref.nineThousandPlannedDate;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),activity=_React$useState4[0],setActivity=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),currentActivity=_React$useState6[0],setCurrentActivity=_React$useState6[1];var _React$useState7=React.useState(moment(new Date()).format(\"YYYY-MM-DD\")),_React$useState8=_slicedToArray(_React$useState7,2),date=_React$useState8[0],setDate=_React$useState8[1];var i18n=React.useContext(LocalizeContext);var _handleClickOpen=function handleClickOpen(name,activity,currentActivity){setOpen(name);setActivity(activity);setCurrentActivity(currentActivity);};var handleClose=function handleClose(){setOpen(null);setDate(moment(new Date()).format(\"YYYY-MM-DD\"));};var confirmedDateMinAndMax=function confirmedDateMinAndMax(){var currentData=activity?data[Object.keys(data).filter(function(item){return data[item].activityNumber===activity;})[0]]:data;if(activity){if(currentData.confPreStart===\"X\"){return{min:0,max:moment().format(\"YYYY-MM-DD\")};}else{if(currentData.confPast===\"0\"||currentData.confPast===null){return{min:moment().add(-5,\"days\").format(\"YYYY-MM-DD\"),max:moment().format(\"YYYY-MM-DD\")};}else{return{min:moment().add(-currentData.confPast,\"days\").format(\"YYYY-MM-DD\"),max:moment().format(\"YYYY-MM-DD\")};}}}};var handleClick=function handleClick(){var type=0;if(open===\"lock\"||open===\"unlock\"){type=2;}if(open===\"confirm\"||open===\"cancel\"){type=1;}if((open===\"lock\"||open===\"confirm\")&&date){submit(activity,date,type);setOpen(null);}else if(open===\"unlock\"||open===\"cancel\"){submit(activity,\"\",type);setOpen(null);}};if(data){data.sort(function(a,b){return a.sort?a.sort>b.sort?1:-1:1;});}return/*#__PURE__*/React.createElement(Box,{style:{marginBottom:\"16px\"}},data===null||data===void 0?void 0:data.map(function(item,index){return/*#__PURE__*/React.createElement(Component,{data:item,handleClickOpen:function handleClickOpen(name,activity,currentActivity){return _handleClickOpen(name,activity,currentActivity);},tabType:tabType,key:index});}),/*#__PURE__*/React.createElement(ConfirmModal,{open:open===\"lock\"||open===\"unlock\"||open===\"confirm\"||open===\"cancel\",date:date,handleClick:handleClick,onClose:handleClose,title:currentActivity},/*#__PURE__*/React.createElement(Box,{mb:1,align:\"center\",mr:5},/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:open===\"lock\"||open===\"confirm\"?date?\"initial\":\"error\":\"initial\"},open===\"lock\"||open===\"confirm\"?\"*\".concat(i18n.ISNTAPP_PLEASE_SELECT).concat(open===\"lock\"?i18n.ORDERDETAILS_LOCK:open===\"confirm\"?i18n.GENERAL_CONFIRM:\"\").concat(i18n.ISNTAPP_DETE):\"\".concat(i18n.ISNTAPP_CONFIRM_TO).concat(open===\"unlock\"?i18n.ORDERDETAILS_UNLOCK:open===\"cancel\"?i18n.GENERAL_CANCEL:\"\").concat(i18n.ISNTAPP_DETE,\"?\"))),/*#__PURE__*/React.createElement(Box,{mb:1,align:\"center\"},open===\"lock\"&&/*#__PURE__*/React.createElement(\"input\",{type:\"date\",min:oneThousandPlannedDate,max:nineThousandPlannedDate,onChange:function onChange(e){setDate(e.target.value);},value:date}),open===\"confirm\"&&/*#__PURE__*/ // <input\n//   min={confirmedDateMinAndMax().min}\n//   max={confirmedDateMinAndMax().max}\n//   type=\"date\"\n//   onChange={(e) => {\n//     setDate(e.target.value);\n//   }}\n//   value={date}\n// />\nReact.createElement(DatePicker,{autoOk:true,disableToolbar:true,variant:\"inline\",value:date?new Date(date):null,minDate:new Date((_confirmedDateMinAndM=confirmedDateMinAndMax())===null||_confirmedDateMinAndM===void 0?void 0:_confirmedDateMinAndM.min),maxDate:new Date((_confirmedDateMinAndM2=confirmedDateMinAndMax())===null||_confirmedDateMinAndM2===void 0?void 0:_confirmedDateMinAndM2.max),format:\"YYYY/MM/DD\",onChange:function onChange(d){setDate(moment(d).format(\"YYYY-MM-DD\"));}}))));};export default OrderActivityList;","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/components/OrderActivityList/index.js"],"names":["Box","Typography","ConfirmModal","LocalizeContext","moment","React","DatePicker","OrderActivityList","data","Component","component","tabType","submit","oneThousandPlannedDate","nineThousandPlannedDate","useState","open","setOpen","activity","setActivity","currentActivity","setCurrentActivity","Date","format","date","setDate","i18n","useContext","handleClickOpen","name","handleClose","confirmedDateMinAndMax","currentData","Object","keys","filter","item","activityNumber","confPreStart","min","max","confPast","add","handleClick","type","sort","a","b","marginBottom","map","index","ISNTAPP_PLEASE_SELECT","ORDERDETAILS_LOCK","GENERAL_CONFIRM","ISNTAPP_DETE","ISNTAPP_CONFIRM_TO","ORDERDETAILS_UNLOCK","GENERAL_CANCEL","e","target","value","d"],"mappings":"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","sourcesContent":["import { Box, Typography } from \"@material-ui/core\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport moment from \"moment\";\r\nimport React from \"react\";\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\n\r\nconst OrderActivityList = ({\r\n  data,\r\n  component: Component,\r\n  tabType,\r\n  submit,\r\n  oneThousandPlannedDate,\r\n  nineThousandPlannedDate,\r\n}) => {\r\n  const [open, setOpen] = React.useState(null);\r\n  const [activity, setActivity] = React.useState(\"\");\r\n  const [currentActivity, setCurrentActivity] = React.useState(\"\");\r\n  const [date, setDate] = React.useState(\r\n    moment(new Date()).format(\"YYYY-MM-DD\")\r\n  );\r\n  const i18n = React.useContext(LocalizeContext);\r\n\r\n  const handleClickOpen = (name, activity, currentActivity) => {\r\n    setOpen(name);\r\n    setActivity(activity);\r\n    setCurrentActivity(currentActivity);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(null);\r\n    setDate(moment(new Date()).format(\"YYYY-MM-DD\"));\r\n  };\r\n\r\n  const confirmedDateMinAndMax = () => {\r\n    const currentData = activity\r\n      ? data[\r\n          Object.keys(data).filter((item) => {\r\n            return data[item].activityNumber === activity;\r\n          })[0]\r\n        ]\r\n      : data;\r\n    if (activity) {\r\n      if (currentData.confPreStart === \"X\") {\r\n        return { min: 0, max: moment().format(\"YYYY-MM-DD\") };\r\n      } else {\r\n        if (currentData.confPast === \"0\" || currentData.confPast === null) {\r\n          return {\r\n            min: moment().add(-5, \"days\").format(\"YYYY-MM-DD\"),\r\n            max: moment().format(\"YYYY-MM-DD\"),\r\n          };\r\n        } else {\r\n          return {\r\n            min: moment()\r\n              .add(-currentData.confPast, \"days\")\r\n              .format(\"YYYY-MM-DD\"),\r\n            max: moment().format(\"YYYY-MM-DD\"),\r\n          };\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    let type = 0;\r\n\r\n    if (open === \"lock\" || open === \"unlock\") {\r\n      type = 2;\r\n    }\r\n\r\n    if (open === \"confirm\" || open === \"cancel\") {\r\n      type = 1;\r\n    }\r\n\r\n    if ((open === \"lock\" || open === \"confirm\") && date) {\r\n      submit(activity, date, type);\r\n      setOpen(null);\r\n    } else if (open === \"unlock\" || open === \"cancel\") {\r\n      submit(activity, \"\", type);\r\n      setOpen(null);\r\n    }\r\n  };\r\n\r\n  if (data) {\r\n    data.sort((a, b) => (a.sort ? (a.sort > b.sort ? 1 : -1) : 1));\r\n  }\r\n\r\n  return (\r\n    <Box style={{ marginBottom: \"16px\" }}>\r\n      {data?.map((item, index) => {\r\n        return (\r\n          <Component\r\n            data={item}\r\n            handleClickOpen={(name, activity, currentActivity) =>\r\n              handleClickOpen(name, activity, currentActivity)\r\n            }\r\n            tabType={tabType}\r\n            key={index}\r\n          />\r\n        );\r\n      })}\r\n      <ConfirmModal\r\n        open={\r\n          open === \"lock\" ||\r\n          open === \"unlock\" ||\r\n          open === \"confirm\" ||\r\n          open === \"cancel\"\r\n        }\r\n        date={date}\r\n        handleClick={handleClick}\r\n        onClose={handleClose}\r\n        title={currentActivity}\r\n      >\r\n        <Box mb={1} align=\"center\" mr={5}>\r\n          <Typography\r\n            variant=\"body2\"\r\n            color={\r\n              open === \"lock\" || open === \"confirm\"\r\n                ? date\r\n                  ? \"initial\"\r\n                  : \"error\"\r\n                : \"initial\"\r\n            }\r\n          >\r\n            {open === \"lock\" || open === \"confirm\"\r\n              ? `*${i18n.ISNTAPP_PLEASE_SELECT}${\r\n                  open === \"lock\"\r\n                    ? i18n.ORDERDETAILS_LOCK\r\n                    : open === \"confirm\"\r\n                    ? i18n.GENERAL_CONFIRM\r\n                    : \"\"\r\n                }${i18n.ISNTAPP_DETE}`\r\n              : `${i18n.ISNTAPP_CONFIRM_TO}${\r\n                  open === \"unlock\"\r\n                    ? i18n.ORDERDETAILS_UNLOCK\r\n                    : open === \"cancel\"\r\n                    ? i18n.GENERAL_CANCEL\r\n                    : \"\"\r\n                }${i18n.ISNTAPP_DETE}?`}\r\n          </Typography>\r\n        </Box>\r\n        <Box mb={1} align=\"center\">\r\n          {open === \"lock\" && (\r\n            <input\r\n              type=\"date\"\r\n              min={oneThousandPlannedDate}\r\n              max={nineThousandPlannedDate}\r\n              onChange={(e) => {\r\n                setDate(e.target.value);\r\n              }}\r\n              value={date}\r\n            />\r\n          )}\r\n          {open === \"confirm\" && (\r\n            // <input\r\n            //   min={confirmedDateMinAndMax().min}\r\n            //   max={confirmedDateMinAndMax().max}\r\n            //   type=\"date\"\r\n            //   onChange={(e) => {\r\n            //     setDate(e.target.value);\r\n            //   }}\r\n            //   value={date}\r\n            // />\r\n\r\n            <DatePicker\r\n              autoOk\r\n              disableToolbar={true}\r\n              variant=\"inline\"\r\n              value={date ? new Date(date) : null}\r\n              minDate={new Date(confirmedDateMinAndMax()?.min)}\r\n              maxDate={new Date(confirmedDateMinAndMax()?.max)}\r\n              format=\"YYYY/MM/DD\"\r\n              onChange={(d) => {\r\n                setDate(moment(d).format(\"YYYY-MM-DD\"));\r\n              }}\r\n            />\r\n          )}\r\n        </Box>\r\n      </ConfirmModal>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OrderActivityList;\r\n"]},"metadata":{},"sourceType":"module"}