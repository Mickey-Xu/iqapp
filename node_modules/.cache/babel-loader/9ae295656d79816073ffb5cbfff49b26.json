{"ast":null,"code":"import _toConsumableArray from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Accordion,AccordionSummary,Box,Button,Typography,withStyles}from\"@material-ui/core\";import*as action from\"actions\";import Model from\"components/Model\";import Pdf from\"components/Pdf\";import{LocalizeContext}from\"i18n\";import PrimaryLayout from\"layouts/PrimaryLayout\";import{default as React,useEffect}from\"react\";import{connect}from\"react-redux\";import FFTab from\"components/FFTab\";var Template=withStyles(function(_ref){var spacing=_ref.spacing;return{root:{padding:0},box:{width:\"90%\",display:\"flex\",justifyContent:\"space-between\",margin:\"0 auto\"}};})(function(_ref2){var classes=_ref2.classes,preview=_ref2.preview,name=_ref2.name,id=_ref2.id;var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,1),expanded=_React$useState2[0];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),pdfurl=_React$useState6[0],setPdfurl=_React$useState6[1];var handleClose=function handleClose(){setOpen(false);};var handleClickOpen=function handleClickOpen(id){preview(id).then(function(url){setPdfurl(url);setOpen(true);});};return/*#__PURE__*/React.createElement(Accordion,{expanded:expanded},/*#__PURE__*/React.createElement(AccordionSummary,{className:classes.root},/*#__PURE__*/React.createElement(Box,{className:classes.box},/*#__PURE__*/React.createElement(Typography,{style:{lineHeight:\"36px\"},color:\"error\"},name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",style:{height:\"fit-content\"},onClick:function onClick(){return handleClickOpen(id);}},\"\\u9884\\u89C8\"))),/*#__PURE__*/React.createElement(Model,{open:open,title:name,handleClose:handleClose},/*#__PURE__*/React.createElement(Pdf,{filePath:pdfurl})));});var UserManualPage=withStyles(function(_ref3){var spacing=_ref3.spacing;return{root:{width:\"90%\",fontWeight:\"500\",margin:spacing(2,\"auto\")},list:{padding:0},listItem:{marginBottom:spacing(3),backgroundColor:\"#fff\"}};})(function(_ref4){var preview=_ref4.preview,classes=_ref4.classes,getUserManual=_ref4.getUserManual;var i18n=React.useContext(LocalizeContext);var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),data=_React$useState8[0],setData=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),tabs=_React$useState10[0],setTabs=_React$useState10[1];var _React$useState11=React.useState(),_React$useState12=_slicedToArray(_React$useState11,2),tabItem=_React$useState12[0],setTabItem=_React$useState12[1];var getData=function getData(){getUserManual().then(function(res){var _tabName$;var tabName=_toConsumableArray(new Set(res.map(function(item){return item.type;}))).map(function(item){return{title:item,value:item};});setTabItem(tabName===null||tabName===void 0?void 0:(_tabName$=tabName[0])===null||_tabName$===void 0?void 0:_tabName$.title);setTabs(tabName);setData(res);});};useEffect(function(){getData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);return/*#__PURE__*/React.createElement(PrimaryLayout,{name:\"activity Document\",title:i18n.INSTALLATION_USER_MANUAL},tabItem&&/*#__PURE__*/React.createElement(FFTab,{tabs:tabs,selectedTabValue:tabItem,onTabChange:function onTabChange(value){setTabItem(value);}}),/*#__PURE__*/React.createElement(Box,{className:classes.root},(data===null||data===void 0?void 0:data.length)>0&&data.filter(function(item){return item.type===tabItem;}).map(function(item,index){return/*#__PURE__*/React.createElement(Template,{key:index,preview:preview,name:item.name,id:item.id});})));});export default connect(function(_ref5,_ref6){var state=_ref5.state;var ownProps=_ref6.ownProps;return{};},function(dispatch){return{getUserManual:function getUserManual(){return dispatch(action.getUserManual());},preview:function preview(id){return dispatch(action.getPdfData(id));}};})(UserManualPage);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/UserManualPage/index.js"],"names":["Accordion","AccordionSummary","Box","Button","Typography","withStyles","action","Model","Pdf","LocalizeContext","PrimaryLayout","default","React","useEffect","connect","FFTab","Template","spacing","root","padding","box","width","display","justifyContent","margin","classes","preview","name","id","useState","expanded","open","setOpen","pdfurl","setPdfurl","handleClose","handleClickOpen","then","url","lineHeight","height","UserManualPage","fontWeight","list","listItem","marginBottom","backgroundColor","getUserManual","i18n","useContext","data","setData","tabs","setTabs","tabItem","setTabItem","getData","res","tabName","Set","map","item","type","title","value","INSTALLATION_USER_MANUAL","length","filter","index","state","ownProps","dispatch","getPdfData"],"mappings":"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","sourcesContent":["import {\r\n  Accordion,\r\n  AccordionSummary,\r\n  Box,\r\n  Button,\r\n  Typography,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport * as action from \"actions\";\r\nimport Model from \"components/Model\";\r\nimport Pdf from \"components/Pdf\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\r\nimport { default as React, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport FFTab from \"components/FFTab\";\r\n\r\nconst Template = withStyles(({ spacing }) => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n  box: {\r\n    width: \"90%\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    margin: \"0 auto\",\r\n  },\r\n}))(({ classes, preview, name, id }) => {\r\n  const [expanded] = React.useState(true);\r\n  const [open, setOpen] = React.useState(false);\r\n  const [pdfurl, setPdfurl] = React.useState(null);\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleClickOpen = (id) => {\r\n    preview(id).then((url) => {\r\n      setPdfurl(url);\r\n      setOpen(true);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Accordion expanded={expanded}>\r\n      <AccordionSummary className={classes.root}>\r\n        <Box className={classes.box}>\r\n          <Typography style={{ lineHeight: \"36px\" }} color=\"error\">\r\n            {name}\r\n          </Typography>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            style={{ height: \"fit-content\" }}\r\n            onClick={() => handleClickOpen(id)}\r\n          >\r\n            预览\r\n          </Button>\r\n        </Box>\r\n      </AccordionSummary>\r\n      <Model open={open} title={name} handleClose={handleClose}>\r\n        <Pdf filePath={pdfurl} />\r\n      </Model>\r\n    </Accordion>\r\n  );\r\n});\r\n\r\nconst UserManualPage = withStyles(({ spacing }) => ({\r\n  root: {\r\n    width: \"90%\",\r\n    fontWeight: \"500\",\r\n    margin: spacing(2, \"auto\"),\r\n  },\r\n  list: {\r\n    padding: 0,\r\n  },\r\n  listItem: {\r\n    marginBottom: spacing(3),\r\n    backgroundColor: \"#fff\",\r\n  },\r\n}))(({ preview, classes, getUserManual }) => {\r\n  const i18n = React.useContext(LocalizeContext);\r\n  const [data, setData] = React.useState([]);\r\n  const [tabs, setTabs] = React.useState([]);\r\n  const [tabItem, setTabItem] = React.useState();\r\n\r\n  const getData = () => {\r\n    getUserManual().then((res) => {\r\n      const tabName = [\r\n        ...new Set(\r\n          res.map((item) => {\r\n            return item.type;\r\n          })\r\n        ),\r\n      ].map((item) => {\r\n        return { title: item, value: item };\r\n      });\r\n\r\n      setTabItem(tabName?.[0]?.title);\r\n      setTabs(tabName);\r\n      setData(res);\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <PrimaryLayout\r\n      name=\"activity Document\"\r\n      title={i18n.INSTALLATION_USER_MANUAL}\r\n    >\r\n      {tabItem && (\r\n        <FFTab\r\n          tabs={tabs}\r\n          selectedTabValue={tabItem}\r\n          onTabChange={(value) => {\r\n            setTabItem(value);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <Box className={classes.root}>\r\n        {data?.length > 0 &&\r\n          data\r\n            .filter((item) => item.type === tabItem)\r\n            .map((item, index) => {\r\n              return (\r\n                <Template\r\n                  key={index}\r\n                  preview={preview}\r\n                  name={item.name}\r\n                  id={item.id}\r\n                />\r\n              );\r\n            })}\r\n      </Box>\r\n    </PrimaryLayout>\r\n  );\r\n});\r\n\r\nexport default connect(\r\n  ({ state }, { ownProps }) => {\r\n    return {};\r\n  },\r\n  (dispatch) => {\r\n    return {\r\n      getUserManual: () => {\r\n        return dispatch(action.getUserManual());\r\n      },\r\n      preview: (id) => {\r\n        return dispatch(action.getPdfData(id));\r\n      },\r\n    };\r\n  }\r\n)(UserManualPage);\r\n"]},"metadata":{},"sourceType":"module"}