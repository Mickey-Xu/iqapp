{"ast":null,"code":"import _slicedToArray from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{makeStyles,Typography}from\"@material-ui/core\";import Button from\"@material-ui/core/Button\";import IconButton from\"@material-ui/core/IconButton\";import Modal from\"@material-ui/core/Modal\";import CreateIcon from\"@material-ui/icons/Create\";import React,{useRef,useState}from\"react\";import SignaturePad from\"react-signature-canvas\";import{LocalizeContext}from\"i18n\";import{disableForm}from\"js/util\";import{useParams}from'react-router-dom';var useStyles=makeStyles(function(theme){return{root:{marginTop:theme.spacing(1),userSelect:\"none\",marginBottom:\"400px\"},sigContainer:{width:\"100%\",height:\"250px\",// border: \"1px solid gray\",\n// backgroundColor: \"white\",\nbackgroundColor:theme.palette.background.paper},sigPad:{width:\"100%\",height:\"200px\"},modal:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},icon:{width:\"100%\",height:\"100px\",marginTop:\"8px\",borderRadius:\"5px\",backgroundColor:\"#eee\",margin:theme.spacing(1,0,3,0)}};});export var Signature=function Signature(props){var classes=useStyles();var i18n=React.useContext(LocalizeContext);var params=useParams();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),signModalOpen=_useState2[0],setSignModalOpen=_useState2[1];var _useState3=useState({width:\"100%\",height:\"100%\"}),_useState4=_slicedToArray(_useState3,2),sPhotoStyle=_useState4[0],setSPhotoStyle=_useState4[1];var sPadEl=useRef(null);var sPhotoEl=useRef(null);var clear=function clear(){sPadEl.current.clear();};var save=function save(){var signPhoto=sPadEl.current.getTrimmedCanvas().toDataURL(\"image/png\");props.onChange(signPhoto);var i=new Image();i.onload=function(){setSPhotoStyle({// width: sPhotoEl.current.clientWidth,\n// height: (sPhotoEl.current.clientWidth / i.width) * i.height,\nwidth:\"100%\",height:\"100%\",marginBottom:\"24px\"});};i.src=signPhoto;setSignModalOpen(false);};var signClick=function signClick(){setSignModalOpen(true);};var handleClose=function handleClose(){setSignModalOpen(false);};return/*#__PURE__*/React.createElement(\"div\",{classes:classes.root},/*#__PURE__*/React.createElement(Typography,{variant:\"subtitle2\"},props.label),/*#__PURE__*/React.createElement(IconButton,{disabled:disableForm(params),\"aria-label\":\"sign\",onClick:signClick,className:classes.icon},/*#__PURE__*/React.createElement(CreateIcon,null)),/*#__PURE__*/React.createElement(Modal,{className:classes.modal,open:signModalOpen,onClose:handleClose},/*#__PURE__*/React.createElement(\"div\",{className:classes.sigContainer},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(SignaturePad,{canvasProps:{className:classes.sigPad},ref:sPadEl}),/*#__PURE__*/React.createElement(Button,{onClick:clear},i18n.INSTALLATION_CLEAR),/*#__PURE__*/React.createElement(Button,{onClick:save},i18n.INSTALLATION_SAVE)))),/*#__PURE__*/React.createElement(\"img\",{src:props.value,style:sPhotoStyle,ref:sPhotoEl,alt:\"\"}),/*#__PURE__*/React.createElement(\"i\",null,props.description));};","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/components/TemplateForm/Signature/index.js"],"names":["makeStyles","Typography","Button","IconButton","Modal","CreateIcon","React","useRef","useState","SignaturePad","LocalizeContext","disableForm","useParams","useStyles","theme","root","marginTop","spacing","userSelect","marginBottom","sigContainer","width","height","backgroundColor","palette","background","paper","sigPad","modal","display","alignItems","justifyContent","icon","borderRadius","margin","Signature","props","classes","i18n","useContext","params","signModalOpen","setSignModalOpen","sPhotoStyle","setSPhotoStyle","sPadEl","sPhotoEl","clear","current","save","signPhoto","getTrimmedCanvas","toDataURL","onChange","i","Image","onload","src","signClick","handleClose","label","className","INSTALLATION_CLEAR","INSTALLATION_SAVE","value","description"],"mappings":"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","sourcesContent":["import { makeStyles, Typography } from \"@material-ui/core\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport CreateIcon from \"@material-ui/icons/Create\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport SignaturePad from \"react-signature-canvas\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport { disableForm } from \"js/util\";\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    marginTop: theme.spacing(1),\r\n    userSelect: \"none\",\r\n    marginBottom: \"400px\",\r\n  },\r\n  sigContainer: {\r\n    width: \"100%\",\r\n    height: \"250px\",\r\n    // border: \"1px solid gray\",\r\n    // backgroundColor: \"white\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  sigPad: {\r\n    width: \"100%\",\r\n    height: \"200px\",\r\n  },\r\n  modal: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  icon: {\r\n    width: \"100%\",\r\n    height: \"100px\",\r\n    marginTop: \"8px\",\r\n    borderRadius: \"5px\",\r\n    backgroundColor: \"#eee\",\r\n    margin: theme.spacing(1, 0, 3, 0),\r\n  },\r\n}));\r\n\r\nexport const Signature = (props) => {\r\n  const classes = useStyles();\r\n  const i18n = React.useContext(LocalizeContext);\r\n  const params = useParams()\r\n\r\n  const [signModalOpen, setSignModalOpen] = useState(false);\r\n  const [sPhotoStyle, setSPhotoStyle] = useState({\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  });\r\n\r\n  const sPadEl = useRef(null);\r\n  const sPhotoEl = useRef(null);\r\n\r\n  const clear = () => {\r\n    sPadEl.current.clear();\r\n  };\r\n\r\n  const save = () => {\r\n    const signPhoto = sPadEl.current.getTrimmedCanvas().toDataURL(\"image/png\");\r\n    props.onChange(signPhoto);\r\n    const i = new Image();\r\n    i.onload = () => {\r\n      setSPhotoStyle({\r\n        // width: sPhotoEl.current.clientWidth,\r\n        // height: (sPhotoEl.current.clientWidth / i.width) * i.height,\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        marginBottom: \"24px\",\r\n      });\r\n    };\r\n    i.src = signPhoto;\r\n    setSignModalOpen(false);\r\n  };\r\n\r\n  const signClick = () => {\r\n    setSignModalOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSignModalOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div classes={classes.root}>\r\n      <Typography variant=\"subtitle2\">{props.label}</Typography>\r\n      <IconButton\r\n        disabled={disableForm(params)}\r\n        aria-label=\"sign\"\r\n        onClick={signClick}\r\n        className={classes.icon}\r\n      >\r\n        <CreateIcon />\r\n      </IconButton>\r\n      <Modal\r\n        className={classes.modal}\r\n        open={signModalOpen}\r\n        onClose={handleClose}\r\n      >\r\n        <div className={classes.sigContainer}>\r\n          <div>\r\n            <SignaturePad\r\n              canvasProps={{ className: classes.sigPad }}\r\n              ref={sPadEl}\r\n            />\r\n            <Button onClick={clear}>{i18n.INSTALLATION_CLEAR}</Button>\r\n            <Button onClick={save}>{i18n.INSTALLATION_SAVE}</Button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n      {/* <CardMedia style={sPhotoStyle} image={props.value} ref={sPhotoEl} />\r\n       */}\r\n      <img src={props.value} style={sPhotoStyle} ref={sPhotoEl} alt=\"\" />\r\n      <i>{props.description}</i>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}