{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\pages\\\\TaskListPage\\\\index.js\";\n// import { Box } from \"@material-ui/core\";\n// import Fab from \"@material-ui/core/Fab\";\n// import AddIcon from \"@material-ui/icons/Add\";\n// import * as action from \"actions\";\n// import FFTab from \"components/FFTab\";\n// import TaskList from \"components/TaskList\";\n// import { LocalizeContext } from \"i18n\";\n// import * as repo from \"js/fetch\";\n// import { getTaskCount } from \"js/util\";\n// import PrimaryLayout from \"layouts/PrimaryLayout\";\n// import React from \"react\";\n// import { connect } from \"react-redux\";\n// import { useHistory } from \"react-router-dom\";\n// import { taskCleaner } from \"js/publicFn\";\n// import { useParams } from 'react-router-dom';\n// const Tasks = ({ type, tasksData, submit }) => {\n//   const history = useHistory();\n//   const i18n = React.useContext(LocalizeContext);\n//   const [status, setStatus] = React.useState(\"open\");\n//   const params = useParams()\n//   const tabs = [\n//     { title: i18n.ISNTAPP_TO_COMPLETE, value: \"open\" },\n//     { title: i18n.ISNTAPP_TO_CLOSE, value: \"pending\" },\n//     { title: i18n.ISNTAPP_CLOSED, value: \"close\" },\n//   ];\n//   let currentStatusTasks = [];\n//   if (status === \"open\") {\n//     tasksData.forEach((item) => {\n//       if (item.Status === \"A\") {\n//         currentStatusTasks.push(item);\n//       }\n//     });\n//   }\n//   if (status === \"pending\") {\n//     tasksData.forEach((item) => {\n//       if (item.Status === \"D\") {\n//         currentStatusTasks.push(item);\n//       }\n//     });\n//   }\n//   if (status === \"close\") {\n//     tasksData.forEach((item) => {\n//       if (item.Status === \"CL\") {\n//         currentStatusTasks.push(item);\n//       }\n//     });\n//   }\n//   currentStatusTasks.sort((a, b) =>\n//     a.DueDate ? (a.DueDate > b.DueDate ? 1 : -1) : 1\n//   );\n//   const pending = getTaskCount().awaitCloseNum;\n//   const open = getTaskCount().awaitComplateNum;\n//   return (\n//     <PrimaryLayout name=\"tasks\" title={params.type}>\n//       <Box\n//         style={{\n//           position: \"fixed\",\n//           top: \"52px\",\n//           width: \"100%\",\n//           zIndex: \"10000\",\n//         }}\n//       >\n//         <FFTab\n//           tabs={tabs}\n//           selectedTabValue={\"open\"}\n//           onTabChange={(value) => setStatus(value)}\n//         />\n//         {type === \"assigner\"\n//           ? pending > 0 && (\n//               <span\n//                 style={{\n//                   position: \"absolute\",\n//                   top: \"0\",\n//                   left: \"55%\",\n//                   padding: \"2px 8px\",\n//                   backgroundColor: \"red\",\n//                   borderRadius: \"40px\",\n//                   color: \"white\",\n//                 }}\n//               >\n//                 {pending}\n//               </span>\n//             )\n//           : open > 0 && (\n//               <span\n//                 style={{\n//                   position: \"absolute\",\n//                   top: \"0\",\n//                   left: \"21%\",\n//                   padding: \"2px 8px\",\n//                   backgroundColor: \"red\",\n//                   borderRadius: \"40px\",\n//                   color: \"white\",\n//                 }}\n//               >\n//                 {open}\n//               </span>\n//             )}\n//       </Box>\n//       <Box\n//         style={{\n//           width: \"100%\",\n//           padding: \"16px\",\n//           position: \"absolute\",\n//           top: \"32px\",\n//           height: window.screen.height - 157 + \"px\",\n//           overflow: \"hidden auto\",\n//         }}\n//       >\n//         <TaskList\n//           data={currentStatusTasks}\n//           status={status}\n//           type={type}\n//           submit={(submitDatas) => { \n//             submit(submitDatas);\n//           }}\n//         ></TaskList>\n//       </Box>\n//       {type === \"assigner\" && (\n//         <Box\n//           variant=\"contained\"\n//           color=\"secondary\"\n//           style={{\n//             position: \"fixed\",\n//             bottom: \"90px\",\n//             right: \"16px\",\n//           }}\n//           onClick={() => {\n//             history.push(\"/taskcreate\");\n//           }}\n//         >\n//           <Fab style={{ backgroundColor: \"#cb0c33a8\", color: \"white\" }}>\n//             <AddIcon />\n//           </Fab>\n//         </Box>\n//       )}\n//     </PrimaryLayout>\n//   );\n// };\n// const mapStateToProps = (state, ownProps) => {\n//   const { match } = ownProps;\n//   const { params } = match;\n//   const { type } = params;\n//   const { tasks, orders, projects } = state;\n//   return {\n//     type,\n//     tasksData:\n//       type === \"assigner\"\n//         ? taskCleaner(tasks.assigner, orders, projects) || []\n//         : type === \"assignee\"\n//         ? taskCleaner(tasks.assignee, orders, projects) || []\n//         : [],\n//   };\n// };\n// const mapDispatchToProps = (dispatch) => {\n//   return {\n//     submit: (submitDatas) => {\n//       dispatch(action.fetchCreateTask([submitDatas])).then((response) => {\n//         repo.fetchTasks().then((data) => {\n//           dispatch(action.setTasks(data));\n//         });\n//       });\n//     },\n//   };\n// };\n// export default connect(mapStateToProps, mapDispatchToProps)(Tasks);\nimport { Box } from \"@material-ui/core\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport * as action from \"actions\";\nimport FFTab from \"components/FFTab\";\nimport TaskList from \"components/TaskList\";\nimport { LocalizeContext } from \"i18n\";\nimport * as repo from \"js/fetch\";\nimport { getTaskCount } from \"js/util\";\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { taskCleaner } from \"js/publicFn\";\n\nconst Tasks = ({\n  type,\n  tasksData,\n  submit\n}) => {\n  const history = useHistory();\n  const i18n = React.useContext(LocalizeContext);\n  const [status, setStatus] = React.useState(\"open\");\n  const tabs = [{\n    title: i18n.ISNTAPP_TO_COMPLETE,\n    value: \"open\"\n  }, {\n    title: i18n.ISNTAPP_TO_CLOSE,\n    value: \"pending\"\n  }, {\n    title: i18n.ISNTAPP_CLOSED,\n    value: \"close\"\n  }];\n  let currentStatusTasks = [];\n\n  if (status === \"open\") {\n    tasksData.forEach(item => {\n      if (item.Status === \"A\") {\n        currentStatusTasks.push(item);\n      }\n    });\n  }\n\n  if (status === \"pending\") {\n    tasksData.forEach(item => {\n      if (item.Status === \"D\") {\n        currentStatusTasks.push(item);\n      }\n    });\n  }\n\n  if (status === \"close\") {\n    tasksData.forEach(item => {\n      if (item.Status === \"CL\") {\n        currentStatusTasks.push(item);\n      }\n    });\n  }\n\n  currentStatusTasks.sort((a, b) => a.DueDate ? a.DueDate > b.DueDate ? 1 : -1 : 1);\n  const pending = getTaskCount().awaitCloseNum;\n  const open = getTaskCount().awaitComplateNum;\n  return /*#__PURE__*/React.createElement(PrimaryLayout, {\n    name: \"tasks\",\n    title: i18n.INSTAPP_JOBLIST_TASKS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      position: \"fixed\",\n      top: \"52px\",\n      width: \"100%\",\n      zIndex: \"10000\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FFTab, {\n    tabs: tabs,\n    selectedTabValue: \"open\",\n    onTabChange: value => setStatus(value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }\n  }), type === \"assigner\" ? pending > 0 && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      position: \"absolute\",\n      top: \"0\",\n      left: \"55%\",\n      padding: \"2px 8px\",\n      backgroundColor: \"red\",\n      borderRadius: \"40px\",\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, pending) : open > 0 && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      position: \"absolute\",\n      top: \"0\",\n      left: \"21%\",\n      padding: \"2px 8px\",\n      backgroundColor: \"red\",\n      borderRadius: \"40px\",\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, open)), /*#__PURE__*/React.createElement(Box, {\n    style: {\n      width: \"100%\",\n      padding: \"16px\",\n      position: \"absolute\",\n      top: \"32px\",\n      height: window.screen.height - 157 + \"px\",\n      overflow: \"hidden auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TaskList, {\n    data: currentStatusTasks,\n    status: status,\n    type: type,\n    submit: submitDatas => {\n      submit(submitDatas);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 9\n    }\n  })), type === \"assigner\" && /*#__PURE__*/React.createElement(Box, {\n    variant: \"contained\",\n    color: \"secondary\",\n    style: {\n      position: \"fixed\",\n      bottom: \"90px\",\n      right: \"16px\"\n    },\n    onClick: () => {\n      history.push(\"/taskcreate\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    style: {\n      backgroundColor: \"#cb0c33a8\",\n      color: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 13\n    }\n  }))));\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const {\n    match\n  } = ownProps;\n  const {\n    params\n  } = match;\n  const {\n    type\n  } = params;\n  const {\n    tasks,\n    orders,\n    projects\n  } = state;\n  return {\n    type,\n    tasksData: type === \"assigner\" ? taskCleaner(tasks.assigner, orders, projects) || [] : type === \"assignee\" ? taskCleaner(tasks.assignee, orders, projects) || [] : []\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    submit: submitDatas => {\n      dispatch(action.fetchCreateTask([submitDatas])).then(response => {\n        repo.fetchTasks().then(data => {\n          dispatch(action.setTasks(data));\n        });\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tasks);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/TaskListPage/index.js"],"names":["Box","Fab","AddIcon","action","FFTab","TaskList","LocalizeContext","repo","getTaskCount","PrimaryLayout","React","connect","useHistory","taskCleaner","Tasks","type","tasksData","submit","history","i18n","useContext","status","setStatus","useState","tabs","title","ISNTAPP_TO_COMPLETE","value","ISNTAPP_TO_CLOSE","ISNTAPP_CLOSED","currentStatusTasks","forEach","item","Status","push","sort","a","b","DueDate","pending","awaitCloseNum","open","awaitComplateNum","INSTAPP_JOBLIST_TASKS","position","top","width","zIndex","left","padding","backgroundColor","borderRadius","color","height","window","screen","overflow","submitDatas","bottom","right","mapStateToProps","state","ownProps","match","params","tasks","orders","projects","assigner","assignee","mapDispatchToProps","dispatch","fetchCreateTask","then","response","fetchTasks","data","setTasks"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,SAASA,GAAT,QAAoB,mBAApB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAO,KAAKC,MAAZ,MAAwB,SAAxB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAASC,eAAT,QAAgC,MAAhC;AACA,OAAO,KAAKC,IAAZ,MAAsB,UAAtB;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,Q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","sourcesContent":["// import { Box } from \"@material-ui/core\";\r\n// import Fab from \"@material-ui/core/Fab\";\r\n// import AddIcon from \"@material-ui/icons/Add\";\r\n// import * as action from \"actions\";\r\n// import FFTab from \"components/FFTab\";\r\n// import TaskList from \"components/TaskList\";\r\n// import { LocalizeContext } from \"i18n\";\r\n// import * as repo from \"js/fetch\";\r\n// import { getTaskCount } from \"js/util\";\r\n// import PrimaryLayout from \"layouts/PrimaryLayout\";\r\n// import React from \"react\";\r\n// import { connect } from \"react-redux\";\r\n// import { useHistory } from \"react-router-dom\";\r\n// import { taskCleaner } from \"js/publicFn\";\r\n// import { useParams } from 'react-router-dom';\r\n\r\n// const Tasks = ({ type, tasksData, submit }) => {\r\n//   const history = useHistory();\r\n//   const i18n = React.useContext(LocalizeContext);\r\n//   const [status, setStatus] = React.useState(\"open\");\r\n//   const params = useParams()\r\n\r\n//   const tabs = [\r\n//     { title: i18n.ISNTAPP_TO_COMPLETE, value: \"open\" },\r\n//     { title: i18n.ISNTAPP_TO_CLOSE, value: \"pending\" },\r\n//     { title: i18n.ISNTAPP_CLOSED, value: \"close\" },\r\n//   ];\r\n\r\n//   let currentStatusTasks = [];\r\n\r\n//   if (status === \"open\") {\r\n//     tasksData.forEach((item) => {\r\n//       if (item.Status === \"A\") {\r\n//         currentStatusTasks.push(item);\r\n//       }\r\n//     });\r\n//   }\r\n\r\n//   if (status === \"pending\") {\r\n//     tasksData.forEach((item) => {\r\n//       if (item.Status === \"D\") {\r\n//         currentStatusTasks.push(item);\r\n//       }\r\n//     });\r\n//   }\r\n\r\n//   if (status === \"close\") {\r\n//     tasksData.forEach((item) => {\r\n//       if (item.Status === \"CL\") {\r\n//         currentStatusTasks.push(item);\r\n//       }\r\n//     });\r\n//   }\r\n\r\n//   currentStatusTasks.sort((a, b) =>\r\n//     a.DueDate ? (a.DueDate > b.DueDate ? 1 : -1) : 1\r\n//   );\r\n\r\n//   const pending = getTaskCount().awaitCloseNum;\r\n//   const open = getTaskCount().awaitComplateNum;\r\n//   return (\r\n//     <PrimaryLayout name=\"tasks\" title={params.type}>\r\n//       <Box\r\n//         style={{\r\n//           position: \"fixed\",\r\n//           top: \"52px\",\r\n//           width: \"100%\",\r\n//           zIndex: \"10000\",\r\n//         }}\r\n//       >\r\n//         <FFTab\r\n//           tabs={tabs}\r\n//           selectedTabValue={\"open\"}\r\n//           onTabChange={(value) => setStatus(value)}\r\n//         />\r\n//         {type === \"assigner\"\r\n//           ? pending > 0 && (\r\n//               <span\r\n//                 style={{\r\n//                   position: \"absolute\",\r\n//                   top: \"0\",\r\n//                   left: \"55%\",\r\n//                   padding: \"2px 8px\",\r\n//                   backgroundColor: \"red\",\r\n//                   borderRadius: \"40px\",\r\n//                   color: \"white\",\r\n//                 }}\r\n//               >\r\n//                 {pending}\r\n//               </span>\r\n//             )\r\n//           : open > 0 && (\r\n//               <span\r\n//                 style={{\r\n//                   position: \"absolute\",\r\n//                   top: \"0\",\r\n//                   left: \"21%\",\r\n//                   padding: \"2px 8px\",\r\n//                   backgroundColor: \"red\",\r\n//                   borderRadius: \"40px\",\r\n//                   color: \"white\",\r\n//                 }}\r\n//               >\r\n//                 {open}\r\n//               </span>\r\n//             )}\r\n//       </Box>\r\n\r\n//       <Box\r\n//         style={{\r\n//           width: \"100%\",\r\n//           padding: \"16px\",\r\n//           position: \"absolute\",\r\n//           top: \"32px\",\r\n//           height: window.screen.height - 157 + \"px\",\r\n//           overflow: \"hidden auto\",\r\n//         }}\r\n//       >\r\n//         <TaskList\r\n//           data={currentStatusTasks}\r\n//           status={status}\r\n//           type={type}\r\n//           submit={(submitDatas) => { \r\n//             submit(submitDatas);\r\n//           }}\r\n//         ></TaskList>\r\n//       </Box>\r\n\r\n//       {type === \"assigner\" && (\r\n//         <Box\r\n//           variant=\"contained\"\r\n//           color=\"secondary\"\r\n//           style={{\r\n//             position: \"fixed\",\r\n//             bottom: \"90px\",\r\n//             right: \"16px\",\r\n//           }}\r\n//           onClick={() => {\r\n//             history.push(\"/taskcreate\");\r\n//           }}\r\n//         >\r\n//           <Fab style={{ backgroundColor: \"#cb0c33a8\", color: \"white\" }}>\r\n//             <AddIcon />\r\n//           </Fab>\r\n//         </Box>\r\n//       )}\r\n//     </PrimaryLayout>\r\n//   );\r\n// };\r\n\r\n// const mapStateToProps = (state, ownProps) => {\r\n//   const { match } = ownProps;\r\n//   const { params } = match;\r\n//   const { type } = params;\r\n\r\n//   const { tasks, orders, projects } = state;\r\n\r\n//   return {\r\n//     type,\r\n//     tasksData:\r\n//       type === \"assigner\"\r\n//         ? taskCleaner(tasks.assigner, orders, projects) || []\r\n//         : type === \"assignee\"\r\n//         ? taskCleaner(tasks.assignee, orders, projects) || []\r\n//         : [],\r\n//   };\r\n// };\r\n\r\n// const mapDispatchToProps = (dispatch) => {\r\n//   return {\r\n//     submit: (submitDatas) => {\r\n//       dispatch(action.fetchCreateTask([submitDatas])).then((response) => {\r\n//         repo.fetchTasks().then((data) => {\r\n//           dispatch(action.setTasks(data));\r\n//         });\r\n//       });\r\n//     },\r\n//   };\r\n// };\r\n\r\n// export default connect(mapStateToProps, mapDispatchToProps)(Tasks);\r\nimport { Box } from \"@material-ui/core\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport * as action from \"actions\";\r\nimport FFTab from \"components/FFTab\";\r\nimport TaskList from \"components/TaskList\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport * as repo from \"js/fetch\";\r\nimport { getTaskCount } from \"js/util\";\r\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { taskCleaner } from \"js/publicFn\";\r\n\r\nconst Tasks = ({ type, tasksData, submit }) => {\r\n  const history = useHistory();\r\n  const i18n = React.useContext(LocalizeContext);\r\n  const [status, setStatus] = React.useState(\"open\");\r\n\r\n  const tabs = [\r\n    { title: i18n.ISNTAPP_TO_COMPLETE, value: \"open\" },\r\n    { title: i18n.ISNTAPP_TO_CLOSE, value: \"pending\" },\r\n    { title: i18n.ISNTAPP_CLOSED, value: \"close\" },\r\n  ];\r\n\r\n  let currentStatusTasks = [];\r\n\r\n  if (status === \"open\") {\r\n    tasksData.forEach((item) => {\r\n      if (item.Status === \"A\") {\r\n        currentStatusTasks.push(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (status === \"pending\") {\r\n    tasksData.forEach((item) => {\r\n      if (item.Status === \"D\") {\r\n        currentStatusTasks.push(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (status === \"close\") {\r\n    tasksData.forEach((item) => {\r\n      if (item.Status === \"CL\") {\r\n        currentStatusTasks.push(item);\r\n      }\r\n    });\r\n  }\r\n\r\n  currentStatusTasks.sort((a, b) =>\r\n    a.DueDate ? (a.DueDate > b.DueDate ? 1 : -1) : 1\r\n  );\r\n\r\n  const pending = getTaskCount().awaitCloseNum;\r\n  const open = getTaskCount().awaitComplateNum;\r\n  return (\r\n    <PrimaryLayout name=\"tasks\" title={i18n.INSTAPP_JOBLIST_TASKS}>\r\n      <Box\r\n        style={{\r\n          position: \"fixed\",\r\n          top: \"52px\",\r\n          width: \"100%\",\r\n          zIndex: \"10000\",\r\n        }}\r\n      >\r\n        <FFTab\r\n          tabs={tabs}\r\n          selectedTabValue={\"open\"}\r\n          onTabChange={(value) => setStatus(value)}\r\n        />\r\n        {type === \"assigner\"\r\n          ? pending > 0 && (\r\n            <span\r\n              style={{\r\n                position: \"absolute\",\r\n                top: \"0\",\r\n                left: \"55%\",\r\n                padding: \"2px 8px\",\r\n                backgroundColor: \"red\",\r\n                borderRadius: \"40px\",\r\n                color: \"white\",\r\n              }}\r\n            >\r\n              {pending}\r\n            </span>\r\n          )\r\n          : open > 0 && (\r\n            <span\r\n              style={{\r\n                position: \"absolute\",\r\n                top: \"0\",\r\n                left: \"21%\",\r\n                padding: \"2px 8px\",\r\n                backgroundColor: \"red\",\r\n                borderRadius: \"40px\",\r\n                color: \"white\",\r\n              }}\r\n            >\r\n              {open}\r\n            </span>\r\n          )}\r\n      </Box>\r\n\r\n      <Box\r\n        style={{\r\n          width: \"100%\",\r\n          padding: \"16px\",\r\n          position: \"absolute\",\r\n          top: \"32px\",\r\n          height: window.screen.height - 157 + \"px\",\r\n          overflow: \"hidden auto\",\r\n        }}\r\n      >\r\n        <TaskList\r\n          data={currentStatusTasks}\r\n          status={status}\r\n          type={type}\r\n          submit={(submitDatas) => {\r\n            submit(submitDatas);\r\n          }}\r\n        ></TaskList>\r\n      </Box>\r\n\r\n      {type === \"assigner\" && (\r\n        <Box\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          style={{\r\n            position: \"fixed\",\r\n            bottom: \"90px\",\r\n            right: \"16px\",\r\n          }}\r\n          onClick={() => {\r\n            history.push(\"/taskcreate\");\r\n          }}\r\n        >\r\n          <Fab style={{ backgroundColor: \"#cb0c33a8\", color: \"white\" }}>\r\n            <AddIcon />\r\n          </Fab>\r\n        </Box>\r\n      )}\r\n    </PrimaryLayout>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  const { match } = ownProps;\r\n  const { params } = match;\r\n  const { type } = params;\r\n\r\n  const { tasks, orders, projects } = state;\r\n\r\n  return {\r\n    type,\r\n    tasksData:\r\n      type === \"assigner\"\r\n        ? taskCleaner(tasks.assigner, orders, projects) || []\r\n        : type === \"assignee\"\r\n          ? taskCleaner(tasks.assignee, orders, projects) || []\r\n          : [],\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    submit: (submitDatas) => {\r\n      dispatch(action.fetchCreateTask([submitDatas])).then((response) => {\r\n        repo.fetchTasks().then((data) => {\r\n          dispatch(action.setTasks(data));\r\n        });\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Tasks);\r\n"]},"metadata":{},"sourceType":"module"}