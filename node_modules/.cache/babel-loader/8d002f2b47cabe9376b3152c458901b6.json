{"ast":null,"code":"import _objectSpread from\"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import*as action from\"actions\";import{saveDraftToLocal}from\"js/util\";import*as api from\"../api/index\";export var setTemplates=function setTemplates(data){return{type:\"SET_TEMPLATES\",payload:data};};export var setDocuments=function setDocuments(data){return{type:\"SET_DOCUMENT_LIST\",payload:data};};export var setPdfList=function setPdfList(data){return{type:\"SET_PDF_LIST\",payload:[data]};};export var saveDraft=function saveDraft(data,currentParams,extendParams){return function(dispatch){dispatch(action.showLoading());return api.saveDraft(data).then(function(){var result=data.form;var orderNo=data.orderNo,activityNo=data.activityNo;saveDraftToLocal(result,currentParams,_objectSpread(_objectSpread({},extendParams),{},{orderNo:orderNo,activityNo:activityNo}));}).finally(function(){dispatch(action.hideLoading());});};};export var fetchPdf=function fetchPdf(data){return function(dispatch){dispatch(action.showLoading());return api.pdfDownLoad(data).then(function(response){dispatch(action.hideLoading());var pdfurl=\"data:application/pdf;base64,\".concat(response.data.blob);return Promise.resolve(pdfurl);}).catch(function(error){if(error.code===401){dispatch(action.setAuth(null));dispatch(action.hideLoading());}});};};export var getNoConformityList=function getNoConformityList(data){return function(dispatch){dispatch(action.showLoading());return api.getNoConformityList(data).then(function(response){dispatch(action.hideLoading());return response;});};};export var getDocumentList=function getDocumentList(data){return function(dispatch){api.getDocumentList(data).then(function(response){dispatch(action.setDocuments(response.data));});};};export var getHistoryList=function getHistoryList(data){return function(dispatch){dispatch(action.showLoading());return api.getHistoryList(data).then(function(response){dispatch(action.hideLoading());return response;});};};export var closeNonConfirmityItems=function closeNonConfirmityItems(data){return function(dispatch){dispatch(action.showLoading());return api.closeNonConfirmityItems(data).then(function(response){dispatch(action.hideLoading());return response;});};};","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/actions/templates.js"],"names":["action","saveDraftToLocal","api","setTemplates","data","type","payload","setDocuments","setPdfList","saveDraft","currentParams","extendParams","dispatch","showLoading","then","result","form","orderNo","activityNo","finally","hideLoading","fetchPdf","pdfDownLoad","response","pdfurl","blob","Promise","resolve","catch","error","code","setAuth","getNoConformityList","getDocumentList","getHistoryList","closeNonConfirmityItems"],"mappings":"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","sourcesContent":["import * as action from \"actions\";\r\nimport { saveDraftToLocal } from \"js/util\";\r\nimport * as api from \"../api/index\";\r\n\r\nexport const setTemplates = (data) => ({\r\n  type: \"SET_TEMPLATES\",\r\n  payload: data,\r\n});\r\n\r\nexport const setDocuments = (data) => ({\r\n  type: \"SET_DOCUMENT_LIST\",\r\n  payload: data,\r\n});\r\n\r\nexport const setPdfList = (data) => ({\r\n  type: \"SET_PDF_LIST\",\r\n  payload: [data],\r\n});\r\n\r\nexport const saveDraft = (data, currentParams, extendParams) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api\r\n    .saveDraft(data)\r\n    .then(() => {\r\n      const result = data.form;\r\n\r\n      const { orderNo, activityNo } = data;\r\n\r\n      saveDraftToLocal(result, currentParams, {\r\n        ...extendParams,\r\n        orderNo,\r\n        activityNo,\r\n      });\r\n    })\r\n    .finally(() => {\r\n      dispatch(action.hideLoading());\r\n    });\r\n};\r\n\r\nexport const fetchPdf = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api\r\n    .pdfDownLoad(data)\r\n    .then((response) => {\r\n      dispatch(action.hideLoading());\r\n      const pdfurl = `data:application/pdf;base64,${response.data.blob}`;\r\n      return Promise.resolve(pdfurl);\r\n    })\r\n    .catch((error) => {\r\n      if (error.code === 401) {\r\n        dispatch(action.setAuth(null));\r\n        dispatch(action.hideLoading());\r\n      }\r\n    });\r\n};\r\n\r\nexport const getNoConformityList = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api.getNoConformityList(data).then((response) => {\r\n    dispatch(action.hideLoading());\r\n    return response;\r\n  });\r\n};\r\n\r\nexport const getDocumentList = (data) => (dispatch) => {\r\n  api.getDocumentList(data).then((response) => {\r\n    dispatch(action.setDocuments(response.data));\r\n  });\r\n};\r\n\r\nexport const getHistoryList = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api.getHistoryList(data).then((response) => {\r\n    dispatch(action.hideLoading());\r\n    return response;\r\n  });\r\n};\r\n\r\nexport const closeNonConfirmityItems = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api.closeNonConfirmityItems(data).then((response) => {\r\n    dispatch(action.hideLoading());\r\n    return response;\r\n  });\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}