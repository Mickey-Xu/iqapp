{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\components\\\\TemplateForm\\\\Photo\\\\index.js\";\nimport { Box, FormLabel, makeStyles, Typography } from \"@material-ui/core\";\nimport Compressor from \"compressorjs\";\nimport { LocalizeContext } from \"i18n\";\nimport { fillTextToImg } from \"js/util\";\nimport { useParams } from 'react-router-dom';\nimport React, { useRef, useState, useEffect } from 'react';\nconst useStyles = makeStyles(({\n  spacing\n}) => ({\n  btm: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    margin: spacing(1, 1, 0, 1)\n  },\n  root: {\n    display: \"grid\",\n    padding: spacing(1, 0),\n    borderBottom: \" 1px solid #e0e0e0\",\n    backgroundColor: \"#FFF\"\n  },\n  lable: {\n    margin: spacing(0, 0, 1, 0),\n    color: \"rgba(0, 0, 0, 0.87)\"\n  },\n  inputFile: {\n    width: \"0.1px\",\n    height: \"0.1px\",\n    opacity: 0,\n    overflow: \"hidden\",\n    position: \"absolute\",\n    top: \"0\",\n    zIndex: -1\n  },\n  file: {\n    height: \"160px\",\n    position: \"relative\",\n    overflow: \"hidden\",\n    textAlign: \"center\"\n  }\n}));\nexport const Photo = props => {\n  const inputRef = useRef(null);\n  const [imageSrc, setImageSrc] = useState(null);\n\n  const handleTakePhoto = async () => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      alert('您的浏览器不支持摄像头访问');\n      return;\n    }\n\n    const stream = await navigator.mediaDevices.getUserMedia({\n      video: true\n    });\n    const video = document.createElement('video');\n    video.srcObject = stream;\n    video.play();\n    const canvas = document.createElement('canvas');\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n    setImageSrc(canvas.toDataURL('image/png'));\n    stream.getTracks().forEach(track => track.stop());\n  };\n\n  const handleFileChange = event => {\n    const file = event.target.files[0];\n\n    if (file) {\n      const reader = new FileReader();\n\n      reader.onload = e => {\n        setImageSrc(e.target.result);\n      };\n\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleFileChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleTakePhoto,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, \"\\u62CD\\u7167\"), imageSrc && /*#__PURE__*/React.createElement(\"img\", {\n    src: imageSrc,\n    alt: \"Camera Captured Image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 20\n    }\n  }));\n};","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/components/TemplateForm/Photo/index.js"],"names":["Box","FormLabel","makeStyles","Typography","Compressor","LocalizeContext","fillTextToImg","useParams","React","useRef","useState","useEffect","useStyles","spacing","btm","display","justifyContent","margin","root","padding","borderBottom","backgroundColor","lable","color","inputFile","width","height","opacity","overflow","position","top","zIndex","file","textAlign","Photo","props","inputRef","imageSrc","setImageSrc","handleTakePhoto","navigator","mediaDevices","getUserMedia","alert","stream","video","document","createElement","srcObject","play","canvas","videoWidth","videoHeight","ctx","getContext","drawImage","toDataURL","getTracks","forEach","track","stop","handleFileChange","event","target","files","reader","FileReader","onload","e","result","readAsDataURL"],"mappings":"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","sourcesContent":["import { Box, FormLabel, makeStyles, Typography } from \"@material-ui/core\";\r\nimport Compressor from \"compressorjs\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport { fillTextToImg } from \"js/util\";\r\nimport { useParams } from 'react-router-dom';\r\nimport React, { useRef, useState, useEffect } from 'react';\r\n\r\nconst useStyles = makeStyles(({ spacing }) => ({\r\n  btm: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    margin: spacing(1, 1, 0, 1),\r\n  },\r\n  root: {\r\n    display: \"grid\",\r\n    padding: spacing(1, 0),\r\n    borderBottom: \" 1px solid #e0e0e0\",\r\n    backgroundColor: \"#FFF\",\r\n  },\r\n  lable: {\r\n    margin: spacing(0, 0, 1, 0),\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n  },\r\n  inputFile: {\r\n    width: \"0.1px\",\r\n    height: \"0.1px\",\r\n    opacity: 0,\r\n    overflow: \"hidden\",\r\n    position: \"absolute\",\r\n    top: \"0\",\r\n    zIndex: -1,\r\n  },\r\n  file: {\r\n    height: \"160px\",\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nexport const Photo = (props) => {\r\n  const inputRef = useRef(null);\r\n  const [imageSrc, setImageSrc] = useState(null);\r\n\r\n  const handleTakePhoto = async () => {\r\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n      alert('您的浏览器不支持摄像头访问');\r\n      return;\r\n    }\r\n\r\n    const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n    const video = document.createElement('video');\r\n    video.srcObject = stream;\r\n    video.play();\r\n\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    setImageSrc(canvas.toDataURL('image/png'));\r\n    stream.getTracks().forEach(track => track.stop());\r\n  };\r\n\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImageSrc(e.target.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input type=\"file\" onChange={handleFileChange} />\r\n      <button onClick={handleTakePhoto}>拍照</button>\r\n      {imageSrc && <img src={imageSrc} alt=\"Camera Captured Image\" />}\r\n    </div>\r\n  );\r\n  \r\n};\r\n"]},"metadata":{},"sourceType":"module"}