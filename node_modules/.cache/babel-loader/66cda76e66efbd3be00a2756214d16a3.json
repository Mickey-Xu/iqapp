{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\pages\\\\DocumentsPage\\\\index.js\";\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Grid, Typography, withStyles, Divider, Button, AccordionActions, List, Checkbox } from \"@material-ui/core\";\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\nimport ArrowRightIcon from \"@material-ui/icons/ArrowRight\";\nimport * as action from \"actions\";\nimport Model from \"components/Model\";\nimport Pdf from \"components/Pdf\";\nimport { LocalizeContext } from \"i18n\";\nimport { documentAuthorizationC } from \"js/publicFn\";\nimport { getTemplateList, showUploadButton } from \"js/util\";\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\nimport React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport Square from \"img/square.png\";\nimport Triangle from \"img/triangle.png\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport store from \"js/store\";\n\nconst getSquareORTriangle = type => {\n  let imgSource = type === \"Square\" ? Square : type === \"Triangle\" ? Triangle : \"No\";\n  return imgSource === \"No\" ? imgSource : /*#__PURE__*/React.createElement(\"img\", {\n    src: imgSource,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 43\n    }\n  });\n};\n\nconst getSpecifyStr = item => {\n  const str = \"Chinese:\";\n  var splitChar = item.split(\"||\");\n  return splitChar.find(e => {\n    return e.startsWith(str) || splitChar.findIndex(e => e.startsWith(str)) === -1 && splitChar[0];\n  }).split(\":\").slice(-1)[0];\n}; // const isShowUpLoadButon = (allowreupload, param, documents) => {\n//   if (documents.length > 0) {\n//     if (!allowreupload) {\n//       return false\n//     } else {\n//       if (getChecklistActivityNo(param)) {\n//         return false\n//       } else {\n//         return true;\n//       }\n//     }\n//   } else {\n//     return true\n//   }\n// }\n\n\nconst dynamicDisplay = (root, config, version) => {\n  if (root === \"listCard\") {\n    if (version !== \"Latest\") {\n      return false;\n    }\n\n    return config.closeEnabledInOILScreen;\n  } else if (root === \"installationChecklist\") {\n    if (version !== \"Latest\") {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nconst useStyles = makeStyles(({\n  spacing\n}) => ({\n  root: {\n    \"& .MuiAccordionSummary-content.Mui-expanded\": {\n      margin: 0\n    },\n    \"& .MuiAccordionSummary-content\": {\n      margin: 0\n    },\n    \"& .MuiAccordionSummary-root.Mui-expanded\": {\n      minHeight: \"auto\",\n      paddingTop: spacing(1)\n    }\n  }\n}));\n\nconst ListofIncongruentItems = ({\n  data,\n  getHistoryList,\n  version,\n  root,\n  nonConformityConfig,\n  activityNo,\n  closeNonConfirmityItems\n}) => {\n  const i18n = React.useContext(LocalizeContext);\n  const [expanded, setExpanded] = React.useState(true);\n  const classes = useStyles();\n\n  const handleChange = (event, newExpanded) => {\n    setExpanded(newExpanded);\n  };\n\n  let canClick = true;\n  return /*#__PURE__*/React.createElement(List, {\n    component: \"nav\",\n    \"aria-label\": \"contacts\",\n    style: {\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 10\n    }\n  }, version === \"Latest\" && /*#__PURE__*/React.createElement(Box, {\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    color: \"secondary\",\n    onClick: () => getHistoryList(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"\\u5386\\u53F2\"), dynamicDisplay(root, nonConformityConfig[activityNo], version) && data.nonConformities.find(item => item.nonConformityItems.length > 0) && /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    color: \"secondary\",\n    onClick: () => {\n      if (!canClick) {\n        alert('请稍候再试！');\n        return;\n      }\n\n      ;\n      setTimeout(() => {\n        canClick = true;\n      }, 2000);\n      canClick = false;\n      closeNonConfirmityItems(data);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, i18n.Close_NONCONFORMANCE_ITEMS)), /*#__PURE__*/React.createElement(Accordion, {\n    className: classes.root,\n    style: {\n      margin: \"0 16px\"\n    },\n    expanded: expanded,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AccordionSummary, {\n    style: {\n      margin: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ArrowRightIcon, {\n    fontSize: \"large\",\n    style: expanded ? {\n      transform: \"rotate(90deg)\"\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, version === \"Latest\" ? `当前版本` : `版本：${version}`)), /*#__PURE__*/React.createElement(AccordionDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, data.nonConformities.map((key, index) => {\n    return /*#__PURE__*/React.createElement(Box, {\n      key: index,\n      ml: 2,\n      mr: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      style: {\n        fontWeight: 600\n      },\n      gutterBottom: true,\n      variant: \"body2\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, key.documentName), /*#__PURE__*/React.createElement(Box, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, key.nonConformityItems.map((item, index) => {\n      return /*#__PURE__*/React.createElement(Grid, {\n        key: index,\n        container: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"caption\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 27\n        }\n      }, getSpecifyStr(item.itemName))), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontWeight: 800,\n          paddingLeft: 24,\n          marginBottom: 0,\n          marginTop: 8\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 27\n        }\n      }, \" \", getSquareORTriangle(item.questionType))), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 2,\n        style: {\n          textAlign: \"end\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }\n      }, dynamicDisplay(root, nonConformityConfig[activityNo], version) && /*#__PURE__*/React.createElement(Checkbox, {\n        style: {\n          padding: 4\n        },\n        color: \"default\",\n        inputProps: {\n          'aria-label': 'checkbox with default color'\n        },\n        onChange: event => {\n          let checkedVlaue = event.target.checked;\n          item[\"itemValue\"] = checkedVlaue ? \"yes\" : \"no\";\n          item[\"activityNo\"] = key.activityNo;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 29\n        }\n      })));\n    })));\n  })))));\n};\n\nconst Template = withStyles(({\n  spacing\n}) => ({\n  root: {\n    padding: 0\n  },\n  add: {\n    marginLeft: spacing(5)\n  },\n  navIcon: {\n    transform: \"rotate(90deg)\"\n  },\n  documentName: {\n    marginLeft: spacing(1)\n  }\n}))(({\n  classes,\n  template: {\n    activityNo,\n    documentNo,\n    documentPart,\n    mandDoc,\n    documentDescription,\n    productFamily,\n    productLine,\n    language\n  },\n  orderNo,\n  projectNumber,\n  fetchPdf,\n  documents,\n  foe,\n  region,\n  branch,\n  DisableTheEntranceroot,\n  canUploadDoc,\n  fetchNoConformityList,\n  root,\n  i18n,\n  fetchHistoryList,\n  nonConformityConfig,\n  closeNonConfirmity\n}) => {\n  const [expanded, setExpanded] = React.useState(true);\n  const [open, setOpen] = React.useState(false);\n  const [modelContent, setModelContent] = React.useState();\n  const [title, setTitle] = React.useState(documentDescription);\n  const [data, setData] = React.useState([]);\n  useEffect(() => {\n    setModelContent(data.map((item, index) => /*#__PURE__*/React.createElement(ListofIncongruentItems, {\n      key: index,\n      data: item,\n      getHistoryList: getHistoryList,\n      version: item === null || item === void 0 ? void 0 : item.versionIdentifier,\n      root: root,\n      nonConformityConfig: nonConformityConfig,\n      activityNo: activityNo,\n      closeNonConfirmityItems: closeNonConfirmityItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }\n    }))); // eslint-disable-next-line\n  }, [data]);\n\n  const handleClickOpen = name => {\n    const data = {\n      ProjectNo: projectNumber,\n      OrderNo: orderNo,\n      ActivityNo: activityNo,\n      DocumentName: name,\n      foe,\n      region,\n      branch\n    };\n    root === \"installationChecklist\" && delete data.ActivityNo;\n    fetchPdf(data).then(url => {\n      setOpen(true);\n      setModelContent( /*#__PURE__*/React.createElement(Pdf, {\n        filePath: url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 25\n        }\n      }));\n    });\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleChange = (event, newExpanded) => {\n    setExpanded(newExpanded);\n  };\n\n  const getHistoryList = () => {\n    const param = {\n      ProjectNo: projectNumber,\n      OrderNo: orderNo,\n      ActivityNo: root === \"listCard\" ? activityNo : \"\",\n      Description: root === \"listCard\" ? documentDescription : \"\",\n      foe,\n      region,\n      branch\n    };\n    fetchHistoryList(param).then(res => {\n      const newData = res.data.map((item, index) => {\n        return {\n          nonConformities: item.nonConformities,\n          versionIdentifier: res.data.length - index\n        };\n      });\n      const historyData = [...data, ...newData];\n      const result = Array.from(new Set(historyData.map(JSON.stringify))).map(JSON.parse);\n      setData(result);\n    });\n  };\n\n  const closeNonConfirmityItems = checkContent => {\n    var _checkContent$nonConf;\n\n    const filteredData = checkContent === null || checkContent === void 0 ? void 0 : (_checkContent$nonConf = checkContent.nonConformities) === null || _checkContent$nonConf === void 0 ? void 0 : _checkContent$nonConf.filter(item => {\n      return item.nonConformityItems.some(subItem => subItem.itemValue === \"yes\");\n    });\n    let checkedData = filteredData.map(item => {\n      return {\n        documentInfo: {\n          projectNo: projectNumber,\n          orderNo: orderNo,\n          activityNo: item.activityNo,\n          description: item.documentName,\n          foe,\n          region,\n          branch\n        },\n        items: item.nonConformityItems\n      };\n    });\n\n    if (checkedData.length < 1) {\n      alert(\"至少要选择一个不符合项\");\n      return false;\n    }\n\n    closeNonConfirmity(checkedData).then(res => {\n      setOpen(false);\n    });\n  };\n\n  const getNoConformityList = param => {\n    setTitle(i18n.NONCONFORMITY_LIST);\n    fetchNoConformityList(param).then(res => {\n      setOpen(true);\n      res.data[\"versionIdentifier\"] = \"Latest\";\n      setData(res.data);\n    });\n  };\n\n  const showButton = showUploadButton() ? showUploadButton() && DisableTheEntranceroot && canUploadDoc : DisableTheEntranceroot && canUploadDoc;\n  console.log(store.getState());\n  const history = useHistory();\n  return /*#__PURE__*/React.createElement(Accordion, {\n    expanded: expanded,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AccordionSummary, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ArrowRightIcon, {\n    className: expanded ? classes.navIcon : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  }), mandDoc === \"X\" ? /*#__PURE__*/React.createElement(Typography, {\n    color: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 13\n    }\n  }, documentDescription, \"*\") : /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 13\n    }\n  }, documentDescription), showButton && /*#__PURE__*/React.createElement(AddCircleOutlineIcon, {\n    color: \"error\",\n    className: classes.add,\n    onClick: event => {\n      event.stopPropagation();\n      history.push(`/template/${documentNo}/${documentPart}/${activityNo}/${orderNo}/${projectNumber}/${productFamily}/${productLine}/${language}`);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(AccordionDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 11\n    }\n  }, documents[0] && (root === \"installationChecklist\" ? documents : Array.from(new Set(documents)).filter(item => {\n    return item.name.indexOf(documentDescription) > -1 && item.name === documentDescription + \".pdf\";\n  })).map((item, index) => {\n    return /*#__PURE__*/React.createElement(Grid, {\n      className: classes.documentName,\n      key: index,\n      item: true,\n      xs: 12,\n      onClick: () => {\n        setTitle(documentDescription);\n        handleClickOpen(item.name);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 19\n      }\n    }, item.name);\n  }))), documents.length > 0 && /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(AccordionActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    color: \"secondary\",\n    onClick: () => {\n      const param = {\n        ProjectNo: projectNumber,\n        OrderNo: orderNo,\n        ActivityNo: activityNo,\n        Description: documentDescription,\n        foe,\n        region,\n        branch\n      };\n      root === \"installationChecklist\" && delete param.ActivityNo;\n      getNoConformityList(param);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 15\n    }\n  }, i18n.VIEW_NONCONFORMANCE_ITEMS))), /*#__PURE__*/React.createElement(Model, {\n    open: open,\n    title: title,\n    handleClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 9\n    }\n  }, modelContent));\n});\nconst DocumentsPage = withStyles(({\n  spacing\n}) => ({\n  root: {\n    margin: spacing(2)\n  },\n  content: {\n    marginBottom: spacing(5)\n  },\n  title: {\n    lineHeight: \"2.5\"\n  }\n}))(({\n  descriptionShort,\n  classes,\n  data,\n  orderNo,\n  projectNumber,\n  fetchPdf,\n  documents,\n  foe,\n  region,\n  branch,\n  DisableTheEntranceroot,\n  canUploadDoc,\n  root,\n  fetchNoConformityList,\n  getHistoryList,\n  nonConformityConfig,\n  closeNonConfirmityItems\n}) => {\n  const i18n = React.useContext(LocalizeContext);\n  const [pageDescription, setPageDescription] = React.useState(i18n.INSTALLATION_ACTIVITY_DOCUMENT);\n  const pageSource = root === \"minCard\" ? \"all\" : root === \"listCard\" ? \"pending\" : \"basic\";\n  useEffect(() => {\n    if (root === \"installationChecklist\") setPageDescription(i18n.INSTALLATION_CHECKLIST);\n  }, [root, i18n]);\n  return /*#__PURE__*/React.createElement(PrimaryLayout, {\n    name: \"activity Document\",\n    root: pageSource,\n    title: pageDescription,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    fontSize: \"h6.fontSize\",\n    fontWeight: \"fontWeightMedium\",\n    my: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 11\n    }\n  }, `${orderNo}`), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 11\n    }\n  }, descriptionShort), /*#__PURE__*/React.createElement(Box, {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 11\n    }\n  }, data.map((item, index) => {\n    return /*#__PURE__*/React.createElement(Template, {\n      template: item,\n      key: index,\n      orderNo: orderNo,\n      projectNumber: projectNumber,\n      fetchPdf: fetchPdf,\n      documents: documents,\n      foe: foe,\n      region: region,\n      branch: branch,\n      DisableTheEntranceroot: DisableTheEntranceroot,\n      canUploadDoc: canUploadDoc,\n      fetchNoConformityList: fetchNoConformityList,\n      root: root,\n      i18n: i18n,\n      fetchHistoryList: getHistoryList,\n      nonConformityConfig: nonConformityConfig,\n      closeNonConfirmity: closeNonConfirmityItems,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 17\n      }\n    });\n  }))));\n});\nexport default connect(({\n  activities,\n  orderActivities,\n  documentList,\n  templates,\n  orders,\n  auth,\n  nonConformityConfig\n}, {\n  match: {\n    params: {\n      activityNo,\n      orderNo,\n      productFamily,\n      root\n    }\n  }\n}) => {\n  var _orders$orderNo, _orders$orderNo2, _orders$orderNo3, _documentList$project, _documentList$project2;\n\n  const projectNumber = (_orders$orderNo = orders[orderNo]) === null || _orders$orderNo === void 0 ? void 0 : _orders$orderNo.projectNumber;\n  const productCategory = (_orders$orderNo2 = orders[orderNo]) === null || _orders$orderNo2 === void 0 ? void 0 : _orders$orderNo2.productCategory;\n  const productLine = (_orders$orderNo3 = orders[orderNo]) === null || _orders$orderNo3 === void 0 ? void 0 : _orders$orderNo3.productLine;\n  const templatesData = templates[activityNo] || [];\n  let order = orders === null || orders === void 0 ? void 0 : orders[orderNo];\n  const documents = [];\n  const documentsItem = (_documentList$project = documentList[projectNumber]) === null || _documentList$project === void 0 ? void 0 : (_documentList$project2 = _documentList$project[orderNo]) === null || _documentList$project2 === void 0 ? void 0 : _documentList$project2[activityNo];\n  const data = getTemplateList(templatesData, productLine, productFamily, productCategory);\n  const description = data.map(item => {\n    return item.documentDescription;\n  });\n  description.forEach(item => {\n    return documentsItem && documentsItem.filter(ele => ele.name.indexOf(item) > -1 && documents.push(ele)) || [];\n  });\n  const docAuthActivityNos = documentAuthorizationC(orderActivities, orderNo, auth.activityAuth, auth.roles[0]);\n  const canUploadDoc = docAuthActivityNos.includes(activityNo);\n  const {\n    descriptionShort,\n    descriptionShort14\n  } = activities[activityNo] || {};\n  const title = orderActivities[orderNo + \"-7030\"] ? descriptionShort14 ? descriptionShort14 : descriptionShort : descriptionShort;\n\n  if (root === \"installationChecklist\") {\n    var _documentList$project3, _documentList$project4;\n\n    const template = {\n      mandDoc: \"Y\",\n      documentDescription: `安装检查清单`\n    };\n    data.push(template);\n    documents.push(documentList === null || documentList === void 0 ? void 0 : (_documentList$project3 = documentList[projectNumber]) === null || _documentList$project3 === void 0 ? void 0 : (_documentList$project4 = _documentList$project3[orderNo]) === null || _documentList$project4 === void 0 ? void 0 : _documentList$project4[activityNo][0]);\n  }\n\n  return {\n    data: data,\n    descriptionShort: title,\n    orderNo,\n    projectNumber,\n    documents,\n    foe: order === null || order === void 0 ? void 0 : order.fo,\n    region: order === null || order === void 0 ? void 0 : order.region,\n    branch: order === null || order === void 0 ? void 0 : order.prctr,\n    DisableTheEntranceroot: root === \"listCard\",\n    canUploadDoc,\n    root: root,\n    nonConformityConfig\n  };\n}, dispatch => {\n  return {\n    fetchPdf: data => {\n      return dispatch(action.fetchPdf(data));\n    },\n    fetchNoConformityList: data => {\n      return dispatch(action.getNoConformityList(data));\n    },\n    getHistoryList: data => {\n      return dispatch(action.getHistoryList(data));\n    },\n    closeNonConfirmityItems: data => {\n      return dispatch(action.closeNonConfirmityItems(data));\n    }\n  };\n})(DocumentsPage);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/DocumentsPage/index.js"],"names":["Accordion","AccordionDetails","AccordionSummary","Box","Grid","Typography","withStyles","Divider","Button","AccordionActions","List","Checkbox","AddCircleOutlineIcon","ArrowRightIcon","action","Model","Pdf","LocalizeContext","documentAuthorizationC","getTemplateList","showUploadButton","PrimaryLayout","React","useEffect","connect","useHistory","Square","Triangle","makeStyles","store","getSquareORTriangle","type","imgSource","getSpecifyStr","item","str","splitChar","split","find","e","startsWith","findIndex","slice","dynamicDisplay","root","config","version","closeEnabledInOILScreen","useStyles","spacing","margin","minHeight","paddingTop","ListofIncongruentItems","data","getHistoryList","nonConformityConfig","activityNo","closeNonConfirmityItems","i18n","useContext","expanded","setExpanded","useState","classes","handleChange","event","newExpanded","canClick","marginBottom","display","justifyContent","nonConformities","nonConformityItems","length","alert","setTimeout","Close_NONCONFORMANCE_ITEMS","transform","width","map","key","index","fontWeight","documentName","itemName","paddingLeft","marginTop","questionType","textAlign","padding","checkedVlaue","target","checked","Template","add","marginLeft","navIcon","template","documentNo","documentPart","mandDoc","documentDescription","productFamily","productLine","language","orderNo","projectNumber","fetchPdf","documents","foe","region","branch","DisableTheEntranceroot","canUploadDoc","fetchNoConformityList","fetchHistoryList","closeNonConfirmity","open","setOpen","modelContent","setModelContent","title","setTitle","setData","versionIdentifier","handleClickOpen","name","ProjectNo","OrderNo","ActivityNo","DocumentName","then","url","handleClose","param","Description","res","newData","historyData","result","Array","from","Set","JSON","stringify","parse","checkContent","filteredData","filter","some","subItem","itemValue","checkedData","documentInfo","projectNo","description","items","getNoConformityList","NONCONFORMITY_LIST","showButton","console","log","getState","history","stopPropagation","push","indexOf","VIEW_NONCONFORMANCE_ITEMS","DocumentsPage","content","lineHeight","descriptionShort","pageDescription","setPageDescription","INSTALLATION_ACTIVITY_DOCUMENT","pageSource","INSTALLATION_CHECKLIST","activities","orderActivities","documentList","templates","orders","auth","match","params","productCategory","templatesData","order","documentsItem","forEach","ele","docAuthActivityNos","activityAuth","roles","includes","descriptionShort14","fo","prctr","dispatch"],"mappings":";AAAA,SACEA,SADF,EAEEC,gBAFF,EAGEC,gBAHF,EAIEC,GAJF,EAKEC,IALF,EAMEC,UANF,EAOEC,UAPF,EAQEC,OARF,EASEC,MATF,EAUEC,gBAVF,EAWEC,IAXF,EAYEC,QAZF,QAaO,mBAbP;AAcA,OAAOC,oBAAP,MAAiC,qCAAjC;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAO,KAAKC,MAAZ,MAAwB,SAAxB;AACA,OAAOC,KAAP,MAAkB,kBAAlB;AACA,OAAOC,GAAP,MAAgB,gBAAhB;AACA,SAASC,eAAT,QAAgC,MAAhC;AACA,SAASC,sBAAT,QAAuC,aAAvC;AACA,SAASC,eAAT,EAA2BC,gBAA3B,QAAmD,SAAnD;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,KAAP,MAAkB,UAAlB;;AAGA,MAAMC,mBAAmB,GAAIC,IAAD,IAAU;AACpC,MAAIC,SAAS,GAAGD,IAAI,KAAK,QAAT,GAAoBL,MAApB,GAA6BK,IAAI,KAAK,UAAT,GAAsBJ,QAAtB,GAAiC,IAA9E;AACA,SAAOK,SAAS,KAAK,IAAd,GAAqBA,SAArB,gBAAiC;AAAK,IAAA,GAAG,EAAEA,SAAV;AAAqB,IAAA,GAAG,EAAC,EAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAxC;AACD,CAHD;;AAKA,MAAMC,aAAa,GAAIC,IAAD,IAAU;AAC9B,QAAMC,GAAG,GAAG,UAAZ;AACA,MAAIC,SAAS,GAAGF,IAAI,CAACG,KAAL,CAAW,IAAX,CAAhB;AAEA,SAAOD,SAAS,CACbE,IADI,CACEC,CAAD,IAAO;AACX,WACEA,CAAC,CAACC,UAAF,CAAaL,GAAb,KACCC,SAAS,CAACK,SAAV,CAAqBF,CAAD,IAAOA,CAAC,CAACC,UAAF,CAAaL,GAAb,CAA3B,MAAkD,CAAC,CAAnD,IAAwDC,SAAS,CAAC,CAAD,CAFpE;AAID,GANI,EAOJC,KAPI,CAOE,GAPF,EAQJK,KARI,CAQE,CAAC,CARH,EAQM,CARN,CAAP;AASD,CAbD,C,CAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMC,cAAc,GAAG,CAACC,IAAD,EAAOC,MAAP,EAAeC,OAAf,KAA2B;AAChD,MAAIF,IAAI,KAAK,UAAb,EAAyB;AACvB,QAAIE,OAAO,KAAK,QAAhB,EAA0B;AACxB,aAAO,KAAP;AACD;;AACD,WAAOD,MAAM,CAACE,uBAAd;AACD,GALD,MAKO,IAAIH,IAAI,KAAK,uBAAb,EAAsC;AAC3C,QAAIE,OAAO,KAAK,QAAhB,EAA0B;AACxB,aAAO,KAAP;AACD,KAFD,MAEO;AACL,aAAO,IAAP;AACD;AAEF;;AACD,SAAO,KAAP;AACD,CAfD;;AAiBA,MAAME,SAAS,GAAGpB,UAAU,CAAC,CAAC;AAAEqB,EAAAA;AAAF,CAAD,MAAkB;AAC7CL,EAAAA,IAAI,EAAE;AACJ,mDAA+C;AAC7CM,MAAAA,MAAM,EAAE;AADqC,KAD3C;AAIJ,sCAAkC;AAChCA,MAAAA,MAAM,EAAE;AADwB,KAJ9B;AAOJ,gDAA4C;AAC1CC,MAAAA,SAAS,EAAE,MAD+B;AAE1CC,MAAAA,UAAU,EAAEH,OAAO,CAAC,CAAD;AAFuB;AAPxC;AADuC,CAAlB,CAAD,CAA5B;;AAgBA,MAAMI,sBAAsB,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,cAAR;AAAwBT,EAAAA,OAAxB;AAAiCF,EAAAA,IAAjC;AAAuCY,EAAAA,mBAAvC;AAA4DC,EAAAA,UAA5D;AAAwEC,EAAAA;AAAxE,CAAD,KAAuG;AACpI,QAAMC,IAAI,GAAGrC,KAAK,CAACsC,UAAN,CAAiB3C,eAAjB,CAAb;AACA,QAAM,CAAC4C,QAAD,EAAWC,WAAX,IAA0BxC,KAAK,CAACyC,QAAN,CAAe,IAAf,CAAhC;AAEA,QAAMC,OAAO,GAAGhB,SAAS,EAAzB;;AAEA,QAAMiB,YAAY,GAAG,CAACC,KAAD,EAAQC,WAAR,KAAwB;AAC3CL,IAAAA,WAAW,CAACK,WAAD,CAAX;AACD,GAFD;;AAIA,MAAIC,QAAQ,GAAG,IAAf;AAEA,sBAAO,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,KAAhB;AAAsB,kBAAW,UAAjC;AAA4C,IAAA,KAAK,EAAE;AAAEC,MAAAA,YAAY,EAAE;AAAhB,KAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACJvB,OAAO,KAAK,QAAZ,iBACC,oBAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAAEwB,MAAAA,OAAO,EAAE,MAAX;AAAmBC,MAAAA,cAAc,EAAE;AAAnC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,OAAb;AAAqB,IAAA,KAAK,EAAC,WAA3B;AAAuC,IAAA,OAAO,EAAE,MAAMhB,cAAc,EAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAEGZ,cAAc,CAACC,IAAD,EAAOY,mBAAmB,CAACC,UAAD,CAA1B,EAAwCX,OAAxC,CAAd,IAAkEQ,IAAI,CAACkB,eAAL,CAAqBlC,IAArB,CAA0BJ,IAAI,IAAIA,IAAI,CAACuC,kBAAL,CAAwBC,MAAxB,GAAiC,CAAnE,CAAlE,iBACC,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,OAAb;AAAqB,IAAA,KAAK,EAAC,WAA3B;AAAuC,IAAA,OAAO,EAAE,MAEhD;AACE,UAAI,CAACN,QAAL,EAAe;AACbO,QAAAA,KAAK,CAAC,QAAD,CAAL;AACA;AACD;;AAAA;AAEDC,MAAAA,UAAU,CAAC,MAAM;AACfR,QAAAA,QAAQ,GAAG,IAAX;AACD,OAFS,EAEP,IAFO,CAAV;AAIAA,MAAAA,QAAQ,GAAG,KAAX;AACAV,MAAAA,uBAAuB,CAACJ,IAAD,CAAvB;AACD,KAdD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAgBGK,IAAI,CAACkB,0BAhBR,CAHJ,CAFG,eAyBL,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAEb,OAAO,CAACpB,IAA9B;AAAoC,IAAA,KAAK,EAAE;AAAEM,MAAAA,MAAM,EAAE;AAAV,KAA3C;AAAiE,IAAA,QAAQ,EAAEW,QAA3E;AAAqF,IAAA,QAAQ,EAAEI,YAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AAAkB,IAAA,KAAK,EAAE;AAAEf,MAAAA,MAAM,EAAE;AAAV,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAgB,IAAA,QAAQ,EAAC,OAAzB;AAAiC,IAAA,KAAK,EAAEW,QAAQ,GAAG;AAAEiB,MAAAA,SAAS,EAAE;AAAb,KAAH,GAAoC,EAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0BhC,OAAO,KAAK,QAAZ,GAAwB,MAAxB,GAAiC,MAAKA,OAAQ,EAAxE,CAFF,CADF,eAKE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,KAAK,EAAE;AAAEiC,MAAAA,KAAK,EAAE;AAAT,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGzB,IAAI,CAACkB,eAAL,CAAqBQ,GAArB,CAAyB,CAACC,GAAD,EAAMC,KAAN,KAAgB;AACxC,wBACE,oBAAC,GAAD;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,EAAE,EAAE,CAArB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AACE,MAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE;AAAd,OADT;AAEE,MAAA,YAAY,MAFd;AAGE,MAAA,OAAO,EAAC,OAHV;AAIE,MAAA,SAAS,EAAC,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMGF,GAAG,CAACG,YANP,CADF,eASE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGH,GAAG,CAACR,kBAAJ,CAAuBO,GAAvB,CAA2B,CAAC9C,IAAD,EAAOgD,KAAP,KAAiB;AAC3C,0BACE,oBAAC,IAAD;AAAM,QAAA,GAAG,EAAEA,KAAX;AAAkB,QAAA,SAAS,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,UAAD;AAAY,QAAA,OAAO,EAAC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA+BjD,aAAa,CAACC,IAAI,CAACmD,QAAN,CAA5C,CADF,CADF,eAIE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAG,QAAA,KAAK,EAAE;AAAEF,UAAAA,UAAU,EAAE,GAAd;AAAmBG,UAAAA,WAAW,EAAE,EAAhC;AAAoCjB,UAAAA,YAAY,EAAE,CAAlD;AAAqDkB,UAAAA,SAAS,EAAE;AAAhE,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAiFzD,mBAAmB,CAACI,IAAI,CAACsD,YAAN,CAApG,CADF,CAJF,eAOE,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAkB,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG9C,cAAc,CAACC,IAAD,EAAOY,mBAAmB,CAACC,UAAD,CAA1B,EAAwCX,OAAxC,CAAd,iBACC,oBAAC,QAAD;AACE,QAAA,KAAK,EAAE;AAAE4C,UAAAA,OAAO,EAAE;AAAX,SADT;AAEE,QAAA,KAAK,EAAC,SAFR;AAGE,QAAA,UAAU,EAAE;AAAE,wBAAc;AAAhB,SAHd;AAIE,QAAA,QAAQ,EAAGxB,KAAD,IAAW;AACnB,cAAIyB,YAAY,GAAGzB,KAAK,CAAC0B,MAAN,CAAaC,OAAhC;AACA3D,UAAAA,IAAI,CAAC,WAAD,CAAJ,GAAoByD,YAAY,GAAG,KAAH,GAAW,IAA3C;AACAzD,UAAAA,IAAI,CAAC,YAAD,CAAJ,GAAqB+C,GAAG,CAACxB,UAAzB;AAED,SATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAPF,CADF;AAyBD,KA1BA,CADH,CATF,CADF;AAyCD,GA1CA,CADH,CADF,CALF,CAzBK,CAAP;AAgFD,CA5FD;;AA+FA,MAAMqC,QAAQ,GAAGxF,UAAU,CAAC,CAAC;AAAE2C,EAAAA;AAAF,CAAD,MAAkB;AAC5CL,EAAAA,IAAI,EAAE;AACJ8C,IAAAA,OAAO,EAAE;AADL,GADsC;AAI5CK,EAAAA,GAAG,EAAE;AACHC,IAAAA,UAAU,EAAE/C,OAAO,CAAC,CAAD;AADhB,GAJuC;AAO5CgD,EAAAA,OAAO,EAAE;AACPnB,IAAAA,SAAS,EAAE;AADJ,GAPmC;AAU5CM,EAAAA,YAAY,EAAE;AACZY,IAAAA,UAAU,EAAE/C,OAAO,CAAC,CAAD;AADP;AAV8B,CAAlB,CAAD,CAAV,CAcf,CAAC;AACCe,EAAAA,OADD;AAECkC,EAAAA,QAAQ,EAAE;AACRzC,IAAAA,UADQ;AAER0C,IAAAA,UAFQ;AAGRC,IAAAA,YAHQ;AAIRC,IAAAA,OAJQ;AAKRC,IAAAA,mBALQ;AAMRC,IAAAA,aANQ;AAORC,IAAAA,WAPQ;AAQRC,IAAAA;AARQ,GAFX;AAYCC,EAAAA,OAZD;AAaCC,EAAAA,aAbD;AAcCC,EAAAA,QAdD;AAeCC,EAAAA,SAfD;AAgBCC,EAAAA,GAhBD;AAiBCC,EAAAA,MAjBD;AAkBCC,EAAAA,MAlBD;AAmBCC,EAAAA,sBAnBD;AAoBCC,EAAAA,YApBD;AAqBCC,EAAAA,qBArBD;AAsBCvE,EAAAA,IAtBD;AAuBCe,EAAAA,IAvBD;AAwBCyD,EAAAA,gBAxBD;AAyBC5D,EAAAA,mBAzBD;AA0BC6D,EAAAA;AA1BD,CAAD,KA2BM;AACJ,QAAM,CAACxD,QAAD,EAAWC,WAAX,IAA0BxC,KAAK,CAACyC,QAAN,CAAe,IAAf,CAAhC;AACA,QAAM,CAACuD,IAAD,EAAOC,OAAP,IAAkBjG,KAAK,CAACyC,QAAN,CAAe,KAAf,CAAxB;AACA,QAAM,CAACyD,YAAD,EAAeC,eAAf,IAAkCnG,KAAK,CAACyC,QAAN,EAAxC;AACA,QAAM,CAAC2D,KAAD,EAAQC,QAAR,IAAoBrG,KAAK,CAACyC,QAAN,CAAeuC,mBAAf,CAA1B;AACA,QAAM,CAAChD,IAAD,EAAOsE,OAAP,IAAkBtG,KAAK,CAACyC,QAAN,CAAe,EAAf,CAAxB;AACAxC,EAAAA,SAAS,CAAC,MAAM;AACdkG,IAAAA,eAAe,CACbnE,IAAI,CAAC0B,GAAL,CAAS,CAAC9C,IAAD,EAAOgD,KAAP,kBACP,oBAAE,sBAAF;AACE,MAAA,GAAG,EAAEA,KADP;AAEE,MAAA,IAAI,EAAEhD,IAFR;AAGE,MAAA,cAAc,EAAEqB,cAHlB;AAIE,MAAA,OAAO,EAAErB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAE2F,iBAJjB;AAKE,MAAA,IAAI,EAAEjF,IALR;AAME,MAAA,mBAAmB,EAAEY,mBANvB;AAOE,MAAA,UAAU,EAAEC,UAPd;AAQE,MAAA,uBAAuB,EAAEC,uBAR3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADa,CAAf,CADc,CAad;AACD,GAdQ,EAcN,CAACJ,IAAD,CAdM,CAAT;;AAiBA,QAAMwE,eAAe,GAAIC,IAAD,IAAU;AAChC,UAAMzE,IAAI,GAAG;AACX0E,MAAAA,SAAS,EAAErB,aADA;AAEXsB,MAAAA,OAAO,EAAEvB,OAFE;AAGXwB,MAAAA,UAAU,EAAEzE,UAHD;AAIX0E,MAAAA,YAAY,EAAEJ,IAJH;AAKXjB,MAAAA,GALW;AAMXC,MAAAA,MANW;AAOXC,MAAAA;AAPW,KAAb;AASApE,IAAAA,IAAI,KAAK,uBAAT,IAAoC,OAAOU,IAAI,CAAC4E,UAAhD;AACAtB,IAAAA,QAAQ,CAACtD,IAAD,CAAR,CAAe8E,IAAf,CAAqBC,GAAD,IAAS;AAC3Bd,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAE,MAAAA,eAAe,eAAC,oBAAC,GAAD;AAAK,QAAA,QAAQ,EAAEY,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAD,CAAf;AACD,KAHD;AAID,GAfD;;AAiBA,QAAMC,WAAW,GAAG,MAAM;AACxBf,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,QAAMtD,YAAY,GAAG,CAACC,KAAD,EAAQC,WAAR,KAAwB;AAC3CL,IAAAA,WAAW,CAACK,WAAD,CAAX;AACD,GAFD;;AAIA,QAAMZ,cAAc,GAAG,MAAM;AAC3B,UAAMgF,KAAK,GAAG;AACZP,MAAAA,SAAS,EAAErB,aADC;AAEZsB,MAAAA,OAAO,EAAEvB,OAFG;AAGZwB,MAAAA,UAAU,EAAEtF,IAAI,KAAK,UAAT,GAAsBa,UAAtB,GAAmC,EAHnC;AAIZ+E,MAAAA,WAAW,EAAE5F,IAAI,KAAK,UAAT,GAAsB0D,mBAAtB,GAA4C,EAJ7C;AAKZQ,MAAAA,GALY;AAMZC,MAAAA,MANY;AAOZC,MAAAA;AAPY,KAAd;AASAI,IAAAA,gBAAgB,CAACmB,KAAD,CAAhB,CAAwBH,IAAxB,CAA8BK,GAAD,IAAS;AACpC,YAAMC,OAAO,GAAGD,GAAG,CAACnF,IAAJ,CAAS0B,GAAT,CAAa,CAAC9C,IAAD,EAAOgD,KAAP,KAAiB;AAC5C,eAAO;AACLV,UAAAA,eAAe,EAAEtC,IAAI,CAACsC,eADjB;AAELqD,UAAAA,iBAAiB,EAAEY,GAAG,CAACnF,IAAJ,CAASoB,MAAT,GAAkBQ;AAFhC,SAAP;AAID,OALe,CAAhB;AAMA,YAAMyD,WAAW,GAAG,CAClB,GAAGrF,IADe,EACT,GAAGoF,OADM,CAApB;AAGA,YAAME,MAAM,GAAGC,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQJ,WAAW,CAAC3D,GAAZ,CAAgBgE,IAAI,CAACC,SAArB,CAAR,CAAX,EAAqDjE,GAArD,CAAyDgE,IAAI,CAACE,KAA9D,CAAf;AACAtB,MAAAA,OAAO,CAACgB,MAAD,CAAP;AACD,KAZD;AAaD,GAvBD;;AAyBA,QAAMlF,uBAAuB,GAAIyF,YAAD,IAAkB;AAAA;;AAEhD,UAAMC,YAAY,GAAGD,YAAH,aAAGA,YAAH,gDAAGA,YAAY,CAAE3E,eAAjB,0DAAG,sBAA+B6E,MAA/B,CAAsCnH,IAAI,IAAI;AACjE,aAAOA,IAAI,CAACuC,kBAAL,CAAwB6E,IAAxB,CAA6BC,OAAO,IAAIA,OAAO,CAACC,SAAR,KAAsB,KAA9D,CAAP;AACD,KAFoB,CAArB;AAIA,QAAIC,WAAW,GAAGL,YAAY,CAACpE,GAAb,CAAkB9C,IAAD,IAAU;AAC3C,aAAO;AACLwH,QAAAA,YAAY,EAAE;AACZC,UAAAA,SAAS,EAAEhD,aADC;AAEZD,UAAAA,OAAO,EAAEA,OAFG;AAGZjD,UAAAA,UAAU,EAAEvB,IAAI,CAACuB,UAHL;AAIZmG,UAAAA,WAAW,EAAE1H,IAAI,CAACkD,YAJN;AAKZ0B,UAAAA,GALY;AAMZC,UAAAA,MANY;AAOZC,UAAAA;AAPY,SADT;AAUL6C,QAAAA,KAAK,EAAE3H,IAAI,CAACuC;AAVP,OAAP;AAYD,KAbiB,CAAlB;;AAeA,QAAIgF,WAAW,CAAC/E,MAAZ,GAAqB,CAAzB,EAA4B;AAC1BC,MAAAA,KAAK,CAAC,aAAD,CAAL;AACA,aAAO,KAAP;AACD;;AACD0C,IAAAA,kBAAkB,CAACoC,WAAD,CAAlB,CAAgCrB,IAAhC,CAAsCK,GAAD,IAAS;AAC5ClB,MAAAA,OAAO,CAAC,KAAD,CAAP;AACD,KAFD;AAGD,GA5BD;;AA+BA,QAAMuC,mBAAmB,GAAIvB,KAAD,IAAW;AACrCZ,IAAAA,QAAQ,CAAChE,IAAI,CAACoG,kBAAN,CAAR;AACA5C,IAAAA,qBAAqB,CAACoB,KAAD,CAArB,CAA6BH,IAA7B,CAAmCK,GAAD,IAAS;AACzClB,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAkB,MAAAA,GAAG,CAACnF,IAAJ,CAAS,mBAAT,IAAgC,QAAhC;AACAsE,MAAAA,OAAO,CAACa,GAAG,CAACnF,IAAL,CAAP;AACD,KAJD;AAKD,GAPD;;AAQA,QAAM0G,UAAU,GAAG5I,gBAAgB,KAAMA,gBAAgB,MAAM6F,sBAAtB,IAAgDC,YAAtD,GAAuED,sBAAsB,IAAIC,YAApI;AACA+C,EAAAA,OAAO,CAACC,GAAR,CAAYrI,KAAK,CAACsI,QAAN,EAAZ;AACA,QAAMC,OAAO,GAAG3I,UAAU,EAA1B;AACA,sBACE,oBAAC,SAAD;AAAW,IAAA,QAAQ,EAAEoC,QAArB;AAA+B,IAAA,QAAQ,EAAEI,YAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AAAkB,IAAA,SAAS,EAAED,OAAO,CAACpB,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAgB,IAAA,SAAS,EAAEiB,QAAQ,GAAGG,OAAO,CAACiC,OAAX,GAAqB,EAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGI,OAAO,KAAK,GAAZ,gBACC,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2BC,mBAA3B,MADD,gBAGC,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAaA,mBAAb,CALJ,EAQG0D,UAAU,iBAEP,oBAAC,oBAAD;AACE,IAAA,KAAK,EAAC,OADR;AAEE,IAAA,SAAS,EAAEhG,OAAO,CAAC+B,GAFrB;AAGE,IAAA,OAAO,EAAG7B,KAAD,IAAW;AAClBA,MAAAA,KAAK,CAACmG,eAAN;AACAD,MAAAA,OAAO,CAACE,IAAR,CACG,aAAYnE,UAAW,IAAGC,YAAa,IAAG3C,UAAW,IAAGiD,OAAQ,IAAGC,aAAc,IAAGJ,aAAc,IAAGC,WAAY,IAAGC,QAAS,EADhI;AAGD,KARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVN,CADF,eAuBE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGI,SAAS,CAAC,CAAD,CAAT,IACC,CAACjE,IAAI,KAAK,uBAAT,GACGiE,SADH,GAEGgC,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQlC,SAAR,CAAX,EAA+BwC,MAA/B,CAAuCnH,IAAD,IAAU;AAChD,WACEA,IAAI,CAAC6F,IAAL,CAAUwC,OAAV,CAAkBjE,mBAAlB,IAAyC,CAAC,CAA1C,IACApE,IAAI,CAAC6F,IAAL,KAAczB,mBAAmB,GAAG,MAFtC;AAID,GALC,CAFJ,EAQEtB,GARF,CAQM,CAAC9C,IAAD,EAAOgD,KAAP,KAAiB;AACrB,wBACE,oBAAC,IAAD;AACE,MAAA,SAAS,EAAElB,OAAO,CAACoB,YADrB;AAEE,MAAA,GAAG,EAAEF,KAFP;AAGE,MAAA,IAAI,MAHN;AAIE,MAAA,EAAE,EAAE,EAJN;AAKE,MAAA,OAAO,EAAE,MAAM;AACbyC,QAAAA,QAAQ,CAACrB,mBAAD,CAAR;AACAwB,QAAAA,eAAe,CAAC5F,IAAI,CAAC6F,IAAN,CAAf;AACD,OARH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAUG7F,IAAI,CAAC6F,IAVR,CADF;AAcD,GAvBD,CAFJ,CADF,CAvBF,EAoDGlB,SAAS,CAACnC,MAAV,GAAmB,CAAnB,iBACC,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,KAAK,EAAC,WAFR;AAGE,IAAA,OAAO,EAAE,MAAM;AACb,YAAM6D,KAAK,GAAG;AACZP,QAAAA,SAAS,EAAErB,aADC;AAEZsB,QAAAA,OAAO,EAAEvB,OAFG;AAGZwB,QAAAA,UAAU,EAAEzE,UAHA;AAIZ+E,QAAAA,WAAW,EAAElC,mBAJD;AAKZQ,QAAAA,GALY;AAMZC,QAAAA,MANY;AAOZC,QAAAA;AAPY,OAAd;AASApE,MAAAA,IAAI,KAAK,uBAAT,IAAoC,OAAO2F,KAAK,CAACL,UAAjD;AACA4B,MAAAA,mBAAmB,CAACvB,KAAD,CAAnB;AACD,KAfH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAiBG5E,IAAI,CAAC6G,yBAjBR,CADF,CAFF,CArDJ,eA8EE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAElD,IAAb;AAAmB,IAAA,KAAK,EAAEI,KAA1B;AAAiC,IAAA,WAAW,EAAEY,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGd,YADH,CA9EF,CADF;AAoFD,CAhPc,CAAjB;AAmPA,MAAMiD,aAAa,GAAGnK,UAAU,CAAC,CAAC;AAAE2C,EAAAA;AAAF,CAAD,MAAkB;AACjDL,EAAAA,IAAI,EAAE;AACJM,IAAAA,MAAM,EAAED,OAAO,CAAC,CAAD;AADX,GAD2C;AAIjDyH,EAAAA,OAAO,EAAE;AACPrG,IAAAA,YAAY,EAAEpB,OAAO,CAAC,CAAD;AADd,GAJwC;AAOjDyE,EAAAA,KAAK,EAAE;AACLiD,IAAAA,UAAU,EAAE;AADP;AAP0C,CAAlB,CAAD,CAAV,CAWpB,CAAC;AACCC,EAAAA,gBADD;AAEC5G,EAAAA,OAFD;AAGCV,EAAAA,IAHD;AAICoD,EAAAA,OAJD;AAKCC,EAAAA,aALD;AAMCC,EAAAA,QAND;AAOCC,EAAAA,SAPD;AAQCC,EAAAA,GARD;AASCC,EAAAA,MATD;AAUCC,EAAAA,MAVD;AAWCC,EAAAA,sBAXD;AAYCC,EAAAA,YAZD;AAaCtE,EAAAA,IAbD;AAcCuE,EAAAA,qBAdD;AAeC5D,EAAAA,cAfD;AAgBCC,EAAAA,mBAhBD;AAiBCE,EAAAA;AAjBD,CAAD,KAkBM;AACJ,QAAMC,IAAI,GAAGrC,KAAK,CAACsC,UAAN,CAAiB3C,eAAjB,CAAb;AACA,QAAM,CAAC4J,eAAD,EAAkBC,kBAAlB,IAAwCxJ,KAAK,CAACyC,QAAN,CAC5CJ,IAAI,CAACoH,8BADuC,CAA9C;AAIA,QAAMC,UAAU,GACdpI,IAAI,KAAK,SAAT,GAAqB,KAArB,GAA6BA,IAAI,KAAK,UAAT,GAAsB,SAAtB,GAAkC,OADjE;AAGArB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIqB,IAAI,KAAK,uBAAb,EACEkI,kBAAkB,CAACnH,IAAI,CAACsH,sBAAN,CAAlB;AACH,GAHQ,EAGN,CAACrI,IAAD,EAAOe,IAAP,CAHM,CAAT;AAIA,sBACE,oBAAC,aAAD;AACE,IAAA,IAAI,EAAC,mBADP;AAEE,IAAA,IAAI,EAAEqH,UAFR;AAGE,IAAA,KAAK,EAAEH,eAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAE7G,OAAO,CAACpB,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AACE,IAAA,QAAQ,EAAC,aADX;AAEE,IAAA,UAAU,EAAC,kBAFb;AAGE,IAAA,EAAE,EAAE,CAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIG,GAAE8D,OAAQ,EAJb,CADF,eAME,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,OAApB;AAA4B,IAAA,SAAS,EAAE1C,OAAO,CAAC0D,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGkD,gBADH,CANF,eASE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAE5G,OAAO,CAAC0G,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGpH,IAAI,CAAC0B,GAAL,CAAS,CAAC9C,IAAD,EAAOgD,KAAP,KAAiB;AACzB,wBACE,oBAAC,QAAD;AACE,MAAA,QAAQ,EAAEhD,IADZ;AAEE,MAAA,GAAG,EAAEgD,KAFP;AAGE,MAAA,OAAO,EAAEwB,OAHX;AAIE,MAAA,aAAa,EAAEC,aAJjB;AAKE,MAAA,QAAQ,EAAEC,QALZ;AAME,MAAA,SAAS,EAAEC,SANb;AAOE,MAAA,GAAG,EAAEC,GAPP;AAQE,MAAA,MAAM,EAAEC,MARV;AASE,MAAA,MAAM,EAAEC,MATV;AAUE,MAAA,sBAAsB,EAAEC,sBAV1B;AAWE,MAAA,YAAY,EAAEC,YAXhB;AAYE,MAAA,qBAAqB,EAAEC,qBAZzB;AAaE,MAAA,IAAI,EAAEvE,IAbR;AAcE,MAAA,IAAI,EAAEe,IAdR;AAeE,MAAA,gBAAgB,EAAEJ,cAfpB;AAgBE,MAAA,mBAAmB,EAAEC,mBAhBvB;AAiBE,MAAA,kBAAkB,EAAEE,uBAjBtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAqBD,GAtBA,CADH,CATF,CALF,CADF;AA2CD,CArFmB,CAAtB;AAwFA,eAAelC,OAAO,CACpB,CACE;AAAE0J,EAAAA,UAAF;AAAcC,EAAAA,eAAd;AAA+BC,EAAAA,YAA/B;AAA6CC,EAAAA,SAA7C;AAAwDC,EAAAA,MAAxD;AAAgEC,EAAAA,IAAhE;AAAsE/H,EAAAA;AAAtE,CADF,EAEE;AACEgI,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE;AAAEhI,MAAAA,UAAF;AAAciD,MAAAA,OAAd;AAAuBH,MAAAA,aAAvB;AAAsC3D,MAAAA;AAAtC;AADH;AADT,CAFF,KAOK;AAAA;;AACH,QAAM+D,aAAa,sBAAG2E,MAAM,CAAC5E,OAAD,CAAT,oDAAG,gBAAiBC,aAAvC;AACA,QAAM+E,eAAe,uBAAGJ,MAAM,CAAC5E,OAAD,CAAT,qDAAG,iBAAiBgF,eAAzC;AACA,QAAMlF,WAAW,uBAAG8E,MAAM,CAAC5E,OAAD,CAAT,qDAAG,iBAAiBF,WAArC;AACA,QAAMmF,aAAa,GAAGN,SAAS,CAAC5H,UAAD,CAAT,IAAyB,EAA/C;AACA,MAAImI,KAAK,GAAGN,MAAH,aAAGA,MAAH,uBAAGA,MAAM,CAAG5E,OAAH,CAAlB;AACA,QAAMG,SAAS,GAAG,EAAlB;AACA,QAAMgF,aAAa,4BAAGT,YAAY,CAACzE,aAAD,CAAf,oFAAG,sBAA8BD,OAA9B,CAAH,2DAAG,uBAAyCjD,UAAzC,CAAtB;AAEA,QAAMH,IAAI,GAAGnC,eAAe,CAACwK,aAAD,EAAgBnF,WAAhB,EAA6BD,aAA7B,EAA4CmF,eAA5C,CAA5B;AACA,QAAM9B,WAAW,GAAGtG,IAAI,CAAC0B,GAAL,CAAU9C,IAAD,IAAU;AACrC,WAAOA,IAAI,CAACoE,mBAAZ;AACD,GAFmB,CAApB;AAKAsD,EAAAA,WAAW,CAACkC,OAAZ,CAAqB5J,IAAD,IAAU;AAC5B,WACG2J,aAAa,IACZA,aAAa,CAACxC,MAAd,CACG0C,GAAD,IAASA,GAAG,CAAChE,IAAJ,CAASwC,OAAT,CAAiBrI,IAAjB,IAAyB,CAAC,CAA1B,IAA+B2E,SAAS,CAACyD,IAAV,CAAeyB,GAAf,CAD1C,CADF,IAIA,EALF;AAOD,GARD;AAUA,QAAMC,kBAAkB,GAAG9K,sBAAsB,CAC/CiK,eAD+C,EAE/CzE,OAF+C,EAG/C6E,IAAI,CAACU,YAH0C,EAI/CV,IAAI,CAACW,KAAL,CAAW,CAAX,CAJ+C,CAAjD;AAOA,QAAMhF,YAAY,GAAG8E,kBAAkB,CAACG,QAAnB,CAA4B1I,UAA5B,CAArB;AAEA,QAAM;AAAEmH,IAAAA,gBAAF;AAAoBwB,IAAAA;AAApB,MACJlB,UAAU,CAACzH,UAAD,CAAV,IAA0B,EAD5B;AAGA,QAAMiE,KAAK,GAAGyD,eAAe,CAACzE,OAAO,GAAG,OAAX,CAAf,GACV0F,kBAAkB,GAChBA,kBADgB,GAEhBxB,gBAHQ,GAIVA,gBAJJ;;AAMA,MAAIhI,IAAI,KAAK,uBAAb,EAAsC;AAAA;;AACpC,UAAMsD,QAAQ,GAAG;AACfG,MAAAA,OAAO,EAAE,GADM;AAEfC,MAAAA,mBAAmB,EAAG;AAFP,KAAjB;AAKAhD,IAAAA,IAAI,CAACgH,IAAL,CAAUpE,QAAV;AAEAW,IAAAA,SAAS,CAACyD,IAAV,CAAec,YAAf,aAAeA,YAAf,iDAAeA,YAAY,CAAGzE,aAAH,CAA3B,qFAAe,uBAAgCD,OAAhC,CAAf,2DAAe,uBAA2CjD,UAA3C,EAAuD,CAAvD,CAAf;AACD;;AAED,SAAO;AACLH,IAAAA,IAAI,EAAEA,IADD;AAELsH,IAAAA,gBAAgB,EAAElD,KAFb;AAGLhB,IAAAA,OAHK;AAILC,IAAAA,aAJK;AAKLE,IAAAA,SALK;AAMLC,IAAAA,GAAG,EAAE8E,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAES,EANP;AAOLtF,IAAAA,MAAM,EAAE6E,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAE7E,MAPV;AAQLC,IAAAA,MAAM,EAAE4E,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEU,KARV;AASLrF,IAAAA,sBAAsB,EAAErE,IAAI,KAAK,UAT5B;AAULsE,IAAAA,YAVK;AAWLtE,IAAAA,IAAI,EAAEA,IAXD;AAYLY,IAAAA;AAZK,GAAP;AAcD,CA5EmB,EA6EnB+I,QAAD,IAAc;AACZ,SAAO;AACL3F,IAAAA,QAAQ,EAAGtD,IAAD,IAAU;AAClB,aAAOiJ,QAAQ,CAACzL,MAAM,CAAC8F,QAAP,CAAgBtD,IAAhB,CAAD,CAAf;AACD,KAHI;AAKL6D,IAAAA,qBAAqB,EAAG7D,IAAD,IAAU;AAC/B,aAAOiJ,QAAQ,CAACzL,MAAM,CAACgJ,mBAAP,CAA2BxG,IAA3B,CAAD,CAAf;AACD,KAPI;AASLC,IAAAA,cAAc,EAAGD,IAAD,IAAU;AACxB,aAAOiJ,QAAQ,CAACzL,MAAM,CAACyC,cAAP,CAAsBD,IAAtB,CAAD,CAAf;AACD,KAXI;AAaLI,IAAAA,uBAAuB,EAAGJ,IAAD,IAAU;AACjC,aAAOiJ,QAAQ,CAACzL,MAAM,CAAC4C,uBAAP,CAA+BJ,IAA/B,CAAD,CAAf;AAED;AAhBI,GAAP;AAmBD,CAjGmB,CAAP,CAkGbmH,aAlGa,CAAf","sourcesContent":["import {\r\n  Accordion,\r\n  AccordionDetails,\r\n  AccordionSummary,\r\n  Box,\r\n  Grid,\r\n  Typography,\r\n  withStyles,\r\n  Divider,\r\n  Button,\r\n  AccordionActions,\r\n  List,\r\n  Checkbox\r\n} from \"@material-ui/core\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport ArrowRightIcon from \"@material-ui/icons/ArrowRight\";\r\nimport * as action from \"actions\";\r\nimport Model from \"components/Model\";\r\nimport Pdf from \"components/Pdf\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport { documentAuthorizationC } from \"js/publicFn\";\r\nimport { getTemplateList,  showUploadButton } from \"js/util\";\r\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\r\nimport React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Square from \"img/square.png\"\r\nimport Triangle from \"img/triangle.png\"\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport store from \"js/store\";\r\n\r\n\r\nconst getSquareORTriangle = (type) => {\r\n  let imgSource = type === \"Square\" ? Square : type === \"Triangle\" ? Triangle : \"No\";\r\n  return imgSource === \"No\" ? imgSource : <img src={imgSource} alt=\"\" />\r\n}\r\n\r\nconst getSpecifyStr = (item) => {\r\n  const str = \"Chinese:\";\r\n  var splitChar = item.split(\"||\");\r\n\r\n  return splitChar\r\n    .find((e) => {\r\n      return (\r\n        e.startsWith(str) ||\r\n        (splitChar.findIndex((e) => e.startsWith(str)) === -1 && splitChar[0])\r\n      );\r\n    })\r\n    .split(\":\")\r\n    .slice(-1)[0];\r\n};\r\n\r\n// const isShowUpLoadButon = (allowreupload, param, documents) => {\r\n//   if (documents.length > 0) {\r\n//     if (!allowreupload) {\r\n//       return false\r\n//     } else {\r\n//       if (getChecklistActivityNo(param)) {\r\n//         return false\r\n//       } else {\r\n//         return true;\r\n//       }\r\n//     }\r\n//   } else {\r\n//     return true\r\n//   }\r\n// }\r\n\r\nconst dynamicDisplay = (root, config, version) => {\r\n  if (root === \"listCard\") {\r\n    if (version !== \"Latest\") {\r\n      return false\r\n    }\r\n    return config.closeEnabledInOILScreen\r\n  } else if (root === \"installationChecklist\") {\r\n    if (version !== \"Latest\") {\r\n      return false\r\n    } else {\r\n      return true\r\n    }\r\n\r\n  }\r\n  return false\r\n}\r\n\r\nconst useStyles = makeStyles(({ spacing }) => ({\r\n  root: {\r\n    \"& .MuiAccordionSummary-content.Mui-expanded\": {\r\n      margin: 0\r\n    },\r\n    \"& .MuiAccordionSummary-content\": {\r\n      margin: 0\r\n    },\r\n    \"& .MuiAccordionSummary-root.Mui-expanded\": {\r\n      minHeight: \"auto\",\r\n      paddingTop: spacing(1)\r\n    }\r\n\r\n  },\r\n}))\r\n\r\nconst ListofIncongruentItems = ({ data, getHistoryList, version, root, nonConformityConfig, activityNo, closeNonConfirmityItems }) => {\r\n  const i18n = React.useContext(LocalizeContext);\r\n  const [expanded, setExpanded] = React.useState(true);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (event, newExpanded) => {\r\n    setExpanded(newExpanded);\r\n  };\r\n\r\n  let canClick = true;\r\n\r\n  return <List component=\"nav\" aria-label=\"contacts\" style={{ marginBottom: 20 }}>\r\n    {version === \"Latest\" &&\r\n      <Box style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n        <Button size=\"large\" color=\"secondary\" onClick={() => getHistoryList()}>历史</Button>\r\n        {dynamicDisplay(root, nonConformityConfig[activityNo], version) && data.nonConformities.find(item => item.nonConformityItems.length > 0) &&\r\n          <Button size=\"large\" color=\"secondary\" onClick={() =>\r\n            \r\n          {\r\n            if (!canClick) {\r\n              alert('请稍候再试！');\r\n              return;\r\n            };\r\n\r\n            setTimeout(() => {\r\n              canClick = true;\r\n            }, 2000); \r\n        \r\n            canClick = false;\r\n            closeNonConfirmityItems(data)\r\n          }\r\n          \r\n          }>{i18n.Close_NONCONFORMANCE_ITEMS}</Button>\r\n        }\r\n      </Box>\r\n    }\r\n    <Accordion className={classes.root} style={{ margin: \"0 16px\" }} expanded={expanded} onChange={handleChange}>\r\n      <AccordionSummary style={{ margin: 0 }}>\r\n        <ArrowRightIcon fontSize=\"large\" style={expanded ? { transform: \"rotate(90deg)\" } : {}} />\r\n        <Typography variant=\"h6\">{version === \"Latest\" ? `当前版本` : `版本：${version}`}</Typography>\r\n      </AccordionSummary>\r\n      <AccordionDetails>\r\n        <Box style={{ width: \"100%\" }}>\r\n          {data.nonConformities.map((key, index) => {\r\n            return (\r\n              <Box key={index} ml={2} mr={2}>\r\n                <Typography\r\n                  style={{ fontWeight: 600 }}\r\n                  gutterBottom\r\n                  variant=\"body2\"\r\n                  component=\"h2\"\r\n                >\r\n                  {key.documentName}\r\n                </Typography>\r\n                <Box>\r\n                  {key.nonConformityItems.map((item, index) => {\r\n                    return (\r\n                      <Grid key={index} container >\r\n                        <Grid item xs={8}>\r\n                          <Typography variant=\"caption\">{getSpecifyStr(item.itemName)}</Typography>\r\n                        </Grid>\r\n                        <Grid item xs={2}>\r\n                          <p style={{ fontWeight: 800, paddingLeft: 24, marginBottom: 0, marginTop: 8 }}> {getSquareORTriangle(item.questionType)}</p>\r\n                        </Grid>\r\n                        <Grid item xs={2} style={{ textAlign: \"end\" }}>\r\n                          {dynamicDisplay(root, nonConformityConfig[activityNo], version) &&\r\n                            <Checkbox\r\n                              style={{ padding: 4 }}\r\n                              color=\"default\"\r\n                              inputProps={{ 'aria-label': 'checkbox with default color' }}\r\n                              onChange={(event) => {\r\n                                let checkedVlaue = event.target.checked;\r\n                                item[\"itemValue\"] = checkedVlaue ? \"yes\" : \"no\"\r\n                                item[\"activityNo\"] = key.activityNo\r\n\r\n                              }}\r\n                            />\r\n                          }\r\n                        </Grid>\r\n                      </Grid>\r\n                    );\r\n                  })}\r\n                </Box>\r\n              </Box>\r\n            );\r\n          })}\r\n        </Box>\r\n      </AccordionDetails>\r\n    </Accordion>\r\n\r\n  </List>\r\n};\r\n\r\n\r\nconst Template = withStyles(({ spacing }) => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n  add: {\r\n    marginLeft: spacing(5),\r\n  },\r\n  navIcon: {\r\n    transform: \"rotate(90deg)\",\r\n  },\r\n  documentName: {\r\n    marginLeft: spacing(1),\r\n  },\r\n}))(\r\n  ({\r\n    classes,\r\n    template: {\r\n      activityNo,\r\n      documentNo,\r\n      documentPart,\r\n      mandDoc,\r\n      documentDescription,\r\n      productFamily,\r\n      productLine,\r\n      language,\r\n    },\r\n    orderNo,\r\n    projectNumber,\r\n    fetchPdf,\r\n    documents,\r\n    foe,\r\n    region,\r\n    branch,\r\n    DisableTheEntranceroot,\r\n    canUploadDoc,\r\n    fetchNoConformityList,\r\n    root,\r\n    i18n,\r\n    fetchHistoryList,\r\n    nonConformityConfig,\r\n    closeNonConfirmity\r\n  }) => {\r\n    const [expanded, setExpanded] = React.useState(true);\r\n    const [open, setOpen] = React.useState(false);\r\n    const [modelContent, setModelContent] = React.useState();\r\n    const [title, setTitle] = React.useState(documentDescription);\r\n    const [data, setData] = React.useState([]);\r\n    useEffect(() => {\r\n      setModelContent(\r\n        data.map((item, index) =>\r\n          < ListofIncongruentItems\r\n            key={index}\r\n            data={item}\r\n            getHistoryList={getHistoryList}\r\n            version={item?.versionIdentifier}\r\n            root={root}\r\n            nonConformityConfig={nonConformityConfig}\r\n            activityNo={activityNo}\r\n            closeNonConfirmityItems={closeNonConfirmityItems}\r\n          />))\r\n      // eslint-disable-next-line\r\n    }, [data]);\r\n\r\n\r\n    const handleClickOpen = (name) => {\r\n      const data = {\r\n        ProjectNo: projectNumber,\r\n        OrderNo: orderNo,\r\n        ActivityNo: activityNo,\r\n        DocumentName: name,\r\n        foe,\r\n        region,\r\n        branch,\r\n      };\r\n      root === \"installationChecklist\" && delete data.ActivityNo;\r\n      fetchPdf(data).then((url) => {\r\n        setOpen(true);\r\n        setModelContent(<Pdf filePath={url} />);\r\n      });\r\n    };\r\n\r\n    const handleClose = () => {\r\n      setOpen(false);\r\n    };\r\n\r\n    const handleChange = (event, newExpanded) => {\r\n      setExpanded(newExpanded);\r\n    };\r\n\r\n    const getHistoryList = () => {\r\n      const param = {\r\n        ProjectNo: projectNumber,\r\n        OrderNo: orderNo,\r\n        ActivityNo: root === \"listCard\" ? activityNo : \"\",\r\n        Description: root === \"listCard\" ? documentDescription : \"\",\r\n        foe,\r\n        region,\r\n        branch,\r\n      };\r\n      fetchHistoryList(param).then((res) => {\r\n        const newData = res.data.map((item, index) => {\r\n          return {\r\n            nonConformities: item.nonConformities,\r\n            versionIdentifier: res.data.length - index\r\n          }\r\n        });\r\n        const historyData = [\r\n          ...data, ...newData\r\n        ]\r\n        const result = Array.from(new Set(historyData.map(JSON.stringify))).map(JSON.parse);\r\n        setData(result)\r\n      })\r\n    }\r\n\r\n    const closeNonConfirmityItems = (checkContent) => {\r\n\r\n      const filteredData = checkContent?.nonConformities?.filter(item => {\r\n        return item.nonConformityItems.some(subItem => subItem.itemValue === \"yes\");\r\n      });\r\n\r\n      let checkedData = filteredData.map((item) => {\r\n        return {\r\n          documentInfo: {\r\n            projectNo: projectNumber,\r\n            orderNo: orderNo,\r\n            activityNo: item.activityNo,\r\n            description: item.documentName,\r\n            foe,\r\n            region,\r\n            branch,\r\n          },\r\n          items: item.nonConformityItems,\r\n        }\r\n      })\r\n\r\n      if (checkedData.length < 1) {\r\n        alert(\"至少要选择一个不符合项\")\r\n        return false\r\n      }\r\n      closeNonConfirmity(checkedData).then((res) => {\r\n        setOpen(false);\r\n      })\r\n    }\r\n\r\n\r\n    const getNoConformityList = (param) => {\r\n      setTitle(i18n.NONCONFORMITY_LIST);\r\n      fetchNoConformityList(param).then((res) => {\r\n        setOpen(true);\r\n        res.data[\"versionIdentifier\"] = \"Latest\"\r\n        setData(res.data)\r\n      })\r\n    }\r\n    const showButton = showUploadButton() ? (showUploadButton() && DisableTheEntranceroot && canUploadDoc) : (DisableTheEntranceroot && canUploadDoc)\r\n    console.log(store.getState())\r\n    const history = useHistory();\r\n    return (\r\n      <Accordion expanded={expanded} onChange={handleChange}>\r\n        <AccordionSummary className={classes.root}>\r\n          <ArrowRightIcon className={expanded ? classes.navIcon : \"\"} />\r\n          {mandDoc === \"X\" ? (\r\n            <Typography color=\"error\">{documentDescription}*</Typography>\r\n          ) : (\r\n            <Typography>{documentDescription}</Typography>\r\n          )}\r\n\r\n          {showButton &&\r\n            (\r\n              <AddCircleOutlineIcon\r\n                color=\"error\"\r\n                className={classes.add}\r\n                onClick={(event) => {\r\n                  event.stopPropagation();\r\n                  history.push(\r\n                    `/template/${documentNo}/${documentPart}/${activityNo}/${orderNo}/${projectNumber}/${productFamily}/${productLine}/${language}`\r\n                  );\r\n                }}\r\n              />\r\n             )}\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <Box>\r\n            {documents[0] &&\r\n              (root === \"installationChecklist\"\r\n                ? documents\r\n                : Array.from(new Set(documents)).filter((item) => {\r\n                  return (\r\n                    item.name.indexOf(documentDescription) > -1 &&\r\n                    item.name === documentDescription + \".pdf\"\r\n                  );\r\n                })\r\n              ).map((item, index) => {\r\n                return (\r\n                  <Grid\r\n                    className={classes.documentName}\r\n                    key={index}\r\n                    item\r\n                    xs={12}\r\n                    onClick={() => {\r\n                      setTitle(documentDescription);\r\n                      handleClickOpen(item.name);\r\n                    }}\r\n                  >\r\n                    {item.name}\r\n                  </Grid>\r\n                );\r\n              })}\r\n          </Box>\r\n        </AccordionDetails>\r\n        {documents.length > 0 && (\r\n          <Box>\r\n            <Divider />\r\n            <AccordionActions>\r\n              <Button\r\n                size=\"small\"\r\n                color=\"secondary\"\r\n                onClick={() => {\r\n                  const param = {\r\n                    ProjectNo: projectNumber,\r\n                    OrderNo: orderNo,\r\n                    ActivityNo: activityNo,\r\n                    Description: documentDescription,\r\n                    foe,\r\n                    region,\r\n                    branch,\r\n                  };\r\n                  root === \"installationChecklist\" && delete param.ActivityNo;\r\n                  getNoConformityList(param);\r\n                }}\r\n              >\r\n                {i18n.VIEW_NONCONFORMANCE_ITEMS}\r\n              </Button>\r\n            </AccordionActions>\r\n          </Box>\r\n        )}\r\n        <Model open={open} title={title} handleClose={handleClose}>\r\n          {modelContent}\r\n        </Model>\r\n      </Accordion>\r\n    );\r\n  }\r\n);\r\n\r\nconst DocumentsPage = withStyles(({ spacing }) => ({\r\n  root: {\r\n    margin: spacing(2),\r\n  },\r\n  content: {\r\n    marginBottom: spacing(5),\r\n  },\r\n  title: {\r\n    lineHeight: \"2.5\",\r\n  },\r\n}))(\r\n  ({\r\n    descriptionShort,\r\n    classes,\r\n    data,\r\n    orderNo,\r\n    projectNumber,\r\n    fetchPdf,\r\n    documents,\r\n    foe,\r\n    region,\r\n    branch,\r\n    DisableTheEntranceroot,\r\n    canUploadDoc,\r\n    root,\r\n    fetchNoConformityList,\r\n    getHistoryList,\r\n    nonConformityConfig,\r\n    closeNonConfirmityItems\r\n  }) => {\r\n    const i18n = React.useContext(LocalizeContext);\r\n    const [pageDescription, setPageDescription] = React.useState(\r\n      i18n.INSTALLATION_ACTIVITY_DOCUMENT\r\n    );\r\n\r\n    const pageSource =\r\n      root === \"minCard\" ? \"all\" : root === \"listCard\" ? \"pending\" : \"basic\";\r\n\r\n    useEffect(() => {\r\n      if (root === \"installationChecklist\")\r\n        setPageDescription(i18n.INSTALLATION_CHECKLIST);\r\n    }, [root, i18n]);\r\n    return (\r\n      <PrimaryLayout\r\n        name=\"activity Document\"\r\n        root={pageSource}\r\n        title={pageDescription}\r\n      >\r\n        <Box className={classes.root}>\r\n          <Box\r\n            fontSize=\"h6.fontSize\"\r\n            fontWeight=\"fontWeightMedium\"\r\n            my={1}\r\n          >{`${orderNo}`}</Box>\r\n          <Typography variant=\"body1\" className={classes.title}>\r\n            {descriptionShort}\r\n          </Typography>\r\n          <Box className={classes.content}>\r\n            {data.map((item, index) => {\r\n              return (\r\n                <Template\r\n                  template={item}\r\n                  key={index}\r\n                  orderNo={orderNo}\r\n                  projectNumber={projectNumber}\r\n                  fetchPdf={fetchPdf}\r\n                  documents={documents}\r\n                  foe={foe}\r\n                  region={region}\r\n                  branch={branch}\r\n                  DisableTheEntranceroot={DisableTheEntranceroot}\r\n                  canUploadDoc={canUploadDoc}\r\n                  fetchNoConformityList={fetchNoConformityList}\r\n                  root={root}\r\n                  i18n={i18n}\r\n                  fetchHistoryList={getHistoryList}\r\n                  nonConformityConfig={nonConformityConfig}\r\n                  closeNonConfirmity={closeNonConfirmityItems}\r\n                />\r\n              );\r\n            })}\r\n          </Box>\r\n        </Box>\r\n      </PrimaryLayout>\r\n    );\r\n  }\r\n);\r\n\r\nexport default connect(\r\n  (\r\n    { activities, orderActivities, documentList, templates, orders, auth, nonConformityConfig },\r\n    {\r\n      match: {\r\n        params: { activityNo, orderNo, productFamily, root },\r\n      },\r\n    }\r\n  ) => {\r\n    const projectNumber = orders[orderNo]?.projectNumber;\r\n    const productCategory = orders[orderNo]?.productCategory;\r\n    const productLine = orders[orderNo]?.productLine;\r\n    const templatesData = templates[activityNo] || [];\r\n    let order = orders?.[orderNo];\r\n    const documents = [];\r\n    const documentsItem = documentList[projectNumber]?.[orderNo]?.[activityNo];\r\n\r\n    const data = getTemplateList(templatesData, productLine, productFamily, productCategory);\r\n    const description = data.map((item) => {\r\n      return item.documentDescription;\r\n    });\r\n\r\n\r\n    description.forEach((item) => {\r\n      return (\r\n        (documentsItem &&\r\n          documentsItem.filter(\r\n            (ele) => ele.name.indexOf(item) > -1 && documents.push(ele)\r\n          )) ||\r\n        []\r\n      );\r\n    });\r\n\r\n    const docAuthActivityNos = documentAuthorizationC(\r\n      orderActivities,\r\n      orderNo,\r\n      auth.activityAuth,\r\n      auth.roles[0]\r\n    );\r\n\r\n    const canUploadDoc = docAuthActivityNos.includes(activityNo);\r\n\r\n    const { descriptionShort, descriptionShort14 } =\r\n      activities[activityNo] || {};\r\n\r\n    const title = orderActivities[orderNo + \"-7030\"]\r\n      ? descriptionShort14\r\n        ? descriptionShort14\r\n        : descriptionShort\r\n      : descriptionShort;\r\n\r\n    if (root === \"installationChecklist\") {\r\n      const template = {\r\n        mandDoc: \"Y\",\r\n        documentDescription: `安装检查清单`,\r\n      };\r\n\r\n      data.push(template);\r\n\r\n      documents.push(documentList?.[projectNumber]?.[orderNo]?.[activityNo][0]);\r\n    }\r\n\r\n    return {\r\n      data: data,\r\n      descriptionShort: title,\r\n      orderNo,\r\n      projectNumber,\r\n      documents,\r\n      foe: order?.fo,\r\n      region: order?.region,\r\n      branch: order?.prctr,\r\n      DisableTheEntranceroot: root === \"listCard\",\r\n      canUploadDoc,\r\n      root: root,\r\n      nonConformityConfig\r\n    };\r\n  },\r\n  (dispatch) => {\r\n    return {\r\n      fetchPdf: (data) => {\r\n        return dispatch(action.fetchPdf(data));\r\n      },\r\n\r\n      fetchNoConformityList: (data) => {\r\n        return dispatch(action.getNoConformityList(data));\r\n      },\r\n\r\n      getHistoryList: (data) => {\r\n        return dispatch(action.getHistoryList(data));\r\n      },\r\n\r\n      closeNonConfirmityItems: (data) => {\r\n        return dispatch(action.closeNonConfirmityItems(data));\r\n\r\n      }\r\n\r\n    };\r\n  }\r\n)(DocumentsPage);\r\n"]},"metadata":{},"sourceType":"module"}