{"ast":null,"code":"import * as action from \"actions\";\nimport { saveDraftToLocal } from \"js/util\";\nimport * as api from \"../api/index\";\nexport const setTemplates = data => ({\n  type: \"SET_TEMPLATES\",\n  payload: data\n});\nexport const setDocuments = data => ({\n  type: \"SET_DOCUMENT_LIST\",\n  payload: data\n});\nexport const setPdfList = data => ({\n  type: \"SET_PDF_LIST\",\n  payload: [data]\n});\nexport const saveDraft = (data, currentParams, extendParams) => dispatch => {\n  alert(123);\n  dispatch(action.showLoading());\n  return api.saveDraft(data).then(res => {\n    const result = data.form;\n    const {\n      orderNo,\n      activityNo\n    } = data; // saveDraftToLocal(result, currentParams, {\n    //   ...extendParams,\n    //   orderNo,\n    //   activityNo,\n    // });\n\n    console.log(res);\n    return res;\n  }).finally(() => {\n    dispatch(action.hideLoading());\n  });\n};\nexport const fetchPdf = data => dispatch => {\n  dispatch(action.showLoading());\n  return api.pdfDownLoad(data).then(response => {\n    dispatch(action.hideLoading());\n    const pdfurl = `data:application/pdf;base64,${response.data.blob}`;\n    return Promise.resolve(pdfurl);\n  }).catch(error => {\n    if (error.code === 401) {\n      dispatch(action.setAuth(null));\n      dispatch(action.hideLoading());\n    }\n  });\n};\nexport const getNoConformityList = data => dispatch => {\n  dispatch(action.showLoading());\n  return api.getNoConformityList(data).then(response => {\n    dispatch(action.hideLoading());\n    return response;\n  });\n};\nexport const getDocumentList = data => dispatch => {\n  api.getDocumentList(data).then(response => {\n    dispatch(action.setDocuments(response.data));\n  });\n};\nexport const getHistoryList = data => dispatch => {\n  dispatch(action.showLoading());\n  return api.getHistoryList(data).then(response => {\n    dispatch(action.hideLoading());\n    return response;\n  });\n};\nexport const closeNonConfirmityItems = data => dispatch => {\n  dispatch(action.showLoading());\n  return api.closeNonConfirmityItems(data).then(response => {\n    dispatch(action.hideLoading());\n    return response;\n  });\n};","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/actions/templates.js"],"names":["action","saveDraftToLocal","api","setTemplates","data","type","payload","setDocuments","setPdfList","saveDraft","currentParams","extendParams","dispatch","alert","showLoading","then","res","result","form","orderNo","activityNo","console","log","finally","hideLoading","fetchPdf","pdfDownLoad","response","pdfurl","blob","Promise","resolve","catch","error","code","setAuth","getNoConformityList","getDocumentList","getHistoryList","closeNonConfirmityItems"],"mappings":"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","sourcesContent":["import * as action from \"actions\";\r\nimport { saveDraftToLocal } from \"js/util\";\r\nimport * as api from \"../api/index\";\r\n\r\nexport const setTemplates = (data) => ({\r\n  type: \"SET_TEMPLATES\",\r\n  payload: data,\r\n});\r\n\r\nexport const setDocuments = (data) => ({\r\n  type: \"SET_DOCUMENT_LIST\",\r\n  payload: data,\r\n});\r\n\r\nexport const setPdfList = (data) => ({\r\n  type: \"SET_PDF_LIST\",\r\n  payload: [data],\r\n});\r\n\r\nexport const saveDraft = (data, currentParams, extendParams) => (dispatch) => {\r\n  alert(123)\r\n  dispatch(action.showLoading());\r\n  return api\r\n    .saveDraft(data)\r\n    .then((res) => {\r\n      const result = data.form;\r\n\r\n      const { orderNo, activityNo } = data;\r\n\r\n      // saveDraftToLocal(result, currentParams, {\r\n      //   ...extendParams,\r\n      //   orderNo,\r\n      //   activityNo,\r\n      // });\r\n      console.log(res)\r\n      return res;\r\n    })\r\n    .finally(() => {\r\n      dispatch(action.hideLoading());\r\n    });\r\n};\r\n\r\nexport const fetchPdf = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api\r\n    .pdfDownLoad(data)\r\n    .then((response) => {\r\n      dispatch(action.hideLoading());\r\n      const pdfurl = `data:application/pdf;base64,${response.data.blob}`;\r\n      return Promise.resolve(pdfurl);\r\n    })\r\n    .catch((error) => {\r\n      if (error.code === 401) {\r\n        dispatch(action.setAuth(null));\r\n        dispatch(action.hideLoading());\r\n      }\r\n    });\r\n};\r\n\r\nexport const getNoConformityList = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api.getNoConformityList(data).then((response) => {\r\n    dispatch(action.hideLoading());\r\n    return response;\r\n  });\r\n};\r\n\r\nexport const getDocumentList = (data) => (dispatch) => {\r\n  api.getDocumentList(data).then((response) => {\r\n    dispatch(action.setDocuments(response.data));\r\n  });\r\n};\r\n\r\nexport const getHistoryList = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api.getHistoryList(data).then((response) => {\r\n    dispatch(action.hideLoading());\r\n    return response;\r\n  });\r\n};\r\n\r\nexport const closeNonConfirmityItems = (data) => (dispatch) => {\r\n  dispatch(action.showLoading());\r\n  return api.closeNonConfirmityItems(data).then((response) => {\r\n    dispatch(action.hideLoading());\r\n    return response;\r\n  });\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}