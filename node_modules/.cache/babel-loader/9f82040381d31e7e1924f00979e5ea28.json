{"ast":null,"code":"import OrderActivityList from\"components/OrderActivityList\";import OrderActivityListCard from\"components/OrderActivityListCard\";import PrimaryLayout from\"layouts/PrimaryLayout\";import React from\"react\";import{connect}from\"react-redux\";import{LocalizeContext}from\"i18n\";import*as action from\"actions\";import*as publicFn from\"../../js/publicFn/index\";var OrderActivityListPage=function OrderActivityListPage(_ref){var data=_ref.data,orderNumber=_ref.orderNumber,_submit=_ref.submit;var i18n=React.useContext(LocalizeContext);return/*#__PURE__*/React.createElement(PrimaryLayout,{title:i18n.ISNTAPP_JOBLIST_ACTIVITY+\": \"+orderNumber},/*#__PURE__*/React.createElement(OrderActivityList,{data:data,component:OrderActivityListCard,tabType:\"activity\",submit:function submit(activityNumber,date,type){_submit(activityNumber,orderNumber,date,type);}}));};var mapDispatchToState=function mapDispatchToState(dispatch){return{submit:function submit(activityNumber,orderNumber,date,type){var data={activityNo:activityNumber,date:date?date:\"\",orderNo:orderNumber,type:type};dispatch(action.updateOrderActivityStatus(data));}};};export default connect(function(_ref2,_ref3){var orders=_ref2.orders,orderActivities=_ref2.orderActivities,activities=_ref2.activities,auth=_ref2.auth;var orderNumber=_ref3.match.params.number;var hideInProgress=auth.activityAuth.hideInProgress;var _ref4=orders[orderNumber]||{},productFamily=_ref4.productFamily;return{data:Object.keys(orderActivities).filter(function(key){return orderActivities[key].orderNumber===orderNumber&&activities[orderActivities[key].activityNumber]&&!hideInProgress.includes(orderActivities[key].activityNumber);}).map(function(key){var activityNumber=orderActivities[key].activityNumber;var _orderActivities$key=orderActivities[key],confirmedDate=_orderActivities$key.confirmedDate,leadingDate=_orderActivities$key.leadingDate,leadingStartDate=_orderActivities$key.leadingStartDate,leadingEndDate=_orderActivities$key.leadingEndDate,info=_orderActivities$key.info;var descriptionShort=activities[activityNumber].descriptionShort;var authOrderActivities={auth:auth,orderActivities:orderActivities};var ownprops={activityNumber:activityNumber,orderNumber:orderNumber};var isExecutable=publicFn.DatePermissionControl(authOrderActivities,ownprops);return{activityNumber:activityNumber,confirmedDate:confirmedDate?new Date(confirmedDate).toLocaleDateString():\"-\",descriptionShort:descriptionShort,leadingDate:leadingDate?new Date(leadingDate).toLocaleDateString():leadingStartDate&&leadingEndDate?new Date(leadingEndDate).toLocaleDateString():\"-\",info:info||\"-\",orderNumber:orderNumber,productFamily:productFamily,isExecutable:isExecutable};}),orderNumber:orderNumber};},mapDispatchToState)(OrderActivityListPage);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/OrderActivityListPage/index.js"],"names":["OrderActivityList","OrderActivityListCard","PrimaryLayout","React","connect","LocalizeContext","action","publicFn","OrderActivityListPage","data","orderNumber","submit","i18n","useContext","ISNTAPP_JOBLIST_ACTIVITY","activityNumber","date","type","mapDispatchToState","dispatch","activityNo","orderNo","updateOrderActivityStatus","orders","orderActivities","activities","auth","match","params","number","hideInProgress","activityAuth","productFamily","Object","keys","filter","key","includes","map","confirmedDate","leadingDate","leadingStartDate","leadingEndDate","info","descriptionShort","authOrderActivities","ownprops","isExecutable","DatePermissionControl","Date","toLocaleDateString"],"mappings":"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","sourcesContent":["import OrderActivityList from \"components/OrderActivityList\";\r\nimport OrderActivityListCard from \"components/OrderActivityListCard\";\r\nimport PrimaryLayout from \"layouts/PrimaryLayout\";\r\nimport React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport * as action from \"actions\";\r\nimport * as publicFn from \"../../js/publicFn/index\";\r\n\r\nconst OrderActivityListPage = ({ data, orderNumber, submit }) => {\r\n  const i18n = React.useContext(LocalizeContext);\r\n\r\n  return (\r\n    <PrimaryLayout title={i18n.ISNTAPP_JOBLIST_ACTIVITY + \": \" + orderNumber}>\r\n      <OrderActivityList\r\n        data={data}\r\n        component={OrderActivityListCard}\r\n        tabType=\"activity\"\r\n        submit={(activityNumber, date, type) => {\r\n          submit(activityNumber, orderNumber, date, type);\r\n        }}\r\n      ></OrderActivityList>\r\n    </PrimaryLayout>\r\n  );\r\n};\r\n\r\nconst mapDispatchToState = (dispatch) => {\r\n  return {\r\n    submit: (activityNumber, orderNumber, date, type) => {\r\n      let data = {\r\n        activityNo: activityNumber,\r\n        date: date ? date : \"\",\r\n        orderNo: orderNumber,\r\n        type: type,\r\n      };\r\n      dispatch(action.updateOrderActivityStatus(data));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  (\r\n    { orders, orderActivities, activities, auth },\r\n    {\r\n      match: {\r\n        params: { number: orderNumber },\r\n      },\r\n    }\r\n  ) => {\r\n    const hideInProgress = auth.activityAuth.hideInProgress;\r\n    const { productFamily } = orders[orderNumber] || {};\r\n\r\n    return {\r\n      data: Object.keys(orderActivities)\r\n        .filter((key) => {\r\n          return (\r\n            orderActivities[key].orderNumber === orderNumber &&\r\n            activities[orderActivities[key].activityNumber] &&\r\n            !hideInProgress.includes(orderActivities[key].activityNumber)\r\n          );\r\n        })\r\n        .map((key) => {\r\n          const activityNumber = orderActivities[key].activityNumber;\r\n          const {\r\n            confirmedDate,\r\n            leadingDate,\r\n            leadingStartDate,\r\n            leadingEndDate,\r\n            info,\r\n          } = orderActivities[key];\r\n          const { descriptionShort } = activities[activityNumber];\r\n\r\n          let authOrderActivities = {\r\n            auth,\r\n            orderActivities,\r\n          };\r\n\r\n          let ownprops = {\r\n            activityNumber,\r\n            orderNumber,\r\n          };\r\n\r\n          let isExecutable = publicFn.DatePermissionControl(\r\n            authOrderActivities,\r\n            ownprops\r\n          );\r\n\r\n          return {\r\n            activityNumber: activityNumber,\r\n            confirmedDate: confirmedDate\r\n              ? new Date(confirmedDate).toLocaleDateString()\r\n              : \"-\",\r\n            descriptionShort: descriptionShort,\r\n            leadingDate: leadingDate\r\n              ? new Date(leadingDate).toLocaleDateString()\r\n              : leadingStartDate && leadingEndDate\r\n              ? new Date(leadingEndDate).toLocaleDateString()\r\n              : \"-\",\r\n            info: info || \"-\",\r\n            orderNumber: orderNumber,\r\n            productFamily,\r\n            isExecutable,\r\n          };\r\n        }),\r\n      orderNumber: orderNumber,\r\n    };\r\n  },\r\n  mapDispatchToState\r\n)(OrderActivityListPage);\r\n"]},"metadata":{},"sourceType":"module"}