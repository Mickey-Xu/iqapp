{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\components\\\\CheckforUpdates\\\\index.js\";\nimport { Box, Button, makeStyles } from \"@material-ui/core\";\nimport * as action from \"actions\";\nimport ConfirmModal from \"components/ConfirmModal\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nconst useStyles = makeStyles(({\n  spacing\n}) => ({\n  btn: {\n    width: \"80%\",\n    position: \"fixed\",\n    bottom: spacing(17),\n    marginLeft: \"10%\"\n  }\n}));\n\nconst CheckforUpdates = ({\n  type,\n  onClick,\n  isServiceWorkerUpdated = \"\",\n  page = \"\"\n}) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(true);\n  useEffect(() => {\n    if (!onClick) {\n      const timer = setTimeout(() => {\n        dispatch(`${type === \"SW_INIT\" ? action.setSwInIt() : action.setSwUpdate()}`);\n      }, 6000);\n      return () => clearTimeout(timer);\n    }\n  }, [onClick, dispatch, type]);\n\n  const closeMenu = () => {\n    setOpen(false);\n    dispatch(action.setInfo(\"正在安装中\"));\n    setTimeout(() => {\n      onClick();\n    }, 2000);\n  };\n\n  return /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, page === \"activity\" ? /*#__PURE__*/React.createElement(ConfirmModal, {\n    hiddenCancel: true,\n    open: open,\n    mask: true,\n    handleClick: closeMenu,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"\\u60A8\\u6709\\u65B0\\u7684\\u7248\\u672C\") : /*#__PURE__*/React.createElement(Box, {\n    className: classes.btn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      textTransform: \"capitalize\",\n      backgroundColor: \"rgb(220,2,2)\",\n      color: \"white\",\n      padding: \"3px\"\n    },\n    fullWidth: true,\n    onClick: onClick,\n    size: \"large\",\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, isServiceWorkerUpdated)));\n};\n\nexport default CheckforUpdates;","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/components/CheckforUpdates/index.js"],"names":["Box","Button","makeStyles","action","ConfirmModal","React","useEffect","useState","useDispatch","useStyles","spacing","btn","width","position","bottom","marginLeft","CheckforUpdates","type","onClick","isServiceWorkerUpdated","page","classes","dispatch","open","setOpen","timer","setTimeout","setSwInIt","setSwUpdate","clearTimeout","closeMenu","setInfo","textTransform","backgroundColor","color","padding"],"mappings":";AAAA,SAASA,GAAT,EAAcC,MAAd,EAAsBC,UAAtB,QAAwC,mBAAxC;AACA,OAAO,KAAKC,MAAZ,MAAwB,SAAxB;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,MAAMC,SAAS,GAAGP,UAAU,CAAC,CAAC;AAAEQ,EAAAA;AAAF,CAAD,MAAkB;AAC7CC,EAAAA,GAAG,EAAE;AACHC,IAAAA,KAAK,EAAE,KADJ;AAEHC,IAAAA,QAAQ,EAAE,OAFP;AAGHC,IAAAA,MAAM,EAAEJ,OAAO,CAAC,EAAD,CAHZ;AAIHK,IAAAA,UAAU,EAAE;AAJT;AADwC,CAAlB,CAAD,CAA5B;;AASA,MAAMC,eAAe,GAAG,CAAC;AACvBC,EAAAA,IADuB;AAEvBC,EAAAA,OAFuB;AAGvBC,EAAAA,sBAAsB,GAAG,EAHF;AAIvBC,EAAAA,IAAI,GAAG;AAJgB,CAAD,KAKlB;AACJ,QAAMC,OAAO,GAAGZ,SAAS,EAAzB;AACA,QAAMa,QAAQ,GAAGd,WAAW,EAA5B;AACA,QAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,CAAC,IAAD,CAAhC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACY,OAAL,EAAc;AACZ,YAAMO,KAAK,GAAGC,UAAU,CAAC,MAAM;AAC7BJ,QAAAA,QAAQ,CACL,GAAEL,IAAI,KAAK,SAAT,GAAqBd,MAAM,CAACwB,SAAP,EAArB,GAA0CxB,MAAM,CAACyB,WAAP,EAAqB,EAD5D,CAAR;AAGD,OAJuB,EAIrB,IAJqB,CAAxB;AAKA,aAAO,MAAMC,YAAY,CAACJ,KAAD,CAAzB;AACD;AACF,GATQ,EASN,CAACP,OAAD,EAAUI,QAAV,EAAoBL,IAApB,CATM,CAAT;;AAWA,QAAMa,SAAS,GAAG,MAAM;AACtBN,IAAAA,OAAO,CAAC,KAAD,CAAP;AACAF,IAAAA,QAAQ,CAACnB,MAAM,CAAC4B,OAAP,CAAe,OAAf,CAAD,CAAR;AACAL,IAAAA,UAAU,CAAC,MAAM;AACfR,MAAAA,OAAO;AACR,KAFS,EAEP,IAFO,CAAV;AAGD,GAND;;AAQA,sBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGE,IAAI,KAAK,UAAT,gBACC,oBAAC,YAAD;AACE,IAAA,YAAY,EAAE,IADhB;AAEE,IAAA,IAAI,EAAEG,IAFR;AAGE,IAAA,IAAI,EAAE,IAHR;AAIE,IAAA,WAAW,EAAEO,SAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADD,gBAUC,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAET,OAAO,CAACV,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,KAAK,EAAE;AACLqB,MAAAA,aAAa,EAAE,YADV;AAELC,MAAAA,eAAe,EAAE,cAFZ;AAGLC,MAAAA,KAAK,EAAE,OAHF;AAILC,MAAAA,OAAO,EAAE;AAJJ,KADT;AAOE,IAAA,SAAS,MAPX;AAQE,IAAA,OAAO,EAAEjB,OARX;AASE,IAAA,IAAI,EAAC,OATP;AAUE,IAAA,OAAO,EAAC,WAVV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAYGC,sBAZH,CADF,CAXJ,CADF;AA+BD,CA5DD;;AA8DA,eAAeH,eAAf","sourcesContent":["import { Box, Button, makeStyles } from \"@material-ui/core\";\r\nimport * as action from \"actions\";\r\nimport ConfirmModal from \"components/ConfirmModal\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles(({ spacing }) => ({\r\n  btn: {\r\n    width: \"80%\",\r\n    position: \"fixed\",\r\n    bottom: spacing(17),\r\n    marginLeft: \"10%\",\r\n  },\r\n}));\r\n\r\nconst CheckforUpdates = ({\r\n  type,\r\n  onClick,\r\n  isServiceWorkerUpdated = \"\",\r\n  page = \"\",\r\n}) => {\r\n  const classes = useStyles();\r\n  const dispatch = useDispatch();\r\n  const [open, setOpen] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!onClick) {\r\n      const timer = setTimeout(() => {\r\n        dispatch(\r\n          `${type === \"SW_INIT\" ? action.setSwInIt() : action.setSwUpdate()}`\r\n        );\r\n      }, 6000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [onClick, dispatch, type]);\r\n\r\n  const closeMenu = () => {\r\n    setOpen(false);\r\n    dispatch(action.setInfo(\"正在安装中\"));\r\n    setTimeout(() => {\r\n      onClick();\r\n    }, 2000);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      {page === \"activity\" ? (\r\n        <ConfirmModal\r\n          hiddenCancel={true}\r\n          open={open}\r\n          mask={true}\r\n          handleClick={closeMenu}\r\n        >\r\n          您有新的版本\r\n        </ConfirmModal>\r\n      ) : (\r\n        <Box className={classes.btn}>\r\n          <Button\r\n            style={{\r\n              textTransform: \"capitalize\",\r\n              backgroundColor: \"rgb(220,2,2)\",\r\n              color: \"white\",\r\n              padding: \"3px\",\r\n            }}\r\n            fullWidth\r\n            onClick={onClick}\r\n            size=\"large\"\r\n            variant=\"contained\"\r\n          >\r\n            {isServiceWorkerUpdated}\r\n          </Button>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CheckforUpdates;\r\n"]},"metadata":{},"sourceType":"module"}