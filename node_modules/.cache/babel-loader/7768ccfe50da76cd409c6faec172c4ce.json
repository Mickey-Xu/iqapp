{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\pages\\\\LoginPage\\\\index.js\";\nimport React, { useRef, useEffect, useState } from 'react';\n\nconst CameraCapture = () => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [photo, setPhoto] = useState(null);\n  useEffect(() => {\n    // Check if getUserMedia is supported\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      // Get user media permissions and start video stream\n      navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: false\n      }).then(stream => {\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      }).catch(error => {\n        console.error(\"获取摄像头权限失败:\", error);\n      });\n    } else {\n      console.error(\"Media Devices not supported in this browser.\");\n    }\n  }, []);\n\n  const capturePhoto = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    const video = videoRef.current; // Set canvas dimensions\n\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight; // Draw the video frame to the canvas\n\n    context.drawImage(video, 0, 0); // Convert the canvas to a data URL and set it as the photo source\n\n    const photoURL = canvas.toDataURL();\n    setPhoto(photoURL);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"cameraContainer\",\n    style: styles.cameraContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    ref: videoRef,\n    width: \"345\",\n    height: \"210\",\n    autoPlay: true,\n    style: styles.video,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.frameContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.mask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.frame,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: { ...styles.corner,\n      ...styles.topLeft\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: { ...styles.corner,\n      ...styles.topRight\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: { ...styles.corner,\n      ...styles.bottomLeft\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: { ...styles.corner,\n      ...styles.bottomRight\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: capturePhoto,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, \"\\u62CD\\u716711\"), /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      display: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), photo && /*#__PURE__*/React.createElement(\"img\", {\n    src: photo,\n    alt: \"Captured Photo\",\n    style: styles.photo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }));\n};\n\nconst styles = {\n  cameraContainer: {\n    position: 'relative',\n    width: '345px',\n    height: '210px',\n    overflow: 'hidden'\n  },\n  video: {\n    objectFit: 'cover'\n  },\n  frameContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%'\n  },\n  mask: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%'\n  },\n  frame: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    width: '200px',\n    height: '90px',\n    zIndex: 10,\n    backgroundColor: 'transparent'\n  },\n  corner: {\n    position: 'absolute',\n    borderColor: 'red',\n    borderStyle: 'solid',\n    padding: '6px'\n  },\n  topLeft: {\n    top: '1px',\n    left: '1px',\n    borderWidth: '2px 0 0 2px'\n  },\n  topRight: {\n    top: '1px',\n    right: '1px',\n    borderWidth: '2px 2px 0 0'\n  },\n  bottomLeft: {\n    bottom: '1px',\n    left: '1px',\n    borderWidth: '0 0 2px 2px'\n  },\n  bottomRight: {\n    bottom: '1px',\n    right: '1px',\n    borderWidth: '0 2px 2px 0'\n  },\n  photo: {\n    display: 'block',\n    width: '345px',\n    height: '210px'\n  }\n};\nexport default CameraCapture;","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/pages/LoginPage/index.js"],"names":["React","useRef","useEffect","useState","CameraCapture","videoRef","canvasRef","photo","setPhoto","navigator","mediaDevices","getUserMedia","video","audio","then","stream","current","srcObject","catch","error","console","capturePhoto","canvas","context","getContext","width","videoWidth","height","videoHeight","drawImage","photoURL","toDataURL","styles","cameraContainer","frameContainer","mask","frame","corner","topLeft","topRight","bottomLeft","bottomRight","display","position","overflow","objectFit","top","left","transform","zIndex","backgroundColor","borderColor","borderStyle","padding","borderWidth","right","bottom"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\n\r\nconst CameraCapture = () => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [photo, setPhoto] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Check if getUserMedia is supported\r\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n      // Get user media permissions and start video stream\r\n      navigator.mediaDevices\r\n        .getUserMedia({ video: true, audio: false })\r\n        .then((stream) => {\r\n          if (videoRef.current) {\r\n            videoRef.current.srcObject = stream;\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"获取摄像头权限失败:\", error);\r\n        });\r\n    } else {\r\n      console.error(\"Media Devices not supported in this browser.\");\r\n    }\r\n  }, []);\r\n\r\n  const capturePhoto = () => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext(\"2d\");\r\n    const video = videoRef.current;\r\n\r\n    // Set canvas dimensions\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n\r\n    // Draw the video frame to the canvas\r\n    context.drawImage(video, 0, 0);\r\n\r\n    // Convert the canvas to a data URL and set it as the photo source\r\n    const photoURL = canvas.toDataURL();\r\n    setPhoto(photoURL);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div id=\"cameraContainer\" style={styles.cameraContainer}>\r\n        <video\r\n          ref={videoRef}\r\n          width=\"345\"\r\n          height=\"210\"\r\n          autoPlay\r\n          style={styles.video}\r\n        />\r\n        <div style={styles.frameContainer}>\r\n          <div style={styles.mask}></div>\r\n          <div style={styles.frame}>\r\n            <div style={{ ...styles.corner, ...styles.topLeft }}></div>\r\n            <div style={{ ...styles.corner, ...styles.topRight }}></div>\r\n            <div style={{ ...styles.corner, ...styles.bottomLeft }}></div>\r\n            <div style={{ ...styles.corner, ...styles.bottomRight }}></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <button onClick={capturePhoto}>拍照11</button>\r\n      <canvas ref={canvasRef} style={{ display: 'none' }}></canvas>\r\n      {photo && <img src={photo} alt=\"Captured Photo\" style={styles.photo} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  cameraContainer: {\r\n    position: 'relative',\r\n    width: '345px',\r\n    height: '210px',\r\n    overflow: 'hidden',\r\n  },\r\n  video: {\r\n    objectFit: 'cover',\r\n  },\r\n  frameContainer: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  mask: {\r\n    position: 'absolute',\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  frame: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: '200px',\r\n    height: '90px',\r\n    zIndex: 10,\r\n    backgroundColor: 'transparent',\r\n  },\r\n  corner: {\r\n    position: 'absolute',\r\n    borderColor: 'red',\r\n    borderStyle: 'solid',\r\n    padding: '6px',\r\n  },\r\n  topLeft: {\r\n    top: '1px',\r\n    left: '1px',\r\n    borderWidth: '2px 0 0 2px',\r\n  },\r\n  topRight: {\r\n    top: '1px',\r\n    right: '1px',\r\n    borderWidth: '2px 2px 0 0',\r\n  },\r\n  bottomLeft: {\r\n    bottom: '1px',\r\n    left: '1px',\r\n    borderWidth: '0 0 2px 2px',\r\n  },\r\n  bottomRight: {\r\n    bottom: '1px',\r\n    right: '1px',\r\n    borderWidth: '0 2px 2px 0',\r\n  },\r\n  photo: {\r\n    display: 'block',\r\n    width: '345px',\r\n    height: '210px',\r\n  },\r\n};\r\n\r\nexport default CameraCapture;\r\n"]},"metadata":{},"sourceType":"module"}