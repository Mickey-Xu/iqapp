{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\layouts\\\\PrimaryLayout\\\\index.js\";\nimport { AppBar, BottomNavigation, BottomNavigationAction, Toolbar, Typography } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { ArrowBackIos, AssignmentOutlined, Refresh, Schedule } from \"@material-ui/icons\";\nimport * as action from \"actions\";\nimport fitter2 from \"assets/svg/fitter2.svg\";\nimport fitter3 from \"assets/svg/fitter3.svg\";\nimport Alert from \"components/Alert\";\nimport Loading from \"components/Loading\";\nimport { LocalizeContext } from \"i18n\";\nimport projectIcon from \"img/project.png\";\nimport SelectedProjectIcon from \"img/selectedProject.png\";\nimport { db } from \"js/db\";\nimport * as repo from \"js/fetch\";\nimport { getAwaitComplateAwaitCloseCount } from \"js/util\";\nimport { recordRefreshTime } from \"js/util\";\nimport React, { Fragment, useEffect, useRef } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    logout: () => {\n      dispatch(action.logout());\n    },\n    refresh: () => {\n      dispatch(action.fetchAll());\n    },\n    getData: () => {\n      dispatch(action.fetchAll(repo.type.CACHE));\n    },\n    getLanguage: () => {\n      db.cache.get(\"settings\").then(cache => {\n        if (!cache) {\n          return;\n        }\n\n        const {\n          language: {\n            language\n          }\n        } = cache.data;\n        dispatch(action.setLanguage(language));\n      });\n    },\n    getRefreshData: () => {\n      recordRefreshTime(dispatch);\n    },\n    setScrollPosition: data => {\n      dispatch(action.setScrollPosition(data));\n    },\n    backPage: (history, name, root) => {\n      if (name === \"activity Document\") {\n        dispatch(action.setOrderDetailPageDefaultTab(root));\n        history.goBack();\n      } else {\n        history.goBack();\n      }\n    }\n  };\n};\n\nconst mapStateToProps = state => {\n  let tasks = Object.keys(state === null || state === void 0 ? void 0 : state.tasks).length > 0 ? state === null || state === void 0 ? void 0 : state.tasks : [];\n  var taskSum = 0;\n  const taskList = getAwaitComplateAwaitCloseCount(tasks);\n  const duplicateRemovalTasks = taskList.filter((task, index, self) => index === self.findIndex(t => t.taskType === task.taskType));\n  duplicateRemovalTasks.forEach(item => {\n    taskSum += item.awaitStartNum + item.awaitComplateNum + item.awaitCloseNum;\n  });\n  return {\n    taskSum\n  };\n};\n\nconst TitleBar = withStyles(({\n  spacing\n}) => {\n  return {\n    appBar: {\n      borderBottomColor: \"#e0e0e0\",\n      borderBottomStyle: \"solid\",\n      borderBottomWidth: 1\n    },\n    toolbar: {\n      minHeight: spacing(6.5),\n      backgroundColor: \"rgb(255,255,255)\",\n      color: \"black\"\n    },\n    icon: {\n      minWidth: spacing(5)\n    },\n    title1: {\n      textAlign: \"left\",\n      flex: 1,\n      fontFamily: \"'微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑'\",\n      fontSize: 18\n    },\n    title2: {\n      textAlign: \"center\",\n      flex: 1,\n      fontFamily: \"'微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑'\",\n      fontSize: \"18px\"\n    }\n  };\n})(connect(null, mapDispatchToProps)(({\n  classes,\n  refresh,\n  title,\n  pageLevel,\n  isShowRefreshButton = false,\n  goBack\n}) => {\n  return /*#__PURE__*/React.createElement(AppBar, {\n    elevation: 0,\n    className: classes.appBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, pageLevel !== 1 && /*#__PURE__*/React.createElement(ArrowBackIos, {\n    \"aria-label\": \"back\",\n    fontSize: \"small\",\n    onClick: () => {\n      goBack();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: pageLevel === 1 ? classes.title1 : classes.title2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, title), isShowRefreshButton && /*#__PURE__*/React.createElement(Refresh, {\n    fontSize: \"small\",\n    onClick: () => refresh(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  })));\n}));\nconst BottomBar = withStyles(({\n  spacing\n}) => {\n  return {\n    root: {\n      position: \"fixed\",\n      bottom: 0,\n      width: \"100%\",\n      height: window.screen.height >= \"812\" ? spacing(10) : spacing(9)\n    },\n    content: {\n      padding: 0,\n      \"&$selected\": {\n        paddingTop: 0\n      },\n      minWidth: \"unset\"\n    },\n    selected: {},\n    project: {\n      marginBottom: spacing(0.4),\n      transform: \"scaleX(-1)\"\n    }\n  };\n})(({\n  classes,\n  selected,\n  taskSum\n}) => {\n  const i18n = React.useContext(LocalizeContext);\n  const auth = JSON.parse(window.localStorage.getItem(\"auth\"));\n  let roles = auth === null || auth === void 0 ? void 0 : auth.roles;\n  const isEISV = roles.indexOf('SL') > -1;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BottomNavigation, {\n    value: selected,\n    showLabels: true,\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BottomNavigationAction, {\n    style: {\n      display: isEISV ? 'none' : ''\n    },\n    classes: {\n      root: classes.content,\n      selected: classes.selected\n    },\n    icon: /*#__PURE__*/React.createElement(Schedule, {\n      style: {\n        height: \"22\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }),\n    component: Link,\n    label: i18n.JOBLIST_ACTIVITY,\n    to: \"/\",\n    value: \"activities\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BottomNavigationAction, {\n    style: {\n      display: isEISV ? 'none' : ''\n    },\n    classes: {\n      root: classes.content,\n      selected: classes.selected\n    },\n    component: Link,\n    icon: /*#__PURE__*/React.createElement(\"img\", {\n      src: selected === \"projects\" ? SelectedProjectIcon : projectIcon,\n      height: \"20\",\n      className: classes.project,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }),\n    to: \"/projects\",\n    label: i18n.INSTAPP_PROJECTLIST_PROJECT,\n    value: \"projects\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BottomNavigationAction, {\n    classes: {\n      root: classes.content,\n      selected: classes.selected\n    },\n    component: Link,\n    icon: /*#__PURE__*/React.createElement(AssignmentOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }),\n    label: i18n.INSTAPP_JOBLIST_TASKS,\n    to: \"/TasksGroupPage\",\n    value: \"TasksGroupPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BottomNavigationAction, {\n    classes: {\n      root: classes.content,\n      selected: classes.selected\n    },\n    component: Link,\n    icon: /*#__PURE__*/React.createElement(\"img\", {\n      src: selected === \"me\" ? fitter2 : fitter3,\n      width: \"26\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }),\n    label: i18n.INSTAPP_JOBLIST_ME,\n    to: \"/me\",\n    value: \"me\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Hint, {\n    taskSum: taskSum,\n    isEISV: isEISV,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }\n  }));\n});\nconst Hint = withStyles(({\n  spacing\n}) => {\n  return {\n    taskCount: {\n      position: \"fixed\",\n      bottom: spacing(5),\n      backgroundColor: \"red\",\n      borderRadius: \"30px\",\n      color: \"white\",\n      width: \"24px\",\n      height: \"24px\",\n      textAlign: \"center\",\n      lineHeight: spacing(3) + \"px\"\n    }\n  };\n})(({\n  classes,\n  taskSum,\n  isEISV\n}) => {\n  const history = useHistory();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 5\n    }\n  }, taskSum > 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.taskCount,\n    style: isEISV ? {\n      right: '64%'\n    } : {\n      right: '30%'\n    },\n    onClick: () => history.push(\"/TasksGroupPage\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  }, taskSum));\n});\nconst PrimaryLayout = withStyles(({\n  spacing\n}) => {\n  return {\n    main: {\n      position: \"fixed\",\n      top: spacing(6.5),\n      left: 0,\n      right: 0,\n      bottom: window.screen.height >= \"812\" ? spacing(10) : spacing(9),\n      overflowY: \"scroll\"\n    }\n  };\n})(({\n  classes,\n  children,\n  name,\n  getData,\n  getLanguage,\n  getRefreshData,\n  title,\n  pageLevel,\n  isShowRefreshButton,\n  isDirectReturn = true,\n  goBack,\n  isFetchAll = true,\n  backPage,\n  setScrollPosition,\n  root,\n  taskSum\n}) => {\n  const history = useHistory();\n  const location = useLocation();\n  const mainRef = useRef(null);\n  let scrollPos = 0;\n  useEffect(() => {\n    repo.initDB();\n    getLanguage();\n    document.title = `安装质量管理App`;\n    isFetchAll && getData();\n    getRefreshData();\n  }, [getLanguage, title, getData, getRefreshData, isFetchAll]);\n\n  const scrollEvent = e => {\n    scrollPos = e.target.scrollTop;\n    setScrollPosition({\n      namepath: location.pathname,\n      position: scrollPos\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TitleBar, {\n    title: title,\n    pageLevel: pageLevel,\n    isShowRefreshButton: isShowRefreshButton,\n    goBack: () => isDirectReturn ? backPage(history, name, root) : goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: classes.main,\n    onScroll: scrollEvent,\n    ref: mainRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }\n  }, children), /*#__PURE__*/React.createElement(BottomBar, {\n    selected: name,\n    taskSum: taskSum,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Alert, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }\n  }));\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(PrimaryLayout);","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/layouts/PrimaryLayout/index.js"],"names":["AppBar","BottomNavigation","BottomNavigationAction","Toolbar","Typography","withStyles","ArrowBackIos","AssignmentOutlined","Refresh","Schedule","action","Alert","Loading","LocalizeContext","projectIcon","SelectedProjectIcon","db","repo","getAwaitComplateAwaitCloseCount","recordRefreshTime","React","Fragment","useEffect","useRef","connect","Link","useHistory","useLocation","mapDispatchToProps","dispatch","logout","refresh","fetchAll","getData","type","CACHE","getLanguage","cache","get","then","language","data","setLanguage","getRefreshData","setScrollPosition","backPage","history","name","root","setOrderDetailPageDefaultTab","goBack","mapStateToProps","state","tasks","Object","keys","length","taskSum","taskList","duplicateRemovalTasks","filter","task","index","self","findIndex","t","taskType","forEach","item","awaitStartNum","awaitComplateNum","awaitCloseNum","TitleBar","spacing","appBar","borderBottomColor","borderBottomStyle","borderBottomWidth","toolbar","minHeight","backgroundColor","color","icon","minWidth","title1","textAlign","flex","fontFamily","fontSize","title2","classes","title","pageLevel","isShowRefreshButton","BottomBar","position","bottom","width","height","window","screen","content","padding","paddingTop","selected","project","marginBottom","transform","i18n","useContext","auth","JSON","parse","localStorage","getItem","roles","isEISV","indexOf","display","JOBLIST_ACTIVITY","INSTAPP_PROJECTLIST_PROJECT","INSTAPP_JOBLIST_TASKS","fitter2","fitter3","INSTAPP_JOBLIST_ME","Hint","taskCount","borderRadius","lineHeight","right","push","PrimaryLayout","main","top","left","overflowY","children","isDirectReturn","isFetchAll","location","mainRef","scrollPos","initDB","document","scrollEvent","e","target","scrollTop","namepath","pathname"],"mappings":"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","sourcesContent":["import {\r\n  AppBar,\r\n  BottomNavigation,\r\n  BottomNavigationAction,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  ArrowBackIos,\r\n  AssignmentOutlined,\r\n  Refresh,\r\n  Schedule,\r\n} from \"@material-ui/icons\";\r\nimport * as action from \"actions\";\r\nimport fitter2 from \"assets/svg/fitter2.svg\";\r\nimport fitter3 from \"assets/svg/fitter3.svg\";\r\nimport Alert from \"components/Alert\";\r\nimport Loading from \"components/Loading\";\r\nimport { LocalizeContext } from \"i18n\";\r\nimport projectIcon from \"img/project.png\";\r\nimport SelectedProjectIcon from \"img/selectedProject.png\";\r\nimport { db } from \"js/db\";\r\nimport * as repo from \"js/fetch\";\r\nimport { getAwaitComplateAwaitCloseCount } from \"js/util\";\r\nimport { recordRefreshTime } from \"js/util\";\r\nimport React, { Fragment, useEffect, useRef } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    logout: () => {\r\n      dispatch(action.logout());\r\n    },\r\n    refresh: () => {\r\n      dispatch(action.fetchAll());\r\n    },\r\n    getData: () => {\r\n      dispatch(action.fetchAll(repo.type.CACHE));\r\n    },\r\n    getLanguage: () => {\r\n      db.cache.get(\"settings\").then((cache) => {\r\n        if (!cache) {\r\n          return;\r\n        }\r\n        const {\r\n          language: { language },\r\n        } = cache.data;\r\n        dispatch(action.setLanguage(language));\r\n      });\r\n    },\r\n    getRefreshData: () => {\r\n      recordRefreshTime(dispatch);\r\n    },\r\n    setScrollPosition: (data) => {\r\n      dispatch(action.setScrollPosition(data));\r\n    },\r\n    backPage: (history, name, root) => {\r\n      if (name === \"activity Document\") {\r\n        dispatch(action.setOrderDetailPageDefaultTab(root));\r\n        history.goBack();\r\n      } else {\r\n        history.goBack();\r\n      }\r\n    },\r\n  };\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  let tasks = Object.keys(state?.tasks).length > 0 ? state?.tasks : [];\r\n  var taskSum = 0;\r\n  const taskList = getAwaitComplateAwaitCloseCount(tasks);\r\n  const duplicateRemovalTasks = taskList.filter((task, index, self) =>\r\n    index === self.findIndex(t => t.taskType === task.taskType)\r\n  );\r\n  duplicateRemovalTasks.forEach((item) => {\r\n    taskSum += (item.awaitStartNum + item.awaitComplateNum + item.awaitCloseNum)\r\n  })\r\n\r\n  return { taskSum };\r\n};\r\n\r\nconst TitleBar = withStyles(({ spacing }) => {\r\n  return {\r\n    appBar: {\r\n      borderBottomColor: \"#e0e0e0\",\r\n      borderBottomStyle: \"solid\",\r\n      borderBottomWidth: 1,\r\n    },\r\n    toolbar: {\r\n      minHeight: spacing(6.5),\r\n      backgroundColor: \"rgb(255,255,255)\",\r\n      color: \"black\",\r\n    },\r\n    icon: {\r\n      minWidth: spacing(5),\r\n    },\r\n    title1: {\r\n      textAlign: \"left\",\r\n      flex: 1,\r\n      fontFamily: \"'微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑'\",\r\n      fontSize: 18,\r\n    },\r\n    title2: {\r\n      textAlign: \"center\",\r\n      flex: 1,\r\n      fontFamily: \"'微软雅黑 Bold', '微软雅黑 Regular', '微软雅黑'\",\r\n      fontSize: \"18px\",\r\n    },\r\n  };\r\n})(\r\n  connect(\r\n    null,\r\n    mapDispatchToProps\r\n  )(\r\n    ({\r\n      classes,\r\n      refresh,\r\n      title,\r\n      pageLevel,\r\n      isShowRefreshButton = false,\r\n      goBack,\r\n    }) => {\r\n      return (\r\n        <AppBar elevation={0} className={classes.appBar}>\r\n          <Toolbar className={classes.toolbar}>\r\n            {pageLevel !== 1 && (\r\n              <ArrowBackIos\r\n                aria-label=\"back\"\r\n                fontSize=\"small\"\r\n                onClick={() => {\r\n                  goBack();\r\n                }}\r\n              />\r\n            )}\r\n            <Typography\r\n              variant=\"subtitle1\"\r\n              className={pageLevel === 1 ? classes.title1 : classes.title2}\r\n            >\r\n              {title}\r\n            </Typography>\r\n            {isShowRefreshButton && (\r\n              <Refresh fontSize=\"small\" onClick={() => refresh()} />\r\n            )}\r\n          </Toolbar>\r\n        </AppBar>\r\n      );\r\n    }\r\n  )\r\n);\r\n\r\nconst BottomBar = withStyles(({ spacing }) => {\r\n  return {\r\n    root: {\r\n      position: \"fixed\",\r\n      bottom: 0,\r\n      width: \"100%\",\r\n      height: window.screen.height >= \"812\" ? spacing(10) : spacing(9),\r\n    },\r\n    content: {\r\n      padding: 0,\r\n      \"&$selected\": {\r\n        paddingTop: 0,\r\n      },\r\n      minWidth: \"unset\",\r\n    },\r\n    selected: {},\r\n    project: {\r\n      marginBottom: spacing(0.4),\r\n      transform: \"scaleX(-1)\",\r\n    },\r\n  };\r\n})(({ classes, selected, taskSum }) => {\r\n  const i18n = React.useContext(LocalizeContext);\r\n  const auth = JSON.parse(window.localStorage.getItem(\"auth\"));\r\n  let roles = auth?.roles;\r\n  const isEISV = roles.indexOf('SL') > -1;\r\n\r\n  return (\r\n    <div>\r\n      <BottomNavigation value={selected} showLabels className={classes.root}>\r\n        <BottomNavigationAction\r\n          style={{ display: isEISV ?'none':''}}\r\n          classes={{\r\n            root: classes.content,\r\n            selected: classes.selected,\r\n          }}\r\n          icon={<Schedule style={{ height: \"22\" }} />}\r\n          component={Link}\r\n          label={i18n.JOBLIST_ACTIVITY}\r\n          to=\"/\"\r\n          value=\"activities\"\r\n        />\r\n        <BottomNavigationAction\r\n          style={{ display: isEISV ? 'none' : '' }}\r\n          classes={{\r\n            root: classes.content,\r\n            selected: classes.selected,\r\n          }}\r\n          component={Link}\r\n          icon={\r\n            <img\r\n              src={selected === \"projects\" ? SelectedProjectIcon : projectIcon}\r\n              height=\"20\"\r\n              className={classes.project}\r\n              alt=\"\"\r\n            />\r\n          }\r\n          to=\"/projects\"\r\n          label={i18n.INSTAPP_PROJECTLIST_PROJECT}\r\n          value=\"projects\"\r\n        />\r\n        <BottomNavigationAction\r\n          classes={{\r\n            root: classes.content,\r\n            selected: classes.selected,\r\n          }}\r\n          component={Link}\r\n          icon={<AssignmentOutlined />}\r\n          label={i18n.INSTAPP_JOBLIST_TASKS}\r\n          to=\"/TasksGroupPage\"\r\n          value=\"TasksGroupPage\"\r\n        />\r\n        <BottomNavigationAction\r\n          classes={{\r\n            root: classes.content,\r\n            selected: classes.selected,\r\n          }}\r\n          component={Link}\r\n          icon={\r\n            <img\r\n              src={selected === \"me\" ? fitter2 : fitter3}\r\n              width=\"26\"\r\n              alt=\"\"\r\n            />\r\n          }\r\n          label={i18n.INSTAPP_JOBLIST_ME}\r\n          to=\"/me\"\r\n          value=\"me\"\r\n        />\r\n      </BottomNavigation>\r\n      <Hint taskSum={taskSum} isEISV={isEISV} />\r\n    </div>\r\n  );\r\n});\r\n\r\nconst Hint = withStyles(({ spacing }) => {\r\n  return {\r\n    taskCount: {\r\n      position: \"fixed\",\r\n      bottom: spacing(5),\r\n      backgroundColor: \"red\",\r\n      borderRadius: \"30px\",\r\n      color: \"white\",\r\n      width: \"24px\",\r\n      height: \"24px\",\r\n      textAlign: \"center\",\r\n      lineHeight: spacing(3) + \"px\",\r\n    },\r\n  };\r\n})(({ classes, taskSum, isEISV }) => {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <div>\r\n      {taskSum > 0 && (\r\n        <span\r\n          className={classes.taskCount}\r\n          style={isEISV ? {right:'64%'}: {right:'30%'}}\r\n          onClick={() => history.push(\"/TasksGroupPage\")}\r\n        >\r\n          {taskSum}\r\n        </span>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst PrimaryLayout = withStyles(({ spacing }) => {\r\n  return {\r\n    main: {\r\n      position: \"fixed\",\r\n      top: spacing(6.5),\r\n      left: 0,\r\n      right: 0,\r\n      bottom: window.screen.height >= \"812\" ? spacing(10) : spacing(9),\r\n      overflowY: \"scroll\",\r\n    },\r\n  };\r\n})(\r\n  ({\r\n    classes,\r\n    children,\r\n    name,\r\n    getData,\r\n    getLanguage,\r\n    getRefreshData,\r\n    title,\r\n    pageLevel,\r\n    isShowRefreshButton,\r\n    isDirectReturn = true,\r\n    goBack,\r\n    isFetchAll = true,\r\n    backPage,\r\n    setScrollPosition,\r\n    root,\r\n    taskSum,\r\n  }) => {\r\n    const history = useHistory();\r\n\r\n    const location = useLocation();\r\n\r\n    const mainRef = useRef(null);\r\n\r\n    let scrollPos = 0;\r\n    useEffect(() => {\r\n      repo.initDB();\r\n\r\n      getLanguage();\r\n      document.title = `安装质量管理App`;\r\n      isFetchAll && getData();\r\n      getRefreshData();\r\n    }, [getLanguage, title, getData, getRefreshData, isFetchAll]);\r\n\r\n    const scrollEvent = (e) => {\r\n      scrollPos = e.target.scrollTop;\r\n      setScrollPosition({ namepath: location.pathname, position: scrollPos });\r\n    };\r\n    return (\r\n      <Fragment>\r\n        <TitleBar\r\n          title={title}\r\n          pageLevel={pageLevel}\r\n          isShowRefreshButton={isShowRefreshButton}\r\n          goBack={() =>\r\n            isDirectReturn ? backPage(history, name, root) : goBack()\r\n          }\r\n        />\r\n        <main className={classes.main} onScroll={scrollEvent} ref={mainRef}>\r\n          {children}\r\n        </main>\r\n        <BottomBar selected={name} taskSum={taskSum} />\r\n        <Loading />\r\n        <Alert />\r\n      </Fragment>\r\n    );\r\n  }\r\n);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PrimaryLayout);\r\n"]},"metadata":{},"sourceType":"module"}