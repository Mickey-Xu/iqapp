{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\SCF-NI_PM_App\\\\SCF.InstallationQuality\\\\react-client\\\\src\\\\components\\\\TemplateForm\\\\Photo\\\\index.js\";\nimport React, { useRef } from 'react';\n\nconst CameraComponent = () => {\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  const handleStartCamera = () => {\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(stream => {\n      videoRef.current.srcObject = stream;\n      videoRef.current.play();\n    }).catch(error => {\n      console.error(\"Error accessing camera: \", error);\n    });\n  };\n\n  const handleCapture = () => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n    context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    ref: videoRef,\n    style: {\n      width: '100%',\n      height: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      display: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"frame\",\n    style: frameStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleStartCamera,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, \"\\u6253\\u5F00\\u76F8\\u673A\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleCapture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }, \"\\u62CD\\u7167\"));\n};\n\nconst frameStyle = {\n  position: 'absolute',\n  top: '10%',\n  left: '10%',\n  width: '80%',\n  height: '80%',\n  border: '5px solid rgba(255, 255, 255, 0.7)',\n  boxShadow: '0 0 10px rgba(0, 0, 0, 0.5)',\n  pointerEvents: 'none' // 使取景框不阻挡点击事件\n\n};\nexport default CameraComponent;","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/components/TemplateForm/Photo/index.js"],"names":["React","useRef","CameraComponent","videoRef","canvasRef","handleStartCamera","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","play","catch","error","console","handleCapture","canvas","context","getContext","drawImage","width","height","position","display","frameStyle","top","left","border","boxShadow","pointerEvents"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,QAA8B,OAA9B;;AAEA,MAAMC,eAAe,GAAG,MAAM;AAC5B,QAAMC,QAAQ,GAAGF,MAAM,CAAC,IAAD,CAAvB;AACA,QAAMG,SAAS,GAAGH,MAAM,CAAC,IAAD,CAAxB;;AAEA,QAAMI,iBAAiB,GAAG,MAAM;AAC9BC,IAAAA,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAApC,EACGC,IADH,CACSC,MAAD,IAAY;AAChBR,MAAAA,QAAQ,CAACS,OAAT,CAAiBC,SAAjB,GAA6BF,MAA7B;AACAR,MAAAA,QAAQ,CAACS,OAAT,CAAiBE,IAAjB;AACD,KAJH,EAKGC,KALH,CAKUC,KAAD,IAAW;AAChBC,MAAAA,OAAO,CAACD,KAAR,CAAc,0BAAd,EAA0CA,KAA1C;AACD,KAPH;AAQD,GATD;;AAWA,QAAME,aAAa,GAAG,MAAM;AAC1B,UAAMC,MAAM,GAAGf,SAAS,CAACQ,OAAzB;AACA,UAAMQ,OAAO,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAhB;AACAD,IAAAA,OAAO,CAACE,SAAR,CAAkBnB,QAAQ,CAACS,OAA3B,EAAoC,CAApC,EAAuC,CAAvC,EAA0CO,MAAM,CAACI,KAAjD,EAAwDJ,MAAM,CAACK,MAA/D;AACD,GAJD;;AAMA,sBACE;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,GAAG,EAAEtB,QAAZ;AAAsB,IAAA,KAAK,EAAE;AAAEoB,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,MAAM,EAAE;AAAzB,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAQ,IAAA,GAAG,EAAEpB,SAAb;AAAwB,IAAA,KAAK,EAAE;AAAEsB,MAAAA,OAAO,EAAE;AAAX,KAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAuB,IAAA,KAAK,EAAEC,UAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIE;AAAQ,IAAA,OAAO,EAAEtB,iBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJF,eAKE;AAAQ,IAAA,OAAO,EAAEa,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,CADF;AASD,CA9BD;;AAgCA,MAAMS,UAAU,GAAG;AACjBF,EAAAA,QAAQ,EAAE,UADO;AAEjBG,EAAAA,GAAG,EAAE,KAFY;AAGjBC,EAAAA,IAAI,EAAE,KAHW;AAIjBN,EAAAA,KAAK,EAAE,KAJU;AAKjBC,EAAAA,MAAM,EAAE,KALS;AAMjBM,EAAAA,MAAM,EAAE,oCANS;AAOjBC,EAAAA,SAAS,EAAE,6BAPM;AAQjBC,EAAAA,aAAa,EAAE,MARE,CAQM;;AARN,CAAnB;AAWA,eAAe9B,eAAf","sourcesContent":["import React, { useRef } from 'react';\r\n\r\nconst CameraComponent = () => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  const handleStartCamera = () => {\r\n    navigator.mediaDevices.getUserMedia({ video: true })\r\n      .then((stream) => {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.play();\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error accessing camera: \", error);\r\n      });\r\n  };\r\n\r\n  const handleCapture = () => {\r\n    const canvas = canvasRef.current;\r\n    const context = canvas.getContext('2d');\r\n    context.drawImage(videoRef.current, 0, 0, canvas.width, canvas.height);\r\n  };\r\n\r\n  return (\r\n    <div style={{ position: 'relative' }}>\r\n      <video ref={videoRef} style={{ width: '100%', height: 'auto' }} />\r\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n      <div className=\"frame\" style={frameStyle}></div>\r\n      <button onClick={handleStartCamera}>打开相机</button>\r\n      <button onClick={handleCapture}>拍照</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst frameStyle = {\r\n  position: 'absolute',\r\n  top: '10%',\r\n  left: '10%',\r\n  width: '80%',\r\n  height: '80%',\r\n  border: '5px solid rgba(255, 255, 255, 0.7)',\r\n  boxShadow: '0 0 10px rgba(0, 0, 0, 0.5)',\r\n  pointerEvents: 'none', // 使取景框不阻挡点击事件\r\n};\r\n\r\nexport default CameraComponent;"]},"metadata":{},"sourceType":"module"}