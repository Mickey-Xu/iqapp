{"ast":null,"code":"import _ from \"lodash\";\nexport const showInActivityListSteps = (activityAuth, role) => {\n  const rolesMapper = {\n    PE: \"pe\",\n    \"Subcon TL\": \"subconTL\",\n    \"SL\": \"sl\"\n  };\n  const result = [];\n\n  if (role === \"admin\") {\n    Object.keys(rolesMapper).forEach(key => {\n      const tmp = showInActivityListSteps(activityAuth, key);\n      result.push(...tmp);\n    });\n    return Array.from(new Set([...result]));\n  }\n\n  const authDesc = activityAuth[rolesMapper[role]];\n  const steps = Array.from(new Set([...authDesc.authorization.c, ...authDesc.documentAuthorization.c]));\n  steps.forEach(step => {\n    result.push(...step.split(\"/\"));\n  });\n  return result;\n};\nexport const orderDetailSteps = (orderActivities, orderNumber, activityAuth, role) => {\n  const rolesMapper = {\n    PE: \"pe\",\n    \"Subcon TL\": \"subconTL\",\n    \"SL\": \"sl\"\n  };\n  const result = [];\n\n  if (role === \"admin\") {\n    Object.keys(rolesMapper).forEach(key => {\n      const tmp = orderDetailSteps(orderActivities, orderNumber, activityAuth, key);\n      result.push(...tmp);\n    });\n    return Array.from(new Set([...result]));\n  }\n\n  const authDesc = activityAuth[rolesMapper[role]];\n  const steps = Array.from(new Set([...authDesc.authorization.c, ...authDesc.documentAuthorization.c]));\n  var filteredSteps = steps.filter(value => {\n    return value.length === 4;\n  });\n\n  if (role === \"PE\") {\n    // 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      filteredSteps.push(\"7020\");\n    } else {\n      // 14 steps\n      filteredSteps.push(\"70D0\");\n    }\n  } else if (role === \"SL\") {\n    filteredSteps.push(\"7800\");\n  } else {\n    // 3 steps\n    // subcon tl:  remove 7020 when this order contains 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      const removeSteps = [\"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\", \"7000\"];\n\n      _.remove(filteredSteps, number => {\n        return removeSteps.includes(number);\n      });\n    }\n  }\n\n  return [...new Set(filteredSteps)];\n};\nexport const allActivitiesNosInProjectProgress = (activityAuth, role) => {\n  const rolesMapper = {\n    PE: \"pe\",\n    \"Subcon TL\": \"subconTL\",\n    SL: \"sl\"\n  };\n  const result = [];\n\n  if (role === \"admin\") {\n    Object.keys(rolesMapper).forEach(key => {\n      const tmp = allActivitiesNosInProjectProgress(activityAuth, role);\n      result.push(...tmp);\n    });\n    return Array.from(new Set([...result]));\n  }\n\n  const authDesc = activityAuth[rolesMapper[role]];\n  const authActivities = Array.from(new Set([...authDesc.authorization.c, ...authDesc.authorization.r]));\n  var filteredActivities = authActivities.filter(value => {\n    return value.length === 4;\n  });\n  const installationSteps = [\"7010\", \"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\", \"7600\"];\n  filteredActivities = filteredActivities.filter(value => !installationSteps.includes(value));\n  return filteredActivities;\n};\nexport const allOrderDetailSteps = (orderActivities, orderNumber, activityAuth, role) => {\n  const rolesMapper = {\n    PE: \"pe\",\n    \"Subcon TL\": \"subconTL\",\n    \"SL\": \"sl\"\n  };\n  const result = [];\n\n  if (role === \"admin\") {\n    Object.keys(rolesMapper).forEach(key => {\n      const tmp = allOrderDetailSteps(orderActivities, orderNumber, activityAuth, key);\n      result.push(...tmp);\n    });\n    return Array.from(new Set([...result]));\n  }\n\n  const authDesc = activityAuth[rolesMapper[role]];\n  const steps = Array.from(new Set([...authDesc.authorization.c, ...authDesc.documentAuthorization.c, ...authDesc.authorization.r, ...authDesc.documentAuthorization.r]));\n  var filteredSteps = steps.filter(value => {\n    return value.length === 4;\n  });\n\n  if (role === \"PE\") {\n    // 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      filteredSteps.push(\"7020\");\n    } else {\n      // 14 steps\n      filteredSteps.push(\"70D0\");\n    }\n  } else if (role === \"SL\") {\n    filteredSteps.push(\"7800\");\n  } else {\n    // 3 steps\n    // subcon tl:  remove 7020 when this order contains 3 steps\n    // add 7020/70D0\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      const removeSteps = [\"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\"];\n\n      _.remove(filteredSteps, number => {\n        return removeSteps.includes(number);\n      });\n    } else {\n      // 14 steps\n      filteredSteps.push(\"70D0\");\n    }\n  }\n\n  return Array.from(new Set([...filteredSteps]));\n};\nexport const authorizationC = (orderActivities, orderNumber, activityAuth, role) => {\n  const rolesMapper = {\n    PE: \"pe\",\n    \"Subcon TL\": \"subconTL\",\n    SL: \"sl\"\n  };\n  const result = [];\n\n  if (role === \"admin\") {\n    Object.keys(rolesMapper).forEach(key => {\n      const tmp = authorizationC(orderActivities, orderNumber, activityAuth, key);\n      result.push(...tmp);\n    });\n    return Array.from(new Set([...result]));\n  }\n\n  const authDesc = activityAuth[rolesMapper[role]];\n  const steps = Array.from(new Set([...authDesc.authorization.c]));\n  var filteredSteps = steps.filter(value => {\n    return value.length === 4;\n  });\n\n  if (role === \"PE\") {\n    // 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      filteredSteps.push(\"7020\");\n    } else {\n      // 14 steps\n      filteredSteps.push(\"70D0\");\n    }\n  } else {\n    // 3 steps\n    // subcon tl:  remove 7020 when this order contains 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      const removeSteps = [\"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\"];\n\n      _.remove(filteredSteps, number => {\n        return removeSteps.includes(number);\n      });\n    }\n  }\n\n  return [...new Set(filteredSteps)];\n};\nexport const documentAuthorizationC = (orderActivities, orderNumber, activityAuth, role) => {\n  const rolesMapper = {\n    PE: \"pe\",\n    \"Subcon TL\": \"subconTL\",\n    \"SL\": \"sl\"\n  };\n  const result = [];\n\n  if (role === \"admin\") {\n    Object.keys(rolesMapper).forEach(key => {\n      const tmp = documentAuthorizationC(orderActivities, orderNumber, activityAuth, key);\n      result.push(...tmp);\n    });\n    return Array.from(new Set([...result]));\n  }\n\n  const authDesc = activityAuth[rolesMapper[role]];\n  const steps = Array.from(new Set([...authDesc.documentAuthorization.c]));\n  var filteredSteps = steps.filter(value => {\n    return value.length === 4;\n  });\n\n  if (role === \"PE\") {\n    // 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      filteredSteps.push(\"7020\");\n    } else {\n      // 14 steps\n      filteredSteps.push(\"70D0\");\n    }\n  } else if (role === \"SL\") {\n    filteredSteps.push(\"7800\");\n  } else {\n    // 3 steps\n    // subcon tl:  remove 7020 when this order contains 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      const removeSteps = [\"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\"];\n\n      _.remove(filteredSteps, number => {\n        return removeSteps.includes(number);\n      });\n    }\n  }\n\n  return [...new Set(filteredSteps)];\n};\nexport const documentAuthorizationR = (orderActivities, orderNumber, activityAuth, role) => {\n  const rolesMapper = {\n    PE: \"pe\",\n    \"Subcon TL\": \"subconTL\",\n    \"SL\": \"sl\"\n  };\n  const result = [];\n\n  if (role === \"admin\") {\n    Object.keys(rolesMapper).forEach(key => {\n      const tmp = documentAuthorizationR(orderActivities, orderNumber, activityAuth, key);\n      result.push(...tmp);\n    });\n    return Array.from(new Set([...result]));\n  }\n\n  const authDesc = activityAuth[rolesMapper[role]];\n  const steps = Array.from(new Set([...authDesc.documentAuthorization.c, ...authDesc.documentAuthorization.r]));\n  var filteredSteps = steps.filter(value => {\n    return value.length === 4;\n  });\n\n  if (role === \"PE\") {\n    // 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      filteredSteps.push(\"7020\");\n    } else {\n      // 14 steps\n      filteredSteps.push(\"70D0\");\n    }\n  } else if (role === \"SL\") {\n    filteredSteps.push(\"7800\");\n  } else {\n    // 3 steps\n    // subcon tl:  remove 7020 when this order contains 3 steps\n    if (orderActivities[orderNumber + \"-7020\"] && !orderActivities[orderNumber + \"-7030\"]) {\n      const removeSteps = [\"7020\", \"7030\", \"7040\", \"7050\", \"7060\", \"7070\", \"7080\", \"7090\", \"70A0\", \"70B0\", \"70C0\", \"70D0\"];\n\n      _.remove(filteredSteps, number => {\n        return removeSteps.includes(number);\n      });\n    }\n  }\n\n  return [...new Set(filteredSteps)];\n};","map":{"version":3,"sources":["C:/project/SCF-NI_PM_App/SCF.InstallationQuality/react-client/src/js/publicFn/authUtils.js"],"names":["_","showInActivityListSteps","activityAuth","role","rolesMapper","PE","result","Object","keys","forEach","key","tmp","push","Array","from","Set","authDesc","steps","authorization","c","documentAuthorization","step","split","orderDetailSteps","orderActivities","orderNumber","filteredSteps","filter","value","length","removeSteps","remove","number","includes","allActivitiesNosInProjectProgress","SL","authActivities","r","filteredActivities","installationSteps","allOrderDetailSteps","authorizationC","documentAuthorizationC","documentAuthorizationR"],"mappings":"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","sourcesContent":["import _ from \"lodash\";\r\n\r\nexport const showInActivityListSteps = (activityAuth, role) => {\r\n  const rolesMapper = {\r\n    PE: \"pe\",\r\n    \"Subcon TL\": \"subconTL\",\r\n    \"SL\":\"sl\"\r\n  };\r\n\r\n  const result = [];\r\n\r\n  if (role === \"admin\") {\r\n    Object.keys(rolesMapper).forEach((key) => {\r\n      const tmp = showInActivityListSteps(activityAuth, key);\r\n      result.push(...tmp);\r\n    });\r\n\r\n    return Array.from(new Set([...result]));\r\n  }\r\n\r\n  const authDesc = activityAuth[rolesMapper[role]];\r\n\r\n  const steps = Array.from(\r\n    new Set([...authDesc.authorization.c, ...authDesc.documentAuthorization.c])\r\n  );\r\n\r\n  steps.forEach((step) => {\r\n    result.push(...step.split(\"/\"));\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\nexport const orderDetailSteps = (\r\n  orderActivities,\r\n  orderNumber,\r\n  activityAuth,\r\n  role\r\n) => {\r\n  const rolesMapper = {\r\n    PE: \"pe\",\r\n    \"Subcon TL\": \"subconTL\",\r\n    \"SL\":\"sl\"\r\n  };\r\n\r\n  const result = [];\r\n\r\n  if (role === \"admin\") {\r\n    Object.keys(rolesMapper).forEach((key) => {\r\n      const tmp = orderDetailSteps(\r\n        orderActivities,\r\n        orderNumber,\r\n        activityAuth,\r\n        key\r\n      );\r\n      result.push(...tmp);\r\n    });\r\n\r\n    return Array.from(new Set([...result]));\r\n  }\r\n\r\n  const authDesc = activityAuth[rolesMapper[role]];\r\n\r\n  const steps = Array.from(\r\n    new Set([...authDesc.authorization.c, ...authDesc.documentAuthorization.c])\r\n  );\r\n\r\n  var filteredSteps = steps.filter((value) => {\r\n    return value.length === 4;\r\n  });\r\n\r\n  if (role === \"PE\") {\r\n    // 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      filteredSteps.push(\"7020\");\r\n    } else {\r\n      // 14 steps\r\n      filteredSteps.push(\"70D0\");\r\n    }\r\n  } else if (role === \"SL\") {\r\n    filteredSteps.push(\"7800\");\r\n   } else {\r\n    // 3 steps\r\n    // subcon tl:  remove 7020 when this order contains 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      const removeSteps = [\r\n        \"7020\",\r\n        \"7030\",\r\n        \"7040\",\r\n        \"7050\",\r\n        \"7060\",\r\n        \"7070\",\r\n        \"7080\",\r\n        \"7090\",\r\n        \"70A0\",\r\n        \"70B0\",\r\n        \"70C0\",\r\n        \"70D0\",\r\n        \"7000\"\r\n      ];\r\n\r\n      _.remove(filteredSteps, (number) => {\r\n        return removeSteps.includes(number);\r\n      });\r\n    }\r\n  }\r\n  return [...new Set(filteredSteps)];\r\n};\r\n\r\nexport const allActivitiesNosInProjectProgress = (activityAuth, role) => {\r\n  const rolesMapper = {\r\n    PE: \"pe\",\r\n    \"Subcon TL\": \"subconTL\",\r\n    SL:\"sl\"\r\n  };\r\n\r\n  const result = [];\r\n\r\n  if (role === \"admin\") {\r\n    Object.keys(rolesMapper).forEach((key) => {\r\n      const tmp = allActivitiesNosInProjectProgress(activityAuth, role);\r\n      result.push(...tmp);\r\n    });\r\n\r\n    return Array.from(new Set([...result]));\r\n  }\r\n\r\n  const authDesc = activityAuth[rolesMapper[role]];\r\n\r\n  const authActivities = Array.from(\r\n    new Set([...authDesc.authorization.c, ...authDesc.authorization.r])\r\n  );\r\n\r\n  var filteredActivities = authActivities.filter((value) => {\r\n    return value.length === 4;\r\n  });\r\n\r\n  const installationSteps = [\r\n    \"7010\",\r\n    \"7020\",\r\n    \"7030\",\r\n    \"7040\",\r\n    \"7050\",\r\n    \"7060\",\r\n    \"7070\",\r\n    \"7080\",\r\n    \"7090\",\r\n    \"70A0\",\r\n    \"70B0\",\r\n    \"70C0\",\r\n    \"70D0\",\r\n    \"7600\",\r\n  ];\r\n\r\n  filteredActivities = filteredActivities.filter(\r\n    (value) => !installationSteps.includes(value)\r\n  );\r\n\r\n  return filteredActivities;\r\n};\r\n\r\nexport const allOrderDetailSteps = (\r\n  orderActivities,\r\n  orderNumber,\r\n  activityAuth,\r\n  role\r\n) => {\r\n  const rolesMapper = {\r\n    PE: \"pe\",\r\n    \"Subcon TL\": \"subconTL\",\r\n    \"SL\":\"sl\"\r\n  };\r\n\r\n  const result = [];\r\n\r\n  if (role === \"admin\") {\r\n    Object.keys(rolesMapper).forEach((key) => {\r\n      const tmp = allOrderDetailSteps(\r\n        orderActivities,\r\n        orderNumber,\r\n        activityAuth,\r\n        key\r\n      );\r\n      result.push(...tmp);\r\n    });\r\n\r\n    return Array.from(new Set([...result]));\r\n  }\r\n\r\n  const authDesc = activityAuth[rolesMapper[role]];\r\n\r\n  const steps = Array.from(\r\n    new Set([\r\n      ...authDesc.authorization.c,\r\n      ...authDesc.documentAuthorization.c,\r\n      ...authDesc.authorization.r,\r\n      ...authDesc.documentAuthorization.r,\r\n    ])\r\n  );\r\n\r\n  var filteredSteps = steps.filter((value) => {\r\n    return value.length === 4;\r\n  });\r\n\r\n  if (role === \"PE\") {\r\n    // 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      filteredSteps.push(\"7020\");\r\n    } else {\r\n      // 14 steps\r\n      filteredSteps.push(\"70D0\");\r\n    }\r\n  } else if (role === \"SL\") {\r\n    filteredSteps.push(\"7800\");\r\n  } else {\r\n    // 3 steps\r\n    // subcon tl:  remove 7020 when this order contains 3 steps\r\n    // add 7020/70D0\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      const removeSteps = [\r\n        \"7030\",\r\n        \"7040\",\r\n        \"7050\",\r\n        \"7060\",\r\n        \"7070\",\r\n        \"7080\",\r\n        \"7090\",\r\n        \"70A0\",\r\n        \"70B0\",\r\n        \"70C0\",\r\n        \"70D0\",\r\n      ];\r\n\r\n      _.remove(filteredSteps, (number) => {\r\n        return removeSteps.includes(number);\r\n      });\r\n    } else {\r\n      // 14 steps\r\n      filteredSteps.push(\"70D0\");\r\n    }\r\n  }\r\n\r\n  return Array.from(new Set([...filteredSteps]));\r\n};\r\n\r\nexport const authorizationC = (\r\n  orderActivities,\r\n  orderNumber,\r\n  activityAuth,\r\n  role\r\n) => {\r\n  const rolesMapper = {\r\n    PE: \"pe\",\r\n    \"Subcon TL\": \"subconTL\",\r\n    SL:\"sl\"\r\n  };\r\n\r\n  const result = [];\r\n\r\n  if (role === \"admin\") {\r\n    Object.keys(rolesMapper).forEach((key) => {\r\n      const tmp = authorizationC(\r\n        orderActivities,\r\n        orderNumber,\r\n        activityAuth,\r\n        key\r\n      );\r\n      result.push(...tmp);\r\n    });\r\n\r\n    return Array.from(new Set([...result]));\r\n  }\r\n\r\n  const authDesc = activityAuth[rolesMapper[role]];\r\n\r\n  const steps = Array.from(new Set([...authDesc.authorization.c]));\r\n\r\n  var filteredSteps = steps.filter((value) => {\r\n    return value.length === 4;\r\n  });\r\n\r\n  if (role === \"PE\") {\r\n    // 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      filteredSteps.push(\"7020\");\r\n    } else {\r\n      // 14 steps\r\n      filteredSteps.push(\"70D0\");\r\n    }\r\n  } else {\r\n    // 3 steps\r\n    // subcon tl:  remove 7020 when this order contains 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      const removeSteps = [\r\n        \"7020\",\r\n        \"7030\",\r\n        \"7040\",\r\n        \"7050\",\r\n        \"7060\",\r\n        \"7070\",\r\n        \"7080\",\r\n        \"7090\",\r\n        \"70A0\",\r\n        \"70B0\",\r\n        \"70C0\",\r\n        \"70D0\",\r\n      ];\r\n\r\n      _.remove(filteredSteps, (number) => {\r\n        return removeSteps.includes(number);\r\n      });\r\n    }\r\n  }\r\n\r\n  return [...new Set(filteredSteps)];\r\n};\r\n\r\nexport const documentAuthorizationC = (\r\n  orderActivities,\r\n  orderNumber,\r\n  activityAuth,\r\n  role\r\n) => {\r\n  const rolesMapper = {\r\n    PE: \"pe\",\r\n    \"Subcon TL\": \"subconTL\",\r\n    \"SL\":\"sl\"\r\n  };\r\n\r\n  const result = [];\r\n\r\n  if (role === \"admin\") {\r\n    Object.keys(rolesMapper).forEach((key) => {\r\n      const tmp = documentAuthorizationC(\r\n        orderActivities,\r\n        orderNumber,\r\n        activityAuth,\r\n        key\r\n      );\r\n      result.push(...tmp);\r\n    });\r\n\r\n    return Array.from(new Set([...result]));\r\n  }\r\n\r\n  const authDesc = activityAuth[rolesMapper[role]];\r\n\r\n  const steps = Array.from(new Set([...authDesc.documentAuthorization.c]));\r\n\r\n  var filteredSteps = steps.filter((value) => {\r\n    return value.length === 4;\r\n  });\r\n\r\n  if (role === \"PE\") {\r\n    // 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      filteredSteps.push(\"7020\");\r\n    } else {\r\n      // 14 steps\r\n      filteredSteps.push(\"70D0\");\r\n    }\r\n  } else if (role === \"SL\") {\r\n    filteredSteps.push(\"7800\");\r\n  } else {\r\n    // 3 steps\r\n    // subcon tl:  remove 7020 when this order contains 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      const removeSteps = [\r\n        \"7020\",\r\n        \"7030\",\r\n        \"7040\",\r\n        \"7050\",\r\n        \"7060\",\r\n        \"7070\",\r\n        \"7080\",\r\n        \"7090\",\r\n        \"70A0\",\r\n        \"70B0\",\r\n        \"70C0\",\r\n        \"70D0\",\r\n      ];\r\n\r\n      _.remove(filteredSteps, (number) => {\r\n        return removeSteps.includes(number);\r\n      });\r\n    }\r\n  }\r\n\r\n  return [...new Set(filteredSteps)];\r\n};\r\n\r\nexport const documentAuthorizationR = (\r\n  orderActivities,\r\n  orderNumber,\r\n  activityAuth,\r\n  role\r\n) => {\r\n  const rolesMapper = {\r\n    PE: \"pe\",\r\n    \"Subcon TL\": \"subconTL\",\r\n    \"SL\":\"sl\"\r\n  };\r\n\r\n  const result = [];\r\n\r\n  if (role === \"admin\") {\r\n    Object.keys(rolesMapper).forEach((key) => {\r\n      const tmp = documentAuthorizationR(\r\n        orderActivities,\r\n        orderNumber,\r\n        activityAuth,\r\n        key\r\n      );\r\n      result.push(...tmp);\r\n    });\r\n\r\n    return Array.from(new Set([...result]));\r\n  }\r\n\r\n  const authDesc = activityAuth[rolesMapper[role]];\r\n\r\n  const steps = Array.from(\r\n    new Set([\r\n      ...authDesc.documentAuthorization.c,\r\n      ...authDesc.documentAuthorization.r,\r\n    ])\r\n  );\r\n\r\n  var filteredSteps = steps.filter((value) => {\r\n    return value.length === 4;\r\n  });\r\n\r\n  if (role === \"PE\") {\r\n    // 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      filteredSteps.push(\"7020\");\r\n    } else {\r\n      // 14 steps\r\n      filteredSteps.push(\"70D0\");\r\n    }\r\n  } else if (role === \"SL\") {\r\n    filteredSteps.push(\"7800\");\r\n  } else {\r\n    // 3 steps\r\n    // subcon tl:  remove 7020 when this order contains 3 steps\r\n    if (\r\n      orderActivities[orderNumber + \"-7020\"] &&\r\n      !orderActivities[orderNumber + \"-7030\"]\r\n    ) {\r\n      const removeSteps = [\r\n        \"7020\",\r\n        \"7030\",\r\n        \"7040\",\r\n        \"7050\",\r\n        \"7060\",\r\n        \"7070\",\r\n        \"7080\",\r\n        \"7090\",\r\n        \"70A0\",\r\n        \"70B0\",\r\n        \"70C0\",\r\n        \"70D0\",\r\n      ];\r\n\r\n      _.remove(filteredSteps, (number) => {\r\n        return removeSteps.includes(number);\r\n      });\r\n    }\r\n  }\r\n  return [...new Set(filteredSteps)];\r\n};\r\n"]},"metadata":{},"sourceType":"module"}